<!doctype html><html lang=en><head><title>television</title><link rel=icon href="data:image/x-icon;base64,R0lGODlhAQABAJAAAAAAAAAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw=="/><meta charset=utf-8 /><meta name=viewport content="width=device-width,initial-scale=1"/><meta name=theme-color content=#FFFFFF /><script type=module>//assets/index.68cbc2d8.js
const Oi=function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))w(S);new MutationObserver(S=>{for(const O of S)if(O.type==="childList")for(const E of O.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&w(E)}).observe(document,{childList:!0,subtree:!0});function D(S){const O={};return S.integrity&&(O.integrity=S.integrity),S.referrerpolicy&&(O.referrerPolicy=S.referrerpolicy),S.crossorigin==="use-credentials"?O.credentials="include":S.crossorigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function w(S){if(S.ep)return;S.ep=!0;const O=D(S);fetch(S.href,O)}};Oi();const Nt={},Ii=(R,_)=>R===_,Or={equals:Ii};let Pi=mi;const qt={},zt=1,Ir=2,fi={owned:null,cleanups:null,context:null,owner:null};var at=null;let vr=null,Ve=null,cr=null,Qe=null,Dt=null,Yr=0;function Fi(R,_){const D=Ve,w=at,S=R.length===0?fi:{owned:null,cleanups:null,context:null,owner:_||w};at=S,Ve=null;try{return zr(()=>R(()=>$r(S)),!0)}finally{Ve=D,at=w}}function ci(R,_){_=_?Object.assign({},Or,_):Or;const D={value:R,observers:null,observerSlots:null,pending:qt,comparator:_.equals||void 0},w=S=>(typeof S=="function"&&(S=S(D.pending!==qt?D.pending:D.value)),Xr(D,S));return[vi.bind(D),w]}function Bt(R,_,D){const w=gi(R,_,!1,zt);Fr(w)}function ri(R,_,D){D=D?Object.assign({},Or,D):Or;const w=gi(R,_,!0,0);return w.pending=qt,w.observers=null,w.observerSlots=null,w.comparator=D.equals||void 0,Fr(w),vi.bind(w)}function Mi(R){if(cr)return R();let _;const D=cr=[];try{_=R()}finally{cr=null}return zr(()=>{for(let w=0;w<D.length;w+=1){const S=D[w];if(S.pending!==qt){const O=S.pending;S.pending=qt,Xr(S,O)}}},!1),_}function qr(R){let _,D=Ve;return Ve=null,_=R(),Ve=D,_}function vi(){const R=vr;if(this.sources&&(this.state||R)){const _=Qe;Qe=null,this.state===zt||R?Fr(this):Pr(this),Qe=_}if(Ve){const _=this.observers?this.observers.length:0;Ve.sources?(Ve.sources.push(this),Ve.sourceSlots.push(_)):(Ve.sources=[this],Ve.sourceSlots=[_]),this.observers?(this.observers.push(Ve),this.observerSlots.push(Ve.sources.length-1)):(this.observers=[Ve],this.observerSlots=[Ve.sources.length-1])}return this.value}function Xr(R,_,D){if(cr)return R.pending===qt&&cr.push(R),R.pending=_,_;if(R.comparator&&R.comparator(R.value,_))return _;let w=!1;return R.value=_,R.observers&&R.observers.length&&zr(()=>{for(let S=0;S<R.observers.length;S+=1){const O=R.observers[S];w&&vr.disposed.has(O),(w&&!O.tState||!w&&!O.state)&&(O.pure?Qe.push(O):Dt.push(O),O.observers&&yi(O)),w||(O.state=zt)}if(Qe.length>1e6)throw Qe=[],new Error},!1),_}function Fr(R){if(!R.fn)return;$r(R);const _=at,D=Ve,w=Yr;Ve=at=R,Ni(R,R.value,w),Ve=D,at=_}function Ni(R,_,D){let w;try{w=R.fn(_)}catch(S){bi(S)}(!R.updatedAt||R.updatedAt<=D)&&(R.observers&&R.observers.length?Xr(R,w):R.value=w,R.updatedAt=D)}function gi(R,_,D,w=zt,S){const O={fn:R,state:w,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:_,owner:at,context:null,pure:D};return at===null||at!==fi&&(at.owned?at.owned.push(O):at.owned=[O]),O}function pi(R){const _=vr;if(R.state===0||_)return;if(R.state===Ir||_)return Pr(R);if(R.suspense&&qr(R.suspense.inFallback))return R.suspense.effects.push(R);const D=[R];for(;(R=R.owner)&&(!R.updatedAt||R.updatedAt<Yr);)(R.state||_)&&D.push(R);for(let w=D.length-1;w>=0;w--)if(R=D[w],R.state===zt||_)Fr(R);else if(R.state===Ir||_){const S=Qe;Qe=null,Pr(R,D[0]),Qe=S}}function zr(R,_){if(Qe)return R();let D=!1;_||(Qe=[]),Dt?D=!0:Dt=[],Yr++;try{return R()}catch(w){bi(w)}finally{Bi(D)}}function Bi(R){Qe&&(mi(Qe),Qe=null),!R&&(Dt.length?Mi(()=>{Pi(Dt),Dt=null}):Dt=null)}function mi(R){for(let _=0;_<R.length;_++)pi(R[_])}function Pr(R,_){const D=vr;R.state=0;for(let w=0;w<R.sources.length;w+=1){const S=R.sources[w];S.sources&&(S.state===zt||D?S!==_&&pi(S):(S.state===Ir||D)&&Pr(S,_))}}function yi(R){const _=vr;for(let D=0;D<R.observers.length;D+=1){const w=R.observers[D];(!w.state||_)&&(w.state=Ir,w.pure?Qe.push(w):Dt.push(w),w.observers&&yi(w))}}function $r(R){let _;if(R.sources)for(;R.sources.length;){const D=R.sources.pop(),w=R.sourceSlots.pop(),S=D.observers;if(S&&S.length){const O=S.pop(),E=D.observerSlots.pop();w<S.length&&(O.sourceSlots[E]=w,S[w]=O,D.observerSlots[w]=E)}}if(R.owned){for(_=0;_<R.owned.length;_++)$r(R.owned[_]);R.owned=null}if(R.cleanups){for(_=0;_<R.cleanups.length;_++)R.cleanups[_]();R.cleanups=null}R.state=0,R.context=null}function bi(R){throw R}function _t(R,_){return qr(()=>R(_))}function ii(R){let _=!1;const D=ri(()=>R.when,void 0,{equals:(w,S)=>_?w===S:!w==!S});return ri(()=>{const w=D();if(w){const S=R.children;return(_=typeof S=="function"&&S.length>0)?qr(()=>S(w)):S}return R.fallback})}const Ui=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Gi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Ui]),ji=new Set(["innerHTML","textContent","innerText","children"]),Ki={className:"class",htmlFor:"for"},ni={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},Hi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Vi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Wi(R,_,D){let w=D.length,S=_.length,O=w,E=0,c=0,K=_[S-1].nextSibling,I=null;for(;E<S||c<O;){if(_[E]===D[c]){E++,c++;continue}for(;_[S-1]===D[O-1];)S--,O--;if(S===E){const X=O<w?c?D[c-1].nextSibling:D[O-c]:K;for(;c<O;)R.insertBefore(D[c++],X)}else if(O===c)for(;E<S;)(!I||!I.has(_[E]))&&_[E].remove(),E++;else if(_[E]===D[O-1]&&D[c]===_[S-1]){const X=_[--S].nextSibling;R.insertBefore(D[c++],_[E++].nextSibling),R.insertBefore(D[--O],X),_[S]=D[O]}else{if(!I){I=new Map;let q=c;for(;q<O;)I.set(D[q],q++)}const X=I.get(_[E]);if(X!=null)if(c<X&&X<O){let q=E,V=1,H;for(;++q<S&&q<O&&!((H=I.get(_[q]))==null||H!==X+V);)V++;if(V>X-c){const U=_[E];for(;c<X;)R.insertBefore(D[c++],U)}else R.replaceChild(D[c++],_[E++])}else E++;else _[E++].remove()}}}const ai="_$DX_DELEGATE";function Yi(R,_,D){let w;return Fi(S=>{w=S,_===document?R():Zi(_,R(),_.firstChild?null:void 0,D)}),()=>{w(),_.textContent=""}}function Ei(R,_,D){const w=document.createElement("template");w.innerHTML=R;let S=w.content.firstChild;return D&&(S=S.firstChild),S}function qi(R,_=window.document){const D=_[ai]||(_[ai]=new Set);for(let w=0,S=R.length;w<S;w++){const O=R[w];D.has(O)||(D.add(O),_.addEventListener(O,rn))}}function Xi(R,_,D){D==null?R.removeAttribute(_):R.setAttribute(_,D)}function zi(R,_,D,w){w==null?R.removeAttributeNS(_,D):R.setAttributeNS(_,D,w)}function $i(R,_,D,w){w?Array.isArray(D)?(R[`$$${_}`]=D[0],R[`$$${_}Data`]=D[1]):R[`$$${_}`]=D:Array.isArray(D)?R.addEventListener(_,S=>D[0](D[1],S)):R.addEventListener(_,D)}function Qi(R,_,D={}){const w=Object.keys(_||{}),S=Object.keys(D);let O,E;for(O=0,E=S.length;O<E;O++){const c=S[O];!c||c==="undefined"||_[c]||(si(R,c,!1),delete D[c])}for(O=0,E=w.length;O<E;O++){const c=w[O],K=!!_[c];!c||c==="undefined"||D[c]===K||!K||(si(R,c,!0),D[c]=K)}return D}function Ji(R,_,D={}){const w=R.style,S=typeof D=="string";if(_==null&&S||typeof _=="string")return w.cssText=_;S&&(w.cssText=void 0,D={}),_||(_={});let O,E;for(E in D)_[E]==null&&w.removeProperty(E),delete D[E];for(E in _)O=_[E],O!==D[E]&&(w.setProperty(E,O),D[E]=O);return D}function Ti(R,_,D,w){typeof _=="function"?Bt(S=>li(R,_(),S,D,w)):li(R,_,void 0,D,w)}function Zi(R,_,D,w){if(D!==void 0&&!w&&(w=[]),typeof _!="function")return Xt(R,_,w,D);Bt(S=>Xt(R,_(),S,D),w)}function en(R,_,D,w,S={},O=!1){_||(_={});for(const E in S)if(!(E in _)){if(E==="children")continue;oi(R,E,null,S[E],D,O)}for(const E in _){if(E==="children"){w||Xt(R,_.children);continue}const c=_[E];S[E]=oi(R,E,c,S[E],D,O)}}function tn(R){return R.toLowerCase().replace(/-([a-z])/g,(_,D)=>D.toUpperCase())}function si(R,_,D){const w=_.trim().split(/\s+/);for(let S=0,O=w.length;S<O;S++)R.classList.toggle(w[S],D)}function oi(R,_,D,w,S,O){let E,c,K;if(_==="style")return Ji(R,D,w);if(_==="classList")return Qi(R,D,w);if(D===w)return w;if(_==="ref")O||D(R);else if(_.slice(0,3)==="on:")R.addEventListener(_.slice(3),D);else if(_.slice(0,10)==="oncapture:")R.addEventListener(_.slice(10),D,!0);else if(_.slice(0,2)==="on"){const I=_.slice(2).toLowerCase(),X=Hi.has(I);$i(R,I,D,X),X&&qi([I])}else if((K=ji.has(_))||!S&&(ni[_]||(c=Gi.has(_)))||(E=R.nodeName.includes("-")))E&&!c&&!K?R[tn(_)]=D:R[ni[_]||_]=D;else{const I=S&&_.indexOf(":")>-1&&Vi[_.split(":")[0]];I?zi(R,I,_,D):Xi(R,Ki[_]||_,D)}return D}function rn(R){const _=`$$${R.type}`;let D=R.composedPath&&R.composedPath()[0]||R.target;for(R.target!==D&&Object.defineProperty(R,"target",{configurable:!0,value:D}),Object.defineProperty(R,"currentTarget",{configurable:!0,get(){return D||document}}),window._$HY&&!Nt.done&&(Nt.done=!0,document.querySelectorAll("[id^=pl-]").forEach(w=>w.remove()));D!==null;){const w=D[_];if(w&&!D.disabled){const S=D[`${_}Data`];if(S!==void 0?w(S,R):w(R),R.cancelBubble)return}D=D.host&&D.host!==D&&D.host instanceof Node?D.host:D.parentNode}}function li(R,_,D={},w,S){return _||(_={}),!S&&"children"in _&&Bt(()=>D.children=Xt(R,_.children,D.children)),_.ref&&_.ref(R),Bt(()=>en(R,_,w,!0,D,!0)),D}function Xt(R,_,D,w,S){for(Nt.context&&!D&&(D=[...R.childNodes]);typeof D=="function";)D=D();if(_===D)return D;const O=typeof _,E=w!==void 0;if(R=E&&D[0]&&D[0].parentNode||R,O==="string"||O==="number"){if(Nt.context)return D;if(O==="number"&&(_=_.toString()),E){let c=D[0];c&&c.nodeType===3?c.data=_:c=document.createTextNode(_),D=Yt(R,D,w,c)}else D!==""&&typeof D=="string"?D=R.firstChild.data=_:D=R.textContent=_}else if(_==null||O==="boolean"){if(Nt.context)return D;D=Yt(R,D,w)}else{if(O==="function")return Bt(()=>{let c=_();for(;typeof c=="function";)c=c();D=Xt(R,c,D,w)}),()=>D;if(Array.isArray(_)){const c=[];if(Wr(c,_,S))return Bt(()=>D=Xt(R,c,D,w,!0)),()=>D;if(Nt.context){for(let K=0;K<c.length;K++)if(c[K].parentNode)return D=c}if(c.length===0){if(D=Yt(R,D,w),E)return D}else Array.isArray(D)?D.length===0?ui(R,c,w):Wi(R,D,c):(D&&Yt(R),ui(R,c));D=c}else if(_ instanceof Node){if(Nt.context&&_.parentNode)return D=E?[_]:_;if(Array.isArray(D)){if(E)return D=Yt(R,D,w,_);Yt(R,D,null,_)}else D==null||D===""||!R.firstChild?R.appendChild(_):R.replaceChild(_,R.firstChild);D=_}}return D}function Wr(R,_,D){let w=!1;for(let S=0,O=_.length;S<O;S++){let E=_[S],c;if(E instanceof Node)R.push(E);else if(!(E==null||E===!0||E===!1))if(Array.isArray(E))w=Wr(R,E)||w;else if((c=typeof E)=="string")R.push(document.createTextNode(E));else if(c==="function")if(D){for(;typeof E=="function";)E=E();w=Wr(R,Array.isArray(E)?E:[E])||w}else R.push(E),w=!0;else R.push(document.createTextNode(E.toString()))}return w}function ui(R,_,D){for(let w=0,S=_.length;w<S;w++)R.insertBefore(_[w],D)}function Yt(R,_,D,w){if(D===void 0)return R.textContent="";const S=w||document.createTextNode("");if(_.length){let O=!1;for(let E=_.length-1;E>=0;E--){const c=_[E];if(S!==c){const K=c.parentNode===R;!O&&!E?K?R.replaceChild(S,c):R.insertBefore(S,D):K&&c.remove()}else O=!0}}else R.insertBefore(S,D);return[S]}var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function an(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}var Si={exports:{}};(function(R,_){typeof window<"u"&&function(D,w){R.exports=w()}(nn,function(){return function(D){var w={};function S(O){if(w[O])return w[O].exports;var E=w[O]={i:O,l:!1,exports:{}};return D[O].call(E.exports,E,E.exports,S),E.l=!0,E.exports}return S.m=D,S.c=w,S.d=function(O,E,c){S.o(O,E)||Object.defineProperty(O,E,{enumerable:!0,get:c})},S.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},S.t=function(O,E){if(1&E&&(O=S(O)),8&E||4&E&&typeof O=="object"&&O&&O.__esModule)return O;var c=Object.create(null);if(S.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:O}),2&E&&typeof O!="string")for(var K in O)S.d(c,K,function(I){return O[I]}.bind(null,K));return c},S.n=function(O){var E=O&&O.__esModule?function(){return O.default}:function(){return O};return S.d(E,"a",E),E},S.o=function(O,E){return Object.prototype.hasOwnProperty.call(O,E)},S.p="/dist/",S(S.s=19)}([function(D,w,S){var O;S.d(w,"a",function(){return O}),function(E){E.MEDIA_ATTACHING="hlsMediaAttaching",E.MEDIA_ATTACHED="hlsMediaAttached",E.MEDIA_DETACHING="hlsMediaDetaching",E.MEDIA_DETACHED="hlsMediaDetached",E.BUFFER_RESET="hlsBufferReset",E.BUFFER_CODECS="hlsBufferCodecs",E.BUFFER_CREATED="hlsBufferCreated",E.BUFFER_APPENDING="hlsBufferAppending",E.BUFFER_APPENDED="hlsBufferAppended",E.BUFFER_EOS="hlsBufferEos",E.BUFFER_FLUSHING="hlsBufferFlushing",E.BUFFER_FLUSHED="hlsBufferFlushed",E.MANIFEST_LOADING="hlsManifestLoading",E.MANIFEST_LOADED="hlsManifestLoaded",E.MANIFEST_PARSED="hlsManifestParsed",E.LEVEL_SWITCHING="hlsLevelSwitching",E.LEVEL_SWITCHED="hlsLevelSwitched",E.LEVEL_LOADING="hlsLevelLoading",E.LEVEL_LOADED="hlsLevelLoaded",E.LEVEL_UPDATED="hlsLevelUpdated",E.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",E.LEVELS_UPDATED="hlsLevelsUpdated",E.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",E.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",E.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",E.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",E.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",E.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",E.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",E.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",E.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",E.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",E.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",E.CUES_PARSED="hlsCuesParsed",E.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",E.INIT_PTS_FOUND="hlsInitPtsFound",E.FRAG_LOADING="hlsFragLoading",E.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",E.FRAG_LOADED="hlsFragLoaded",E.FRAG_DECRYPTED="hlsFragDecrypted",E.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",E.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",E.FRAG_PARSING_METADATA="hlsFragParsingMetadata",E.FRAG_PARSED="hlsFragParsed",E.FRAG_BUFFERED="hlsFragBuffered",E.FRAG_CHANGED="hlsFragChanged",E.FPS_DROP="hlsFpsDrop",E.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",E.ERROR="hlsError",E.DESTROYING="hlsDestroying",E.KEY_LOADING="hlsKeyLoading",E.KEY_LOADED="hlsKeyLoaded",E.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",E.BACK_BUFFER_REACHED="hlsBackBufferReached"}(O||(O={}))},function(D,w,S){S.d(w,"a",function(){return I}),S.d(w,"b",function(){return X});var O=function(){},E={trace:O,debug:O,log:O,warn:O,info:O,error:O},c=E;function K(q){var V=self.console[q];return V?V.bind(self.console,"["+q+"] >"):O}function I(q){if(self.console&&q===!0||typeof q=="object"){(function(V){for(var H=arguments.length,U=new Array(H>1?H-1:0),M=1;M<H;M++)U[M-1]=arguments[M];U.forEach(function(ae){c[ae]=V[ae]?V[ae].bind(V):K(ae)})})(q,"debug","log","info","warn","error");try{c.log()}catch{c=E}}else c=E}var X=E},function(D,w,S){var O,E;S.d(w,"b",function(){return O}),S.d(w,"a",function(){return E}),function(c){c.NETWORK_ERROR="networkError",c.MEDIA_ERROR="mediaError",c.KEY_SYSTEM_ERROR="keySystemError",c.MUX_ERROR="muxError",c.OTHER_ERROR="otherError"}(O||(O={})),function(c){c.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",c.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",c.KEY_SYSTEM_NO_SESSION="keySystemNoSession",c.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",c.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",c.MANIFEST_LOAD_ERROR="manifestLoadError",c.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",c.MANIFEST_PARSING_ERROR="manifestParsingError",c.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",c.LEVEL_EMPTY_ERROR="levelEmptyError",c.LEVEL_LOAD_ERROR="levelLoadError",c.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",c.LEVEL_SWITCH_ERROR="levelSwitchError",c.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",c.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",c.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",c.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",c.FRAG_LOAD_ERROR="fragLoadError",c.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",c.FRAG_DECRYPT_ERROR="fragDecryptError",c.FRAG_PARSING_ERROR="fragParsingError",c.REMUX_ALLOC_ERROR="remuxAllocError",c.KEY_LOAD_ERROR="keyLoadError",c.KEY_LOAD_TIMEOUT="keyLoadTimeOut",c.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",c.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",c.BUFFER_APPEND_ERROR="bufferAppendError",c.BUFFER_APPENDING_ERROR="bufferAppendingError",c.BUFFER_STALLED_ERROR="bufferStalledError",c.BUFFER_FULL_ERROR="bufferFullError",c.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",c.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",c.INTERNAL_EXCEPTION="internalException",c.INTERNAL_ABORTED="aborted",c.UNKNOWN="unknown"}(E||(E={}))},function(D,w,S){S.d(w,"a",function(){return O});var O=Number.isFinite||function(E){return typeof E=="number"&&isFinite(E)}},function(D,w,S){var O,E;S.d(w,"a",function(){return O}),S.d(w,"b",function(){return E}),function(c){c.MANIFEST="manifest",c.LEVEL="level",c.AUDIO_TRACK="audioTrack",c.SUBTITLE_TRACK="subtitleTrack"}(O||(O={})),function(c){c.MAIN="main",c.AUDIO="audio",c.SUBTITLE="subtitle"}(E||(E={}))},function(D,w,S){S.d(w,"a",function(){return O}),S.d(w,"b",function(){return ae}),S.d(w,"c",function(){return Y});var O,E=S(3),c=S(11),K=S(1),I=S(15),X=S(12);function q(J,z){J.prototype=Object.create(z.prototype),J.prototype.constructor=J,V(J,z)}function V(J,z){return(V=Object.setPrototypeOf||function(Q,P){return Q.__proto__=P,Q})(J,z)}function H(J,z){for(var Q=0;Q<z.length;Q++){var P=z[Q];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(J,P.key,P)}}function U(J,z,Q){return z&&H(J.prototype,z),Q&&H(J,Q),J}(function(J){J.AUDIO="audio",J.VIDEO="video",J.AUDIOVIDEO="audiovideo"})(O||(O={}));var M=function(){function J(z){var Q;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((Q={})[O.AUDIO]=null,Q[O.VIDEO]=null,Q[O.AUDIOVIDEO]=null,Q),this.baseurl=z}return J.prototype.setByteRange=function(z,Q){var P=z.split("@",2),k=[];P.length===1?k[0]=Q?Q.byteRangeEndOffset:0:k[0]=parseInt(P[1]),k[1]=parseInt(P[0])+k[0],this._byteRange=k},U(J,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(c.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(z){this._url=z}}]),J}(),ae=function(J){function z(P,k){var C;return(C=J.call(this,k)||this)._decryptdata=null,C.rawProgramDateTime=null,C.programDateTime=null,C.tagList=[],C.duration=0,C.sn=0,C.levelkey=void 0,C.type=void 0,C.loader=null,C.level=-1,C.cc=0,C.startPTS=void 0,C.endPTS=void 0,C.appendedPTS=void 0,C.startDTS=void 0,C.endDTS=void 0,C.start=0,C.deltaPTS=void 0,C.maxStartPTS=void 0,C.minEndPTS=void 0,C.stats=new X.a,C.urlId=0,C.data=void 0,C.bitrateTest=!1,C.title=null,C.initSegment=null,C.type=P,C}q(z,J);var Q=z.prototype;return Q.createInitializationVector=function(P){for(var k=new Uint8Array(16),C=12;C<16;C++)k[C]=P>>8*(15-C)&255;return k},Q.setDecryptDataFromLevelKey=function(P,k){var C=P;return P?.method==="AES-128"&&P.uri&&!P.iv&&((C=I.a.fromURI(P.uri)).method=P.method,C.iv=this.createInitializationVector(k),C.keyFormat="identity"),C},Q.setElementaryStreamInfo=function(P,k,C,Z,ne,ue){ue===void 0&&(ue=!1);var fe=this.elementaryStreams,de=fe[P];de?(de.startPTS=Math.min(de.startPTS,k),de.endPTS=Math.max(de.endPTS,C),de.startDTS=Math.min(de.startDTS,Z),de.endDTS=Math.max(de.endDTS,ne)):fe[P]={startPTS:k,endPTS:C,startDTS:Z,endDTS:ne,partial:ue}},Q.clearElementaryStreamInfo=function(){var P=this.elementaryStreams;P[O.AUDIO]=null,P[O.VIDEO]=null,P[O.AUDIOVIDEO]=null},U(z,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var P=this.sn;typeof P!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&K.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),P=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,P)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(E.a)(this.programDateTime))return null;var P=Object(E.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*P}},{key:"encrypted",get:function(){var P;return!((P=this.decryptdata)===null||P===void 0||!P.keyFormat||!this.decryptdata.uri)}}]),z}(M),Y=function(J){function z(Q,P,k,C,Z){var ne;(ne=J.call(this,k)||this).fragOffset=0,ne.duration=0,ne.gap=!1,ne.independent=!1,ne.relurl=void 0,ne.fragment=void 0,ne.index=void 0,ne.stats=new X.a,ne.duration=Q.decimalFloatingPoint("DURATION"),ne.gap=Q.bool("GAP"),ne.independent=Q.bool("INDEPENDENT"),ne.relurl=Q.enumeratedString("URI"),ne.fragment=P,ne.index=C;var ue=Q.enumeratedString("BYTERANGE");return ue&&ne.setByteRange(ue,Z),Z&&(ne.fragOffset=Z.fragOffset+Z.duration),ne}return q(z,J),U(z,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var Q=this.elementaryStreams;return!!(Q.audio||Q.video||Q.audiovideo)}}]),z}(M)},function(D,w,S){S.d(w,"b",function(){return V}),S.d(w,"g",function(){return H}),S.d(w,"f",function(){return U}),S.d(w,"d",function(){return M}),S.d(w,"c",function(){return ae}),S.d(w,"e",function(){return J}),S.d(w,"h",function(){return z}),S.d(w,"a",function(){return Q});var O=S(8),E=S(5),c=Math.pow(2,32)-1,K=[].push;function I(P){return String.fromCharCode.apply(null,P)}function X(P,k){"data"in P&&(k+=P.start,P=P.data);var C=P[k]<<24|P[k+1]<<16|P[k+2]<<8|P[k+3];return C<0?4294967296+C:C}function q(P,k,C){"data"in P&&(k+=P.start,P=P.data),P[k]=C>>24,P[k+1]=C>>16&255,P[k+2]=C>>8&255,P[k+3]=255&C}function V(P,k){var C,Z,ne,ue=[];if(!k.length)return ue;"data"in P?(C=P.data,Z=P.start,ne=P.end):(Z=0,ne=(C=P).byteLength);for(var fe=Z;fe<ne;){var de=X(C,fe),ee=de>1?fe+de:ne;if(I(C.subarray(fe+4,fe+8))===k[0])if(k.length===1)ue.push({data:C,start:fe+8,end:ee});else{var Ee=V({data:C,start:fe+8,end:ee},k.slice(1));Ee.length&&K.apply(ue,Ee)}fe=ee}return ue}function H(P){var k=V(P,["moov"])[0],C=k?k.end:null,Z=V(P,["sidx"]);if(!Z||!Z[0])return null;var ne=[],ue=Z[0],fe=ue.data[0],de=fe===0?8:16,ee=X(ue,de);de+=4,de+=fe===0?8:16,de+=2;var Ee=ue.end+0,Le=function(Fe,Ue){"data"in Fe&&(Ue+=Fe.start,Fe=Fe.data);var Ke=Fe[Ue]<<8|Fe[Ue+1];return Ke<0?65536+Ke:Ke}(ue,de);de+=2;for(var Se=0;Se<Le;Se++){var Ae=de,ke=X(ue,Ae);Ae+=4;var Ne=2147483647&ke;if((2147483648&ke)>>>31===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var Ge=X(ue,Ae);Ae+=4,ne.push({referenceSize:Ne,subsegmentDuration:Ge,info:{duration:Ge/ee,start:Ee,end:Ee+Ne-1}}),Ee+=Ne,de=Ae+=4}return{earliestPresentationTime:0,timescale:ee,version:fe,referencesCount:Le,references:ne,moovEndOffset:C}}function U(P){for(var k=[],C=V(P,["moov","trak"]),Z=0;Z<C.length;Z++){var ne=C[Z],ue=V(ne,["tkhd"])[0];if(ue){var fe=ue.data[ue.start],de=fe===0?12:20,ee=X(ue,de),Ee=V(ne,["mdia","mdhd"])[0];if(Ee){var Le=X(Ee,de=(fe=Ee.data[Ee.start])===0?12:20),Se=V(ne,["mdia","hdlr"])[0];if(Se){var Ae=I(Se.data.subarray(Se.start+8,Se.start+12)),ke={soun:E.a.AUDIO,vide:E.a.VIDEO}[Ae];if(ke){var Ne=V(ne,["mdia","minf","stbl","stsd"])[0],Ge=void 0;Ne&&(Ge=I(Ne.data.subarray(Ne.start+12,Ne.start+16))),k[ee]={timescale:Le,type:ke},k[ke]={timescale:Le,id:ee,codec:Ge}}}}}}return V(P,["moov","mvex","trex"]).forEach(function(Fe){var Ue=X(Fe,4),Ke=k[Ue];Ke&&(Ke.default={duration:X(Fe,12),flags:X(Fe,20)})}),k}function M(P,k){return V(k,["moof","traf"]).reduce(function(C,Z){var ne=V(Z,["tfdt"])[0],ue=ne.data[ne.start],fe=V(Z,["tfhd"]).reduce(function(de,ee){var Ee=X(ee,4),Le=P[Ee];if(Le){var Se=X(ne,4);ue===1&&(Se*=Math.pow(2,32),Se+=X(ne,8));var Ae=Se/(Le.timescale||9e4);if(isFinite(Ae)&&(de===null||Ae<de))return Ae}return de},null);return fe!==null&&isFinite(fe)&&(C===null||fe<C)?fe:C},null)||0}function ae(P,k){for(var C=0,Z=0,ne=0,ue=V(P,["moof","traf"]),fe=0;fe<ue.length;fe++){var de=ue[fe],ee=V(de,["tfhd"])[0],Ee=k[X(ee,4)];if(Ee){var Le=Ee.default,Se=X(ee,0)|Le?.flags,Ae=Le?.duration;8&Se&&(Ae=X(ee,2&Se?12:8));for(var ke=Ee.timescale||9e4,Ne=V(de,["trun"]),Ge=0;Ge<Ne.length;Ge++)!(C=Y(Ne[Ge]))&&Ae&&(C=Ae*X(Ne[Ge],4)),Ee.type===E.a.VIDEO?Z+=C/ke:Ee.type===E.a.AUDIO&&(ne+=C/ke)}}if(Z===0&&ne===0){var Fe=H(P);if(Fe!=null&&Fe.references)return Fe.references.reduce(function(Ue,Ke){return Ue+Ke.info.duration||0},0)}return Z||ne}function Y(P){var k=X(P,0),C=8;1&k&&(C+=4),4&k&&(C+=4);for(var Z=0,ne=X(P,4),ue=0;ue<ne;ue++)256&k&&(Z+=X(P,C),C+=4),512&k&&(C+=4),1024&k&&(C+=4),2048&k&&(C+=4);return Z}function J(P,k,C){V(k,["moof","traf"]).forEach(function(Z){V(Z,["tfhd"]).forEach(function(ne){var ue=X(ne,4),fe=P[ue];if(fe){var de=fe.timescale||9e4;V(Z,["tfdt"]).forEach(function(ee){var Ee=ee.data[ee.start],Le=X(ee,4);if(Ee===0)q(ee,4,Le-C*de);else{Le*=Math.pow(2,32),Le+=X(ee,8),Le-=C*de,Le=Math.max(Le,0);var Se=Math.floor(Le/(c+1)),Ae=Math.floor(Le%(c+1));q(ee,4,Se),q(ee,8,Ae)}})}})})}function z(P){var k={valid:null,remainder:null},C=V(P,["moof"]);if(!C)return k;if(C.length<2)return k.remainder=P,k;var Z=C[C.length-1];return k.valid=Object(O.a)(P,0,Z.start-8),k.remainder=Object(O.a)(P,Z.start-8),k}function Q(P,k){var C=new Uint8Array(P.length+k.length);return C.set(P),C.set(k,P.length),C}},function(D,w,S){S.d(w,"b",function(){return K}),S.d(w,"a",function(){return X}),S.d(w,"d",function(){return q}),S.d(w,"e",function(){return V}),S.d(w,"c",function(){return U}),S.d(w,"f",function(){return Q});var O,E=function(k,C){return C+10<=k.length&&k[C]===73&&k[C+1]===68&&k[C+2]===51&&k[C+3]<255&&k[C+4]<255&&k[C+6]<128&&k[C+7]<128&&k[C+8]<128&&k[C+9]<128},c=function(k,C){return C+10<=k.length&&k[C]===51&&k[C+1]===68&&k[C+2]===73&&k[C+3]<255&&k[C+4]<255&&k[C+6]<128&&k[C+7]<128&&k[C+8]<128&&k[C+9]<128},K=function(k,C){for(var Z=C,ne=0;E(k,C);)ne+=10,ne+=I(k,C+6),c(k,C+10)&&(ne+=10),C+=ne;if(ne>0)return k.subarray(Z,Z+ne)},I=function(k,C){var Z=0;return Z=(127&k[C])<<21,Z|=(127&k[C+1])<<14,Z|=(127&k[C+2])<<7,Z|=127&k[C+3]},X=function(k,C){return E(k,C)&&I(k,C+6)+10<=k.length-C},q=function(k){for(var C=U(k),Z=0;Z<C.length;Z++){var ne=C[Z];if(V(ne))return z(ne)}},V=function(k){return k&&k.key==="PRIV"&&k.info==="com.apple.streaming.transportStreamTimestamp"},H=function(k){var C=String.fromCharCode(k[0],k[1],k[2],k[3]),Z=I(k,4);return{type:C,size:Z,data:k.subarray(10,10+Z)}},U=function(k){for(var C=0,Z=[];E(k,C);){for(var ne=I(k,C+6),ue=(C+=10)+ne;C+8<ue;){var fe=H(k.subarray(C)),de=M(fe);de&&Z.push(de),C+=fe.size+10}c(k,C)&&(C+=10)}return Z},M=function(k){return k.type==="PRIV"?ae(k):k.type[0]==="W"?J(k):Y(k)},ae=function(k){if(!(k.size<2)){var C=Q(k.data,!0),Z=new Uint8Array(k.data.subarray(C.length+1));return{key:k.type,info:C,data:Z.buffer}}},Y=function(k){if(!(k.size<2)){if(k.type==="TXXX"){var C=1,Z=Q(k.data.subarray(C),!0);C+=Z.length+1;var ne=Q(k.data.subarray(C));return{key:k.type,info:Z,data:ne}}var ue=Q(k.data.subarray(1));return{key:k.type,data:ue}}},J=function(k){if(k.type==="WXXX"){if(k.size<2)return;var C=1,Z=Q(k.data.subarray(C),!0);C+=Z.length+1;var ne=Q(k.data.subarray(C));return{key:k.type,info:Z,data:ne}}var ue=Q(k.data);return{key:k.type,data:ue}},z=function(k){if(k.data.byteLength===8){var C=new Uint8Array(k.data),Z=1&C[3],ne=(C[4]<<23)+(C[5]<<15)+(C[6]<<7)+C[7];return ne/=45,Z&&(ne+=4772185884e-2),Math.round(ne)}},Q=function(k,C){C===void 0&&(C=!1);var Z=P();if(Z){var ne=Z.decode(k);if(C){var ue=ne.indexOf("\0");return ue!==-1?ne.substring(0,ue):ne}return ne.replace(/\0/g,"")}for(var fe,de,ee,Ee=k.length,Le="",Se=0;Se<Ee;){if((fe=k[Se++])===0&&C)return Le;if(fe!==0&&fe!==3)switch(fe>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Le+=String.fromCharCode(fe);break;case 12:case 13:de=k[Se++],Le+=String.fromCharCode((31&fe)<<6|63&de);break;case 14:de=k[Se++],ee=k[Se++],Le+=String.fromCharCode((15&fe)<<12|(63&de)<<6|(63&ee)<<0)}}return Le};function P(){return O||self.TextDecoder===void 0||(O=new self.TextDecoder("utf-8")),O}},function(D,w,S){function O(E,c,K){return Uint8Array.prototype.slice?E.slice(c,K):new Uint8Array(Array.prototype.slice.call(E,c,K))}S.d(w,"a",function(){return O})},function(D,w,S){S.d(w,"c",function(){return Gr}),S.d(w,"d",function(){return Tr}),S.d(w,"a",function(){return Sr}),S.d(w,"b",function(){return It});var O=S(0),E=S(2),c=S(14),K=S(3),I=S(7),X=S(6),q=S(8),V=function(){function f(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var v=f.prototype;return v.resetInitSegment=function(l,g,y){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},v.resetTimeStamp=function(){},v.resetContiguity=function(){},v.canParse=function(l,g){return!1},v.appendFrame=function(l,g,y){},v.demux=function(l,g){this.cachedData&&(l=Object(X.a)(this.cachedData,l),this.cachedData=null);var y,L,T=I.b(l,0),x=T?T.length:0,N=this._audioTrack,W=this._id3Track,G=T?I.d(T):void 0,$=l.length;for(this.frameIndex!==0&&this.initPTS!==null||(this.initPTS=H(G,g)),T&&T.length>0&&W.samples.push({pts:this.initPTS,dts:this.initPTS,data:T}),L=this.initPTS;x<$;){if(this.canParse(l,x)){var te=this.appendFrame(N,l,x);te?(this.frameIndex++,L=te.sample.pts,y=x+=te.length):x=$}else I.a(l,x)?(T=I.b(l,x),W.samples.push({pts:L,dts:L,data:T}),y=x+=T.length):x++;if(x===$&&y!==$){var re=Object(q.a)(l,y);this.cachedData?this.cachedData=Object(X.a)(this.cachedData,re):this.cachedData=re}}return{audioTrack:N,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:W,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},v.demuxSampleAes=function(l,g,y){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},v.flush=function(l){var g=this.cachedData;return g&&(this.cachedData=null,this.demux(g,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},v.destroy=function(){},f}(),H=function(f,v){return Object(K.a)(f)?90*f:9e4*v},U=V,M=S(1);function ae(f,v){return f[v]===255&&(246&f[v+1])==240}function Y(f,v){return 1&f[v+1]?7:9}function J(f,v){return(3&f[v+3])<<11|f[v+4]<<3|(224&f[v+5])>>>5}function z(f,v){return v+1<f.length&&ae(f,v)}function Q(f,v){if(z(f,v)){var l=Y(f,v);if(v+l>=f.length)return!1;var g=J(f,v);if(g<=l)return!1;var y=v+g;return y===f.length||z(f,y)}return!1}function P(f,v,l,g,y){if(!f.samplerate){var L=function(T,x,N,W){var G,$,te,re,ie=navigator.userAgent.toLowerCase(),ve=W,me=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];G=1+((192&x[N+2])>>>6);var ce=(60&x[N+2])>>>2;if(!(ce>me.length-1))return te=(1&x[N+2])<<2,te|=(192&x[N+3])>>>6,M.b.log("manifest codec:"+W+", ADTS type:"+G+", samplingIndex:"+ce),/firefox/i.test(ie)?ce>=6?(G=5,re=new Array(4),$=ce-3):(G=2,re=new Array(2),$=ce):ie.indexOf("android")!==-1?(G=2,re=new Array(2),$=ce):(G=5,re=new Array(4),W&&(W.indexOf("mp4a.40.29")!==-1||W.indexOf("mp4a.40.5")!==-1)||!W&&ce>=6?$=ce-3:((W&&W.indexOf("mp4a.40.2")!==-1&&(ce>=6&&te===1||/vivaldi/i.test(ie))||!W&&te===1)&&(G=2,re=new Array(2)),$=ce)),re[0]=G<<3,re[0]|=(14&ce)>>1,re[1]|=(1&ce)<<7,re[1]|=te<<3,G===5&&(re[1]|=(14&$)>>1,re[2]=(1&$)<<7,re[2]|=8,re[3]=0),{config:re,samplerate:me[ce],channelCount:te,codec:"mp4a.40."+G,manifestCodec:ve};T.trigger(O.a.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+ce})}(v,l,g,y);if(!L)return;f.config=L.config,f.samplerate=L.samplerate,f.channelCount=L.channelCount,f.codec=L.codec,f.manifestCodec=L.manifestCodec,M.b.log("parsed codec:"+f.codec+", rate:"+L.samplerate+", channels:"+L.channelCount)}}function k(f){return 9216e4/f}function C(f,v,l,g,y){var L=function(re,ie,ve,me,ce){var Re=Y(re,ie),De=J(re,ie);if((De-=Re)>0)return{headerLength:Re,frameLength:De,stamp:ve+me*ce}}(v,l,g,y,k(f.samplerate));if(L){var T,x=L.frameLength,N=L.headerLength,W=L.stamp,G=N+x,$=Math.max(0,l+G-v.length);$?(T=new Uint8Array(G-N)).set(v.subarray(l+N,v.length),0):T=v.subarray(l+N,l+G);var te={unit:T,pts:W};return $||f.samples.push(te),{sample:te,length:G,missing:$}}}function Z(f,v){return(Z=Object.setPrototypeOf||function(l,g){return l.__proto__=g,l})(f,v)}var ne=function(f){var v,l;function g(L,T){var x;return(x=f.call(this)||this).observer=void 0,x.config=void 0,x.observer=L,x.config=T,x}l=f,(v=g).prototype=Object.create(l.prototype),v.prototype.constructor=v,Z(v,l);var y=g.prototype;return y.resetInitSegment=function(L,T,x){f.prototype.resetInitSegment.call(this,L,T,x),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:L,duration:x,inputTimeScale:9e4,dropped:0}},g.probe=function(L){if(!L)return!1;for(var T=(I.b(L,0)||[]).length,x=L.length;T<x;T++)if(Q(L,T))return M.b.log("ADTS sync word found !"),!0;return!1},y.canParse=function(L,T){return function(x,N){return function(W,G){return G+5<W.length}(x,N)&&ae(x,N)&&J(x,N)<=x.length-N}(L,T)},y.appendFrame=function(L,T,x){P(L,this.observer,T,x,L.manifestCodec);var N=C(L,T,x,this.initPTS,this.frameIndex);if(N&&N.missing===0)return N},g}(U);ne.minProbeByteLength=9;var ue=ne,fe=function(){function f(l,g){this.remainderData=null,this.config=void 0,this.config=g}var v=f.prototype;return v.resetTimeStamp=function(){},v.resetInitSegment=function(){},v.resetContiguity=function(){},f.probe=function(l){return Object(X.b)({data:l,start:0,end:Math.min(l.length,16384)},["moof"]).length>0},v.demux=function(l){var g=l,y={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(g=Object(X.a)(this.remainderData,l));var L=Object(X.h)(g);this.remainderData=L.remainder,y.samples=L.valid||new Uint8Array}else y.samples=g;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:y,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},v.flush=function(){var l={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return l.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:l,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},v.demuxSampleAes=function(l,g,y){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},v.destroy=function(){},f}();fe.minProbeByteLength=1024;var de=fe,ee=null,Ee=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Le=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Se=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ae=[0,1,1,4];function ke(f,v,l,g,y){if(!(l+24>v.length)){var L=Ne(v,l);if(L&&l+L.frameLength<=v.length){var T=g+y*(9e4*L.samplesPerFrame/L.sampleRate),x={unit:v.subarray(l,l+L.frameLength),pts:T,dts:T};return f.config=[],f.channelCount=L.channelCount,f.samplerate=L.sampleRate,f.samples.push(x),{sample:x,length:L.frameLength,missing:0}}}}function Ne(f,v){var l=f[v+1]>>3&3,g=f[v+1]>>1&3,y=f[v+2]>>4&15,L=f[v+2]>>2&3;if(l!==1&&y!==0&&y!==15&&L!==3){var T=f[v+2]>>1&1,x=f[v+3]>>6,N=1e3*Ee[14*(l===3?3-g:g===3?3:4)+y-1],W=Le[3*(l===3?0:l===2?1:2)+L],G=x===3?1:2,$=Se[l][g],te=Ae[g],re=8*$*te,ie=Math.floor($*N/W+T)*te;if(ee===null){var ve=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ee=ve?parseInt(ve[1]):0}return!!ee&&ee<=87&&g===2&&N>=224e3&&x===0&&(f[v+3]=128|f[v+3]),{sampleRate:W,channelCount:G,frameLength:ie,samplesPerFrame:re}}}function Ge(f,v){return f[v]===255&&(224&f[v+1])==224&&(6&f[v+1])!=0}function Fe(f,v){return v+1<f.length&&Ge(f,v)}function Ue(f,v){if(v+1<f.length&&Ge(f,v)){var l=Ne(f,v),g=4;l!=null&&l.frameLength&&(g=l.frameLength);var y=v+g;return y===f.length||Fe(f,y)}return!1}var Ke=function(){function f(l){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=l,this.bytesAvailable=l.byteLength,this.word=0,this.bitsAvailable=0}var v=f.prototype;return v.loadWord=function(){var l=this.data,g=this.bytesAvailable,y=l.byteLength-g,L=new Uint8Array(4),T=Math.min(4,g);if(T===0)throw new Error("no bytes available");L.set(l.subarray(y,y+T)),this.word=new DataView(L.buffer).getUint32(0),this.bitsAvailable=8*T,this.bytesAvailable-=T},v.skipBits=function(l){var g;this.bitsAvailable>l?(this.word<<=l,this.bitsAvailable-=l):(l-=this.bitsAvailable,l-=(g=l>>3)>>3,this.bytesAvailable-=g,this.loadWord(),this.word<<=l,this.bitsAvailable-=l)},v.readBits=function(l){var g=Math.min(this.bitsAvailable,l),y=this.word>>>32-g;return l>32&&M.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=g,this.bitsAvailable>0?this.word<<=g:this.bytesAvailable>0&&this.loadWord(),(g=l-g)>0&&this.bitsAvailable?y<<g|this.readBits(g):y},v.skipLZ=function(){var l;for(l=0;l<this.bitsAvailable;++l)if((this.word&2147483648>>>l)!=0)return this.word<<=l,this.bitsAvailable-=l,l;return this.loadWord(),l+this.skipLZ()},v.skipUEG=function(){this.skipBits(1+this.skipLZ())},v.skipEG=function(){this.skipBits(1+this.skipLZ())},v.readUEG=function(){var l=this.skipLZ();return this.readBits(l+1)-1},v.readEG=function(){var l=this.readUEG();return 1&l?1+l>>>1:-1*(l>>>1)},v.readBoolean=function(){return this.readBits(1)===1},v.readUByte=function(){return this.readBits(8)},v.readUShort=function(){return this.readBits(16)},v.readUInt=function(){return this.readBits(32)},v.skipScalingList=function(l){for(var g=8,y=8,L=0;L<l;L++)y!==0&&(y=(g+this.readEG()+256)%256),g=y===0?g:y},v.readSPS=function(){var l,g,y,L=0,T=0,x=0,N=0,W=this.readUByte.bind(this),G=this.readBits.bind(this),$=this.readUEG.bind(this),te=this.readBoolean.bind(this),re=this.skipBits.bind(this),ie=this.skipEG.bind(this),ve=this.skipUEG.bind(this),me=this.skipScalingList.bind(this);W();var ce=W();if(G(5),re(3),W(),ve(),ce===100||ce===110||ce===122||ce===244||ce===44||ce===83||ce===86||ce===118||ce===128){var Re=$();if(Re===3&&re(1),ve(),ve(),re(1),te())for(g=Re!==3?8:12,y=0;y<g;y++)te()&&me(y<6?16:64)}ve();var De=$();if(De===0)$();else if(De===1)for(re(1),ie(),ie(),l=$(),y=0;y<l;y++)ie();ve(),re(1);var xe=$(),_e=$(),ye=G(1);ye===0&&re(1),re(1),te()&&(L=$(),T=$(),x=$(),N=$());var be=[1,1];if(te()&&te())switch(W()){case 1:be=[1,1];break;case 2:be=[12,11];break;case 3:be=[10,11];break;case 4:be=[16,11];break;case 5:be=[40,33];break;case 6:be=[24,11];break;case 7:be=[20,11];break;case 8:be=[32,11];break;case 9:be=[80,33];break;case 10:be=[18,11];break;case 11:be=[15,11];break;case 12:be=[64,33];break;case 13:be=[160,99];break;case 14:be=[4,3];break;case 15:be=[3,2];break;case 16:be=[2,1];break;case 255:be=[W()<<8|W(),W()<<8|W()]}return{width:Math.ceil(16*(xe+1)-2*L-2*T),height:(2-ye)*(_e+1)*16-(ye?2:4)*(x+N),pixelRatio:be}},v.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},f}(),Ut=function(){function f(l,g,y){this.keyData=void 0,this.decrypter=void 0,this.keyData=y,this.decrypter=new c.a(l,g,{removePKCS7Padding:!1})}var v=f.prototype;return v.decryptBuffer=function(l,g){this.decrypter.decrypt(l,this.keyData.key.buffer,this.keyData.iv.buffer,g)},v.decryptAacSample=function(l,g,y,L){var T=l[g].unit,x=T.subarray(16,T.length-T.length%16),N=x.buffer.slice(x.byteOffset,x.byteOffset+x.length),W=this;this.decryptBuffer(N,function(G){var $=new Uint8Array(G);T.set($,16),L||W.decryptAacSamples(l,g+1,y)})},v.decryptAacSamples=function(l,g,y){for(;;g++){if(g>=l.length)return void y();if(!(l[g].unit.length<32)){var L=this.decrypter.isSync();if(this.decryptAacSample(l,g,y,L),!L)return}}},v.getAvcEncryptedData=function(l){for(var g=16*Math.floor((l.length-48)/160)+16,y=new Int8Array(g),L=0,T=32;T<l.length-16;T+=160,L+=16)y.set(l.subarray(T,T+16),L);return y},v.getAvcDecryptedUnit=function(l,g){for(var y=new Uint8Array(g),L=0,T=32;T<l.length-16;T+=160,L+=16)l.set(y.subarray(L,L+16),T);return l},v.decryptAvcSample=function(l,g,y,L,T,x){var N=gr(T.data),W=this.getAvcEncryptedData(N),G=this;this.decryptBuffer(W.buffer,function($){T.data=G.getAvcDecryptedUnit(N,$),x||G.decryptAvcSamples(l,g,y+1,L)})},v.decryptAvcSamples=function(l,g,y,L){if(l instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;g++,y=0){if(g>=l.length)return void L();for(var T=l[g].units;!(y>=T.length);y++){var x=T[y];if(!(x.data.length<=48||x.type!==1&&x.type!==5)){var N=this.decrypter.isSync();if(this.decryptAvcSample(l,g,y,L,x,N),!N)return}}}},f}(),kt={video:1,audio:2,id3:3,text:4},xt=function(){function f(l,g,y){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=l,this.config=g,this.typeSupported=y}f.probe=function(l){var g=f.syncOffset(l);return!(g<0)&&(g&&M.b.warn("MPEG2-TS detected but first sync word found @ offset "+g+", junk ahead ?"),!0)},f.syncOffset=function(l){for(var g=Math.min(1e3,l.length-564),y=0;y<g;){if(l[y]===71&&l[y+188]===71&&l[y+376]===71)return y;y++}return-1},f.createTrack=function(l,g){return{container:l==="video"||l==="audio"?"video/mp2t":void 0,type:l,id:kt[l],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:l==="audio"?g:void 0}};var v=f.prototype;return v.resetInitSegment=function(l,g,y){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=f.createTrack("video",y),this._audioTrack=f.createTrack("audio",y),this._id3Track=f.createTrack("id3",y),this._txtTrack=f.createTrack("text",y),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=l,this.videoCodec=g,this._duration=y},v.resetTimeStamp=function(){},v.resetContiguity=function(){var l=this._audioTrack,g=this._avcTrack,y=this._id3Track;l&&(l.pesData=null),g&&(g.pesData=null),y&&(y.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},v.demux=function(l,g,y,L){var T;y===void 0&&(y=!1),L===void 0&&(L=!1),y||(this.sampleAes=null);var x=this._avcTrack,N=this._audioTrack,W=this._id3Track,G=x.pid,$=x.pesData,te=N.pid,re=W.pid,ie=N.pesData,ve=W.pesData,me=!1,ce=this.pmtParsed,Re=this._pmtId,De=l.length;if(this.remainderData&&(De=(l=Object(X.a)(this.remainderData,l)).length,this.remainderData=null),De<188&&!L)return this.remainderData=l,{audioTrack:N,avcTrack:x,id3Track:W,textTrack:this._txtTrack};var xe=Math.max(0,f.syncOffset(l));(De-=(De+xe)%188)<l.byteLength&&!L&&(this.remainderData=new Uint8Array(l.buffer,De,l.buffer.byteLength-De));for(var _e=0,ye=xe;ye<De;ye+=188)if(l[ye]===71){var be=!!(64&l[ye+1]),we=((31&l[ye+1])<<8)+l[ye+2],Ce=void 0;if((48&l[ye+3])>>4>1){if((Ce=ye+5+l[ye+4])===ye+188)continue}else Ce=ye+4;switch(we){case G:be&&($&&(T=We($))&&this.parseAVCPES(T,!1),$={data:[],size:0}),$&&($.data.push(l.subarray(Ce,ye+188)),$.size+=ye+188-Ce);break;case te:be&&(ie&&(T=We(ie))&&(N.isAAC?this.parseAACPES(T):this.parseMPEGPES(T)),ie={data:[],size:0}),ie&&(ie.data.push(l.subarray(Ce,ye+188)),ie.size+=ye+188-Ce);break;case re:be&&(ve&&(T=We(ve))&&this.parseID3PES(T),ve={data:[],size:0}),ve&&(ve.data.push(l.subarray(Ce,ye+188)),ve.size+=ye+188-Ce);break;case 0:be&&(Ce+=l[Ce]+1),Re=this._pmtId=st(l,Ce);break;case Re:be&&(Ce+=l[Ce]+1);var Ie=ot(l,Ce,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,y);(G=Ie.avc)>0&&(x.pid=G),(te=Ie.audio)>0&&(N.pid=te,N.isAAC=Ie.isAAC),(re=Ie.id3)>0&&(W.pid=re),me&&!ce&&(M.b.log("reparse from beginning"),me=!1,ye=xe-188),ce=this.pmtParsed=!0;break;case 17:case 8191:break;default:me=!0}}else _e++;_e>0&&this.observer.emit(O.a.ERROR,O.a.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+_e+" TS packet/s that do not start with 0x47"}),x.pesData=$,N.pesData=ie,W.pesData=ve;var Ye={audioTrack:N,avcTrack:x,id3Track:W,textTrack:this._txtTrack};return L&&this.extractRemainingSamples(Ye),Ye},v.flush=function(){var l,g=this.remainderData;return this.remainderData=null,l=g?this.demux(g,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(l),this.sampleAes?this.decrypt(l,this.sampleAes):l},v.extractRemainingSamples=function(l){var g,y=l.audioTrack,L=l.avcTrack,T=l.id3Track,x=L.pesData,N=y.pesData,W=T.pesData;x&&(g=We(x))?(this.parseAVCPES(g,!0),L.pesData=null):L.pesData=x,N&&(g=We(N))?(y.isAAC?this.parseAACPES(g):this.parseMPEGPES(g),y.pesData=null):(N!=null&&N.size&&M.b.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=N),W&&(g=We(W))?(this.parseID3PES(g),T.pesData=null):T.pesData=W},v.demuxSampleAes=function(l,g,y){var L=this.demux(l,y,!0,!this.config.progressive),T=this.sampleAes=new Ut(this.observer,this.config,g);return this.decrypt(L,T)},v.decrypt=function(l,g){return new Promise(function(y){var L=l.audioTrack,T=l.avcTrack;L.samples&&L.isAAC?g.decryptAacSamples(L.samples,0,function(){T.samples?g.decryptAvcSamples(T.samples,0,0,function(){y(l)}):y(l)}):T.samples&&g.decryptAvcSamples(T.samples,0,0,function(){y(l)})})},v.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},v.parseAVCPES=function(l,g){var y,L=this,T=this._avcTrack,x=this.parseAVCNALu(l.data),N=this.avcSample,W=!1;l.data=null,N&&x.length&&!T.audFound&&($t(N,T),N=this.avcSample=ct(!1,l.pts,l.dts,"")),x.forEach(function(G){switch(G.type){case 1:y=!0,N||(N=L.avcSample=ct(!0,l.pts,l.dts,"")),N.frame=!0;var $=G.data;if(W&&$.length>4){var te=new Ke($).readSliceType();te!==2&&te!==4&&te!==7&&te!==9||(N.key=!0)}break;case 5:y=!0,N||(N=L.avcSample=ct(!0,l.pts,l.dts,"")),N.key=!0,N.frame=!0;break;case 6:y=!0;var re=new Ke(gr(G.data));re.readUByte();for(var ie=0,ve=0,me=!1,ce=0;!me&&re.bytesAvailable>1;){ie=0;do ie+=ce=re.readUByte();while(ce===255);ve=0;do ve+=ce=re.readUByte();while(ce===255);if(ie===4&&re.bytesAvailable!==0){if(me=!0,re.readUByte()===181&&re.readUShort()===49&&re.readUInt()===1195456820&&re.readUByte()===3){for(var Re=re.readUByte(),De=31&Re,xe=[Re,re.readUByte()],_e=0;_e<De;_e++)xe.push(re.readUByte()),xe.push(re.readUByte()),xe.push(re.readUByte());Qt(L._txtTrack.samples,{type:3,pts:l.pts,bytes:xe})}}else if(ie===5&&re.bytesAvailable!==0){if(me=!0,ve>16){for(var ye=[],be=0;be<16;be++)ye.push(re.readUByte().toString(16)),be!==3&&be!==5&&be!==7&&be!==9||ye.push("-");for(var we=ve-16,Ce=new Uint8Array(we),Ie=0;Ie<we;Ie++)Ce[Ie]=re.readUByte();Qt(L._txtTrack.samples,{pts:l.pts,payloadType:ie,uuid:ye.join(""),userData:Object(I.f)(Ce),userDataBytes:Ce})}}else if(ve<re.bytesAvailable)for(var Ye=0;Ye<ve;Ye++)re.readUByte()}break;case 7:if(y=!0,W=!0,!T.sps){var et=new Ke(G.data).readSPS();T.width=et.width,T.height=et.height,T.pixelRatio=et.pixelRatio,T.sps=[G.data],T.duration=L._duration;for(var ze=G.data.subarray(1,4),Be="avc1.",Xe=0;Xe<3;Xe++){var Oe=ze[Xe].toString(16);Oe.length<2&&(Oe="0"+Oe),Be+=Oe}T.codec=Be}break;case 8:y=!0,T.pps||(T.pps=[G.data]);break;case 9:y=!1,T.audFound=!0,N&&$t(N,T),N=L.avcSample=ct(!1,l.pts,l.dts,"");break;case 12:y=!1;break;default:y=!1,N&&(N.debug+="unknown NAL "+G.type+" ")}N&&y&&N.units.push(G)}),g&&N&&($t(N,T),this.avcSample=null)},v.getLastNalUnit=function(){var l,g,y=this.avcSample;if(!y||y.units.length===0){var L=this._avcTrack.samples;y=L[L.length-1]}if((l=y)!==null&&l!==void 0&&l.units){var T=y.units;g=T[T.length-1]}return g},v.parseAVCNALu=function(l){var g,y,L=l.byteLength,T=this._avcTrack,x=T.naluState||0,N=x,W=[],G=0,$=-1,te=0;for(x===-1&&($=0,te=31&l[0],x=0,G=1);G<L;)if(g=l[G++],x)if(x!==1)if(g)if(g===1){if($>=0){var re={data:l.subarray($,G-x-1),type:te};W.push(re)}else{var ie=this.getLastNalUnit();if(ie&&(N&&G<=4-N&&ie.state&&(ie.data=ie.data.subarray(0,ie.data.byteLength-N)),(y=G-x-1)>0)){var ve=new Uint8Array(ie.data.byteLength+y);ve.set(ie.data,0),ve.set(l.subarray(0,y),ie.data.byteLength),ie.data=ve,ie.state=0}}G<L?($=G,te=31&l[G],x=0):x=-1}else x=0;else x=3;else x=g?0:2;else x=g?0:1;if($>=0&&x>=0){var me={data:l.subarray($,L),type:te,state:x};W.push(me)}if(W.length===0){var ce=this.getLastNalUnit();if(ce){var Re=new Uint8Array(ce.data.byteLength+l.byteLength);Re.set(ce.data,0),Re.set(l,ce.data.byteLength),ce.data=Re}}return T.naluState=x,W},v.parseAACPES=function(l){var g,y,L,T,x,N=0,W=this._audioTrack,G=this.aacOverFlow,$=l.data;if(G){this.aacOverFlow=null;var te=G.sample.unit.byteLength,re=Math.min(G.missing,te),ie=te-re;G.sample.unit.set($.subarray(0,re),ie),W.samples.push(G.sample),N=G.missing}for(g=N,y=$.length;g<y-1&&!z($,g);g++);if(!(g!==N&&(g<y-1?(L="AAC PES did not start with ADTS header,offset:"+g,T=!1):(L="no ADTS header found in AAC PES",T=!0),M.b.warn("parsing error:"+L),this.observer.emit(O.a.ERROR,O.a.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:T,reason:L}),T))){if(P(W,this.observer,$,g,this.audioCodec),l.pts!==void 0)x=l.pts;else{if(!G)return void M.b.warn("[tsdemuxer]: AAC PES unknown PTS");var ve=k(W.samplerate);x=G.sample.pts+ve}for(var me=0;g<y;){if(z($,g)){if(g+5<y){var ce=C(W,$,g,x,me);if(ce){if(!ce.missing){g+=ce.length,me++;continue}this.aacOverFlow=ce}}break}g++}}},v.parseMPEGPES=function(l){var g=l.data,y=g.length,L=0,T=0,x=l.pts;if(x!==void 0)for(;T<y;)if(Fe(g,T)){var N=ke(this._audioTrack,g,T,x,L);if(!N)break;T+=N.length,L++}else T++;else M.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},v.parseID3PES=function(l){l.pts!==void 0?this._id3Track.samples.push(l):M.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},f}();function ct(f,v,l,g){return{key:f,frame:!1,pts:v,dts:l,units:[],debug:g,length:0}}function st(f,v){return(31&f[v+10])<<8|f[v+11]}function ot(f,v,l,g){var y={audio:-1,avc:-1,id3:-1,isAAC:!0},L=v+3+((15&f[v+1])<<8|f[v+2])-4;for(v+=12+((15&f[v+10])<<8|f[v+11]);v<L;){var T=(31&f[v+1])<<8|f[v+2];switch(f[v]){case 207:if(!g){M.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:y.audio===-1&&(y.audio=T);break;case 21:y.id3===-1&&(y.id3=T);break;case 219:if(!g){M.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:y.avc===-1&&(y.avc=T);break;case 3:case 4:l?y.audio===-1&&(y.audio=T,y.isAAC=!1):M.b.log("MPEG audio found, not supported in this browser");break;case 36:M.b.warn("Unsupported HEVC stream type found")}v+=5+((15&f[v+3])<<8|f[v+4])}return y}function We(f){var v,l,g,y,L,T=0,x=f.data;if(!f||f.size===0)return null;for(;x[0].length<19&&x.length>1;){var N=new Uint8Array(x[0].length+x[1].length);N.set(x[0]),N.set(x[1],x[0].length),x[0]=N,x.splice(1,1)}if(((v=x[0])[0]<<16)+(v[1]<<8)+v[2]===1){if((l=(v[4]<<8)+v[5])&&l>f.size-6)return null;var W=v[7];192&W&&(y=536870912*(14&v[9])+4194304*(255&v[10])+16384*(254&v[11])+128*(255&v[12])+(254&v[13])/2,64&W?y-(L=536870912*(14&v[14])+4194304*(255&v[15])+16384*(254&v[16])+128*(255&v[17])+(254&v[18])/2)>54e5&&(M.b.warn(Math.round((y-L)/9e4)+"s delta between PTS and DTS, align them"),y=L):L=y);var G=(g=v[8])+9;if(f.size<=G)return null;f.size-=G;for(var $=new Uint8Array(f.size),te=0,re=x.length;te<re;te++){var ie=(v=x[te]).byteLength;if(G){if(G>ie){G-=ie;continue}v=v.subarray(G),ie-=G,G=0}$.set(v,T),T+=ie}return l&&(l-=g+3),{data:$,pts:y,dts:L,len:l}}return null}function $t(f,v){if(f.units.length&&f.frame){if(f.pts===void 0){var l=v.samples,g=l.length;if(!g)return void v.dropped++;var y=l[g-1];f.pts=y.pts,f.dts=y.dts}v.samples.push(f)}f.debug.length&&M.b.log(f.pts+"/"+f.dts+":"+f.debug)}function Qt(f,v){var l=f.length;if(l>0){if(v.pts>=f[l-1].pts)f.push(v);else for(var g=l-1;g>=0;g--)if(v.pts<f[g].pts){f.splice(g,0,v);break}}else f.push(v)}function gr(f){for(var v=f.byteLength,l=[],g=1;g<v-2;)f[g]===0&&f[g+1]===0&&f[g+2]===3?(l.push(g+2),g+=2):g++;if(l.length===0)return f;var y=v-l.length,L=new Uint8Array(y),T=0;for(g=0;g<y;T++,g++)T===l[0]&&(T++,l.shift()),L[g]=f[T];return L}xt.minProbeByteLength=188;var pr=xt;function mr(f,v){return(mr=Object.setPrototypeOf||function(l,g){return l.__proto__=g,l})(f,v)}var Jt=function(f){var v,l;function g(){return f.apply(this,arguments)||this}l=f,(v=g).prototype=Object.create(l.prototype),v.prototype.constructor=v,mr(v,l);var y=g.prototype;return y.resetInitSegment=function(L,T,x){f.prototype.resetInitSegment.call(this,L,T,x),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:L,duration:x,inputTimeScale:9e4,dropped:0}},g.probe=function(L){if(!L)return!1;for(var T=(I.b(L,0)||[]).length,x=L.length;T<x;T++)if(Ue(L,T))return M.b.log("MPEG Audio sync word found !"),!0;return!1},y.canParse=function(L,T){return function(x,N){return Ge(x,N)&&4<=x.length-N}(L,T)},y.appendFrame=function(L,T,x){if(this.initPTS!==null)return ke(L,T,x,this.initPTS,this.frameIndex)},g}(U);Jt.minProbeByteLength=4;var je=Jt,yr=function(){function f(){}return f.getSilentFrame=function(v,l){switch(v){case"mp4a.40.2":if(l===1)return new Uint8Array([0,200,0,128,35,128]);if(l===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(l===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(l===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(l===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(l===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(l===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},f}(),vt=Math.pow(2,32)-1,Je=function(){function f(){}return f.init=function(){var v;for(v in f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},f.types)f.types.hasOwnProperty(v)&&(f.types[v]=[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]);var l=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),g=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);f.HDLR_TYPES={video:l,audio:g};var y=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]);f.STTS=f.STSC=f.STCO=L,f.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),f.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),f.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),f.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var T=new Uint8Array([105,115,111,109]),x=new Uint8Array([97,118,99,49]),N=new Uint8Array([0,0,0,1]);f.FTYP=f.box(f.types.ftyp,T,N,T,x),f.DINF=f.box(f.types.dinf,f.box(f.types.dref,y))},f.box=function(v){for(var l=8,g=arguments.length,y=new Array(g>1?g-1:0),L=1;L<g;L++)y[L-1]=arguments[L];for(var T=y.length,x=T;T--;)l+=y[T].byteLength;var N=new Uint8Array(l);for(N[0]=l>>24&255,N[1]=l>>16&255,N[2]=l>>8&255,N[3]=255&l,N.set(v,4),T=0,l=8;T<x;T++)N.set(y[T],l),l+=y[T].byteLength;return N},f.hdlr=function(v){return f.box(f.types.hdlr,f.HDLR_TYPES[v])},f.mdat=function(v){return f.box(f.types.mdat,v)},f.mdhd=function(v,l){l*=v;var g=Math.floor(l/(vt+1)),y=Math.floor(l%(vt+1));return f.box(f.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,255&v,g>>24,g>>16&255,g>>8&255,255&g,y>>24,y>>16&255,y>>8&255,255&y,85,196,0,0]))},f.mdia=function(v){return f.box(f.types.mdia,f.mdhd(v.timescale,v.duration),f.hdlr(v.type),f.minf(v))},f.mfhd=function(v){return f.box(f.types.mfhd,new Uint8Array([0,0,0,0,v>>24,v>>16&255,v>>8&255,255&v]))},f.minf=function(v){return v.type==="audio"?f.box(f.types.minf,f.box(f.types.smhd,f.SMHD),f.DINF,f.stbl(v)):f.box(f.types.minf,f.box(f.types.vmhd,f.VMHD),f.DINF,f.stbl(v))},f.moof=function(v,l,g){return f.box(f.types.moof,f.mfhd(v),f.traf(g,l))},f.moov=function(v){for(var l=v.length,g=[];l--;)g[l]=f.trak(v[l]);return f.box.apply(null,[f.types.moov,f.mvhd(v[0].timescale,v[0].duration)].concat(g).concat(f.mvex(v)))},f.mvex=function(v){for(var l=v.length,g=[];l--;)g[l]=f.trex(v[l]);return f.box.apply(null,[f.types.mvex].concat(g))},f.mvhd=function(v,l){l*=v;var g=Math.floor(l/(vt+1)),y=Math.floor(l%(vt+1)),L=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,255&v,g>>24,g>>16&255,g>>8&255,255&g,y>>24,y>>16&255,y>>8&255,255&y,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return f.box(f.types.mvhd,L)},f.sdtp=function(v){var l,g,y=v.samples||[],L=new Uint8Array(4+y.length);for(l=0;l<y.length;l++)g=y[l].flags,L[l+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return f.box(f.types.sdtp,L)},f.stbl=function(v){return f.box(f.types.stbl,f.stsd(v),f.box(f.types.stts,f.STTS),f.box(f.types.stsc,f.STSC),f.box(f.types.stsz,f.STSZ),f.box(f.types.stco,f.STCO))},f.avc1=function(v){var l,g,y,L=[],T=[];for(l=0;l<v.sps.length;l++)y=(g=v.sps[l]).byteLength,L.push(y>>>8&255),L.push(255&y),L=L.concat(Array.prototype.slice.call(g));for(l=0;l<v.pps.length;l++)y=(g=v.pps[l]).byteLength,T.push(y>>>8&255),T.push(255&y),T=T.concat(Array.prototype.slice.call(g));var x=f.box(f.types.avcC,new Uint8Array([1,L[3],L[4],L[5],255,224|v.sps.length].concat(L).concat([v.pps.length]).concat(T))),N=v.width,W=v.height,G=v.pixelRatio[0],$=v.pixelRatio[1];return f.box(f.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,N>>8&255,255&N,W>>8&255,255&W,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),x,f.box(f.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),f.box(f.types.pasp,new Uint8Array([G>>24,G>>16&255,G>>8&255,255&G,$>>24,$>>16&255,$>>8&255,255&$])))},f.esds=function(v){var l=v.config.length;return new Uint8Array([0,0,0,0,3,23+l,0,1,0,4,15+l,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([l]).concat(v.config).concat([6,1,2]))},f.mp4a=function(v){var l=v.samplerate;return f.box(f.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,v.channelCount,0,16,0,0,0,0,l>>8&255,255&l,0,0]),f.box(f.types.esds,f.esds(v)))},f.mp3=function(v){var l=v.samplerate;return f.box(f.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,v.channelCount,0,16,0,0,0,0,l>>8&255,255&l,0,0]))},f.stsd=function(v){return v.type==="audio"?v.isAAC||v.codec!=="mp3"?f.box(f.types.stsd,f.STSD,f.mp4a(v)):f.box(f.types.stsd,f.STSD,f.mp3(v)):f.box(f.types.stsd,f.STSD,f.avc1(v))},f.tkhd=function(v){var l=v.id,g=v.duration*v.timescale,y=v.width,L=v.height,T=Math.floor(g/(vt+1)),x=Math.floor(g%(vt+1));return f.box(f.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,l>>24&255,l>>16&255,l>>8&255,255&l,0,0,0,0,T>>24,T>>16&255,T>>8&255,255&T,x>>24,x>>16&255,x>>8&255,255&x,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,y>>8&255,255&y,0,0,L>>8&255,255&L,0,0]))},f.traf=function(v,l){var g=f.sdtp(v),y=v.id,L=Math.floor(l/(vt+1)),T=Math.floor(l%(vt+1));return f.box(f.types.traf,f.box(f.types.tfhd,new Uint8Array([0,0,0,0,y>>24,y>>16&255,y>>8&255,255&y])),f.box(f.types.tfdt,new Uint8Array([1,0,0,0,L>>24,L>>16&255,L>>8&255,255&L,T>>24,T>>16&255,T>>8&255,255&T])),f.trun(v,g.length+16+20+8+16+8+8),g)},f.trak=function(v){return v.duration=v.duration||4294967295,f.box(f.types.trak,f.tkhd(v),f.mdia(v))},f.trex=function(v){var l=v.id;return f.box(f.types.trex,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},f.trun=function(v,l){var g,y,L,T,x,N,W=v.samples||[],G=W.length,$=12+16*G,te=new Uint8Array($);for(l+=8+$,te.set([0,0,15,1,G>>>24&255,G>>>16&255,G>>>8&255,255&G,l>>>24&255,l>>>16&255,l>>>8&255,255&l],0),g=0;g<G;g++)L=(y=W[g]).duration,T=y.size,x=y.flags,N=y.cts,te.set([L>>>24&255,L>>>16&255,L>>>8&255,255&L,T>>>24&255,T>>>16&255,T>>>8&255,255&T,x.isLeading<<2|x.dependsOn,x.isDependedOn<<6|x.hasRedundancy<<4|x.paddingValue<<1|x.isNonSync,61440&x.degradPrio,15&x.degradPrio,N>>>24&255,N>>>16&255,N>>>8&255,255&N],12+16*g);return f.box(f.types.trun,te)},f.initSegment=function(v){f.types||f.init();var l=f.moov(v),g=new Uint8Array(f.FTYP.byteLength+l.byteLength);return g.set(f.FTYP),g.set(l,f.FTYP.byteLength),g},f}();Je.types=void 0,Je.HDLR_TYPES=void 0,Je.STTS=void 0,Je.STSC=void 0,Je.STCO=void 0,Je.STSZ=void 0,Je.VMHD=void 0,Je.SMHD=void 0,Je.STSD=void 0,Je.FTYP=void 0,Je.DINF=void 0;var bt=Je,gt=S(4);function Mr(f,v,l,g){l===void 0&&(l=1),g===void 0&&(g=!1);var y=f*v*l;return g?Math.round(y):y}function Et(f,v){return v===void 0&&(v=!1),Mr(f,1e3,1/9e4,v)}function Me(){return(Me=Object.assign||function(f){for(var v=1;v<arguments.length;v++){var l=arguments[v];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(f[g]=l[g])}return f}).apply(this,arguments)}var Tt=null,wt=null,Zt=!1,er=function(){function f(l,g,y,L){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=l,this.config=g,this.typeSupported=y,this.ISGenerated=!1,Tt===null){var T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Tt=T?parseInt(T[1]):0}if(wt===null){var x=navigator.userAgent.match(/Safari\/(\d+)/i);wt=x?parseInt(x[1]):0}Zt=!!Tt&&Tt<75||!!wt&&wt<600}var v=f.prototype;return v.destroy=function(){},v.resetTimeStamp=function(l){M.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=l},v.resetNextTimestamp=function(){M.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},v.resetInitSegment=function(){M.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},v.getVideoStartPts=function(l){var g=!1,y=l.reduce(function(L,T){var x=T.pts-L;return x<-4294967296?(g=!0,Ze(L,T.pts)):x>0?L:T.pts},l[0].pts);return g&&M.b.debug("PTS rollover detected"),y},v.remux=function(l,g,y,L,T,x,N,W){var G,$,te,re,ie,ve,me=T,ce=T,Re=l.pid>-1,De=g.pid>-1,xe=g.samples.length,_e=l.samples.length>0,ye=xe>1;if((!Re||_e)&&(!De||ye)||this.ISGenerated||N){this.ISGenerated||(te=this.generateIS(l,g,T));var be=this.isVideoContiguous,we=-1;if(ye&&(we=function(ze){for(var Be=0;Be<ze.length;Be++)if(ze[Be].key)return Be;return-1}(g.samples),!be&&this.config.forceKeyFrameOnDiscontinuity))if(ve=!0,we>0){M.b.warn("[mp4-remuxer]: Dropped "+we+" out of "+xe+" video samples due to a missing keyframe");var Ce=this.getVideoStartPts(g.samples);g.samples=g.samples.slice(we),g.dropped+=we,ce+=(g.samples[0].pts-Ce)/(g.timescale||9e4)}else we===-1&&(M.b.warn("[mp4-remuxer]: No keyframe found out of "+xe+" video samples"),ve=!1);if(this.ISGenerated){if(_e&&ye){var Ie=this.getVideoStartPts(g.samples),Ye=(Ze(l.samples[0].pts,Ie)-Ie)/g.inputTimeScale;me+=Math.max(0,Ye),ce+=Math.max(0,-Ye)}if(_e){if(l.samplerate||(M.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),te=this.generateIS(l,g,T)),$=this.remuxAudio(l,me,this.isAudioContiguous,x,De||ye||W===gt.b.AUDIO?ce:void 0),ye){var et=$?$.endPTS-$.startPTS:0;g.inputTimeScale||(M.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),te=this.generateIS(l,g,T)),G=this.remuxVideo(g,ce,be,et)}}else ye&&(G=this.remuxVideo(g,ce,be,0));G&&(G.firstKeyFrame=we,G.independent=we!==-1)}}return this.ISGenerated&&(y.samples.length&&(ie=this.remuxID3(y,T)),L.samples.length&&(re=this.remuxText(L,T))),{audio:$,video:G,initSegment:te,independent:ve,text:re,id3:ie}},v.generateIS=function(l,g,y){var L,T,x,N=l.samples,W=g.samples,G=this.typeSupported,$={},te=!Object(K.a)(this._initPTS),re="audio/mp4";if(te&&(L=T=1/0),l.config&&N.length&&(l.timescale=l.samplerate,l.isAAC||(G.mpeg?(re="audio/mpeg",l.codec=""):G.mp3&&(l.codec="mp3")),$.audio={id:"audio",container:re,codec:l.codec,initSegment:!l.isAAC&&G.mpeg?new Uint8Array(0):bt.initSegment([l]),metadata:{channelCount:l.channelCount}},te&&(x=l.inputTimeScale,L=T=N[0].pts-Math.round(x*y))),g.sps&&g.pps&&W.length&&(g.timescale=g.inputTimeScale,$.video={id:"main",container:"video/mp4",codec:g.codec,initSegment:bt.initSegment([g]),metadata:{width:g.width,height:g.height}},te)){x=g.inputTimeScale;var ie=this.getVideoStartPts(W),ve=Math.round(x*y);T=Math.min(T,Ze(W[0].dts,ie)-ve),L=Math.min(L,ie-ve)}if(Object.keys($).length)return this.ISGenerated=!0,te&&(this._initPTS=L,this._initDTS=T),{tracks:$,initPTS:L,timescale:x}},v.remuxVideo=function(l,g,y,L){var T,x,N,W=l.inputTimeScale,G=l.samples,$=[],te=G.length,re=this._initPTS,ie=this.nextAvcDts,ve=8,me=Number.POSITIVE_INFINITY,ce=Number.NEGATIVE_INFINITY,Re=0,De=!1;y&&ie!==null||(ie=g*W-(G[0].pts-Ze(G[0].dts,G[0].pts)));for(var xe=0;xe<te;xe++){var _e=G[xe];_e.pts=Ze(_e.pts-re,ie),_e.dts=Ze(_e.dts-re,ie),_e.dts>_e.pts&&(Re=Math.max(Math.min(Re,_e.pts-_e.dts),-18e3)),_e.dts<G[xe>0?xe-1:xe].dts&&(De=!0)}De&&G.sort(function(ar,sr){var Dr=ar.dts-sr.dts,p=ar.pts-sr.pts;return Dr||p}),x=G[0].dts,N=G[G.length-1].dts;var ye=Math.round((N-x)/(te-1));if(Re<0){if(Re<-2*ye){M.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Et(-ye,!0)+" ms");for(var be=Re,we=0;we<te;we++)G[we].dts=be=Math.max(be,G[we].pts-ye),G[we].pts=Math.max(be,G[we].pts)}else{M.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Et(Re,!0)+" ms to overcome this issue");for(var Ce=0;Ce<te;Ce++)G[Ce].dts=G[Ce].dts+Re}x=G[0].dts}if(y){var Ie=x-ie,Ye=Ie>ye;if(Ye||Ie<-1){Ye?M.b.warn("AVC: "+Et(Ie,!0)+" ms ("+Ie+"dts) hole between fragments detected, filling it"):M.b.warn("AVC: "+Et(-Ie,!0)+" ms ("+Ie+"dts) overlapping between fragments detected"),x=ie;var et=G[0].pts-Ie;G[0].dts=x,G[0].pts=et,M.b.log("Video: First PTS/DTS adjusted: "+Et(et,!0)+"/"+Et(x,!0)+", delta: "+Et(Ie,!0)+" ms")}}Zt&&(x=Math.max(0,x));for(var ze=0,Be=0,Xe=0;Xe<te;Xe++){for(var Oe=G[Xe],$e=Oe.units,Pt=$e.length,dt=0,Ft=0;Ft<Pt;Ft++)dt+=$e[Ft].data.length;Be+=dt,ze+=Pt,Oe.length=dt,Oe.dts=Math.max(Oe.dts,x),Oe.pts=Math.max(Oe.pts,Oe.dts,0),me=Math.min(Oe.pts,me),ce=Math.max(Oe.pts,ce)}N=G[te-1].dts;var ht,St=Be+4*ze+8;try{ht=new Uint8Array(St)}catch{return void this.observer.emit(O.a.ERROR,O.a.ERROR,{type:E.b.MUX_ERROR,details:E.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:St,reason:"fail allocating video mdat "+St})}var pt=new DataView(ht.buffer);pt.setUint32(0,St),ht.set(bt.types.mdat,4);for(var tt=0;tt<te;tt++){for(var rt=G[tt],Lt=rt.units,Mt=0,At=0,jt=Lt.length;At<jt;At++){var Kt=Lt[At],mt=Kt.data,ir=Kt.data.byteLength;pt.setUint32(ve,ir),ve+=4,ht.set(mt,ve),ve+=ir,Mt+=4+ir}if(tt<te-1)T=G[tt+1].dts-rt.dts;else{var nr=this.config,Ht=rt.dts-G[tt>0?tt-1:tt].dts;if(nr.stretchShortVideoTrack&&this.nextAudioPts!==null){var Lr=Math.floor(nr.maxBufferHole*W),Vt=(L?me+L*W:this.nextAudioPts)-rt.pts;Vt>Lr?((T=Vt-Ht)<0&&(T=Ht),M.b.log("[mp4-remuxer]: It is approximately "+Vt/90+" ms to the next segment; using duration "+T/90+" ms for the last video frame.")):T=Ht}else T=Ht}var Ar=Math.round(rt.pts-rt.dts);$.push(new tr(rt.key,T,Mt,Ar))}if($.length&&Tt&&Tt<70){var Rr=$[0].flags;Rr.dependsOn=2,Rr.isNonSync=0}this.nextAvcDts=ie=N+T,this.isVideoContiguous=!0;var jr={data1:bt.moof(l.sequenceNumber++,x,Me({},l,{samples:$})),data2:ht,startPTS:me/W,endPTS:(ce+T)/W,startDTS:x/W,endDTS:ie/W,type:"video",hasAudio:!1,hasVideo:!0,nb:$.length,dropped:l.dropped};return l.samples=[],l.dropped=0,jr},v.remuxAudio=function(l,g,y,L,T){var x=l.inputTimeScale,N=x/(l.samplerate?l.samplerate:x),W=l.isAAC?1024:1152,G=W*N,$=this._initPTS,te=!l.isAAC&&this.typeSupported.mpeg,re=[],ie=l.samples,ve=te?0:8,me=this.nextAudioPts||-1,ce=g*x;if(this.isAudioContiguous=y=y||ie.length&&me>0&&(L&&Math.abs(ce-me)<9e3||Math.abs(Ze(ie[0].pts-$,ce)-me)<20*G),ie.forEach(function(mt){mt.pts=Ze(mt.pts-$,ce)}),!y||me<0){if(!(ie=ie.filter(function(mt){return mt.pts>=0})).length)return;me=T===0?0:L?Math.max(0,ce):ie[0].pts}if(l.isAAC)for(var Re=T!==void 0,De=this.config.maxAudioFramesDrift,xe=0,_e=me;xe<ie.length;xe++){var ye=ie[xe],be=ye.pts,we=be-_e,Ce=Math.abs(1e3*we/x);if(we<=-De*G&&Re)xe===0&&(M.b.warn("Audio frame @ "+(be/x).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*we/x)+" ms."),this.nextAudioPts=me=_e=be);else if(we>=De*G&&Ce<1e4&&Re){var Ie=Math.round(we/G);(_e=be-Ie*G)<0&&(Ie--,_e+=G),xe===0&&(this.nextAudioPts=me=_e),M.b.warn("[mp4-remuxer]: Injecting "+Ie+" audio frame @ "+(_e/x).toFixed(3)+"s due to "+Math.round(1e3*we/x)+" ms gap.");for(var Ye=0;Ye<Ie;Ye++){var et=Math.max(_e,0),ze=yr.getSilentFrame(l.manifestCodec||l.codec,l.channelCount);ze||(M.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ze=ye.unit.subarray()),ie.splice(xe,0,{unit:ze,pts:et}),_e+=G,xe++}}ye.pts=_e,_e+=G}for(var Be,Xe=null,Oe=null,$e=0,Pt=ie.length;Pt--;)$e+=ie[Pt].unit.byteLength;for(var dt=0,Ft=ie.length;dt<Ft;dt++){var ht=ie[dt],St=ht.unit,pt=ht.pts;if(Oe!==null)re[dt-1].duration=Math.round((pt-Oe)/N);else{if(y&&l.isAAC&&(pt=me),Xe=pt,!($e>0))return;$e+=ve;try{Be=new Uint8Array($e)}catch{return void this.observer.emit(O.a.ERROR,O.a.ERROR,{type:E.b.MUX_ERROR,details:E.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:$e,reason:"fail allocating audio mdat "+$e})}te||(new DataView(Be.buffer).setUint32(0,$e),Be.set(bt.types.mdat,4))}Be.set(St,ve);var tt=St.byteLength;ve+=tt,re.push(new tr(!0,W,tt,0)),Oe=pt}var rt=re.length;if(rt){var Lt=re[re.length-1];this.nextAudioPts=me=Oe+N*Lt.duration;var Mt=te?new Uint8Array(0):bt.moof(l.sequenceNumber++,Xe/N,Me({},l,{samples:re}));l.samples=[];var At=Xe/x,jt=me/x,Kt={data1:Mt,data2:Be,startPTS:At,endPTS:jt,startDTS:At,endDTS:jt,type:"audio",hasAudio:!0,hasVideo:!1,nb:rt};return this.isAudioContiguous=!0,Kt}},v.remuxEmptyAudio=function(l,g,y,L){var T=l.inputTimeScale,x=T/(l.samplerate?l.samplerate:T),N=this.nextAudioPts,W=(N!==null?N:L.startDTS*T)+this._initDTS,G=L.endDTS*T+this._initDTS,$=1024*x,te=Math.ceil((G-W)/$),re=yr.getSilentFrame(l.manifestCodec||l.codec,l.channelCount);if(M.b.warn("[mp4-remuxer]: remux empty Audio"),re){for(var ie=[],ve=0;ve<te;ve++){var me=W+ve*$;ie.push({unit:re,pts:me,dts:me})}return l.samples=ie,this.remuxAudio(l,g,y,!1)}M.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},v.remuxID3=function(l,g){var y=l.samples.length;if(y){for(var L=l.inputTimeScale,T=this._initPTS,x=this._initDTS,N=0;N<y;N++){var W=l.samples[N];W.pts=Ze(W.pts-T,g*L)/L,W.dts=Ze(W.dts-x,g*L)/L}var G=l.samples;return l.samples=[],{samples:G}}},v.remuxText=function(l,g){var y=l.samples.length;if(y){for(var L=l.inputTimeScale,T=this._initPTS,x=0;x<y;x++){var N=l.samples[x];N.pts=Ze(N.pts-T,g*L)/L}l.samples.sort(function(G,$){return G.pts-$.pts});var W=l.samples;return l.samples=[],{samples:W}}},f}();function Ze(f,v){var l;if(v===null)return f;for(l=v<f?-8589934592:8589934592;Math.abs(f-v)>4294967296;)f+=l;return f}var tr=function(f,v,l,g){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=v,this.size=l,this.cts=g,this.flags=new Nr(f)},Nr=function(f){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=f?2:1,this.isNonSync=f?0:1},Gt=S(5),br=function(){function f(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var v=f.prototype;return v.destroy=function(){},v.resetTimeStamp=function(l){this.initPTS=l,this.lastEndDTS=null},v.resetNextTimestamp=function(){this.lastEndDTS=null},v.resetInitSegment=function(l,g,y){this.audioCodec=g,this.videoCodec=y,this.generateInitSegment(l),this.emitInitSegment=!0},v.generateInitSegment=function(l){var g=this.audioCodec,y=this.videoCodec;if(!l||!l.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var L=this.initData=Object(X.f)(l);g||(g=Ct(L.audio,Gt.a.AUDIO)),y||(y=Ct(L.video,Gt.a.VIDEO));var T={};L.audio&&L.video?T.audiovideo={container:"video/mp4",codec:g+","+y,initSegment:l,id:"main"}:L.audio?T.audio={container:"audio/mp4",codec:g,initSegment:l,id:"audio"}:L.video?T.video={container:"video/mp4",codec:y,initSegment:l,id:"main"}:M.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=T},v.remux=function(l,g,y,L,T){var x=this.initPTS,N=this.lastEndDTS,W={audio:void 0,video:void 0,text:L,id3:y,initSegment:void 0};Object(K.a)(N)||(N=this.lastEndDTS=T||0);var G=g.samples;if(!G||!G.length)return W;var $={initPTS:void 0,timescale:1},te=this.initData;if(te&&te.length||(this.generateInitSegment(G),te=this.initData),!te||!te.length)return M.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),W;this.emitInitSegment&&($.tracks=this.initTracks,this.emitInitSegment=!1),Object(K.a)(x)||(this.initPTS=$.initPTS=x=Br(te,G,N));var re=Object(X.c)(G,te),ie=N,ve=re+ie;Object(X.e)(te,G,x),re>0?this.lastEndDTS=ve:(M.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var me=!!te.audio,ce=!!te.video,Re="";me&&(Re+="audio"),ce&&(Re+="video");var De={data1:G,startPTS:ie,startDTS:ie,endPTS:ve,endDTS:ve,type:Re,hasAudio:me,hasVideo:ce,nb:1,dropped:0};return W.audio=De.type==="audio"?De:void 0,W.video=De.type!=="audio"?De:void 0,W.text=L,W.id3=y,W.initSegment=$,W},f}(),Br=function(f,v,l){return Object(X.d)(f,v)-l};function Ct(f,v){var l=f?.codec;return l&&l.length>4?l:l==="hvc1"?"hvc1.1.c.L120.90":l==="av01"?"av01.0.04M.08":l==="avc1"||v===Gt.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var lt,rr=br,Ur=S(16);try{lt=self.performance.now.bind(self.performance)}catch{M.b.debug("Unable to use Performance API on this environment"),lt=self.Date.now}var Ot=[{demux:pr,remux:er},{demux:de,remux:rr},{demux:ue,remux:er},{demux:je,remux:er}],ut=1024;Ot.forEach(function(f){var v=f.demux;ut=Math.max(ut,v.minProbeByteLength)});var Gr=function(){function f(l,g,y,L,T){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new Ur.a,this.observer=l,this.typeSupported=g,this.config=y,this.vendor=L,this.id=T}var v=f.prototype;return v.configure=function(l){this.transmuxConfig=l,this.decrypter&&this.decrypter.reset()},v.push=function(l,g,y,L){var T=this,x=y.transmuxing;x.executeStart=lt();var N=new Uint8Array(l),W=this.cache,G=this.config,$=this.currentTransmuxState,te=this.transmuxConfig;L&&(this.currentTransmuxState=L);var re=function(Xe,Oe){var $e=null;return Xe.byteLength>0&&Oe!=null&&Oe.key!=null&&Oe.iv!==null&&Oe.method!=null&&($e=Oe),$e}(N,g);if(re&&re.method==="AES-128"){var ie=this.getDecrypter();if(!G.enableSoftwareAES)return this.decryptionPromise=ie.webCryptoDecrypt(N,re.key.buffer,re.iv.buffer).then(function(Xe){var Oe=T.push(Xe,null,y);return T.decryptionPromise=null,Oe}),this.decryptionPromise;var ve=ie.softwareDecrypt(N,re.key.buffer,re.iv.buffer);if(!ve)return x.executeEnd=lt(),Er(y);N=new Uint8Array(ve)}var me=L||$,ce=me.contiguous,Re=me.discontinuity,De=me.trackSwitch,xe=me.accurateTimeOffset,_e=me.timeOffset,ye=me.initSegmentChange,be=te.audioCodec,we=te.videoCodec,Ce=te.defaultInitPts,Ie=te.duration,Ye=te.initSegmentData;if((Re||De||ye)&&this.resetInitSegment(Ye,be,we,Ie),(Re||ye)&&this.resetInitialTimestamp(Ce),ce||this.resetContiguity(),this.needsProbing(N,Re,De)){if(W.dataLength){var et=W.flush();N=Object(X.a)(et,N)}this.configureTransmuxer(N,te)}var ze=this.transmux(N,re,_e,xe,y),Be=this.currentTransmuxState;return Be.contiguous=!0,Be.discontinuity=!1,Be.trackSwitch=!1,x.executeEnd=lt(),ze},v.flush=function(l){var g=this,y=l.transmuxing;y.executeStart=lt();var L=this.decrypter,T=this.cache,x=this.currentTransmuxState,N=this.decryptionPromise;if(N)return N.then(function(){return g.flush(l)});var W=[],G=x.timeOffset;if(L){var $=L.flush();$&&W.push(this.push($,null,l))}var te=T.dataLength;T.reset();var re=this.demuxer,ie=this.remuxer;if(!re||!ie)return te>=ut&&this.observer.emit(O.a.ERROR,O.a.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),y.executeEnd=lt(),[Er(l)];var ve=re.flush(G);return Tr(ve)?ve.then(function(me){return g.flushRemux(W,me,l),W}):(this.flushRemux(W,ve,l),W)},v.flushRemux=function(l,g,y){var L=g.audioTrack,T=g.avcTrack,x=g.id3Track,N=g.textTrack,W=this.currentTransmuxState,G=W.accurateTimeOffset,$=W.timeOffset;M.b.log("[transmuxer.ts]: Flushed fragment "+y.sn+(y.part>-1?" p: "+y.part:"")+" of level "+y.level);var te=this.remuxer.remux(L,T,x,N,$,G,!0,this.id);l.push({remuxResult:te,chunkMeta:y}),y.transmuxing.executeEnd=lt()},v.resetInitialTimestamp=function(l){var g=this.demuxer,y=this.remuxer;g&&y&&(g.resetTimeStamp(l),y.resetTimeStamp(l))},v.resetContiguity=function(){var l=this.demuxer,g=this.remuxer;l&&g&&(l.resetContiguity(),g.resetNextTimestamp())},v.resetInitSegment=function(l,g,y,L){var T=this.demuxer,x=this.remuxer;T&&x&&(T.resetInitSegment(g,y,L),x.resetInitSegment(l,g,y))},v.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},v.transmux=function(l,g,y,L,T){return g&&g.method==="SAMPLE-AES"?this.transmuxSampleAes(l,g,y,L,T):this.transmuxUnencrypted(l,y,L,T)},v.transmuxUnencrypted=function(l,g,y,L){var T=this.demuxer.demux(l,g,!1,!this.config.progressive),x=T.audioTrack,N=T.avcTrack,W=T.id3Track,G=T.textTrack;return{remuxResult:this.remuxer.remux(x,N,W,G,g,y,!1,this.id),chunkMeta:L}},v.transmuxSampleAes=function(l,g,y,L,T){var x=this;return this.demuxer.demuxSampleAes(l,g,y).then(function(N){return{remuxResult:x.remuxer.remux(N.audioTrack,N.avcTrack,N.id3Track,N.textTrack,y,L,!1,x.id),chunkMeta:T}})},v.configureTransmuxer=function(l,g){for(var y,L=this.config,T=this.observer,x=this.typeSupported,N=this.vendor,W=g.audioCodec,G=g.defaultInitPts,$=g.duration,te=g.initSegmentData,re=g.videoCodec,ie=0,ve=Ot.length;ie<ve;ie++)if(Ot[ie].demux.probe(l)){y=Ot[ie];break}y||(M.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),y={demux:de,remux:rr});var me=this.demuxer,ce=this.remuxer,Re=y.remux,De=y.demux;ce&&ce instanceof Re||(this.remuxer=new Re(T,L,x,N)),me&&me instanceof De||(this.demuxer=new De(T,L,x),this.probe=De.probe),this.resetInitSegment(te,W,re,$),this.resetInitialTimestamp(G)},v.needsProbing=function(l,g,y){return!this.demuxer||!this.remuxer||g||y},v.getDecrypter=function(){var l=this.decrypter;return l||(l=this.decrypter=new c.a(this.observer,this.config)),l},f}(),Er=function(f){return{remuxResult:{},chunkMeta:f}};function Tr(f){return"then"in f&&f.then instanceof Function}var Sr=function(f,v,l,g,y){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=f,this.videoCodec=v,this.initSegmentData=l,this.duration=g,this.defaultInitPts=y},It=function(f,v,l,g,y,L){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=f,this.contiguous=v,this.accurateTimeOffset=l,this.trackSwitch=g,this.timeOffset=y,this.initSegmentChange=L}},function(D,w){D.exports=void 0},function(D,w,S){var O,E,c,K,I;O=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,E=/^([^\/?#]*)([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,K=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,I={buildAbsoluteURL:function(X,q,V){if(V=V||{},X=X.trim(),!(q=q.trim())){if(!V.alwaysNormalize)return X;var H=I.parseURL(X);if(!H)throw new Error("Error trying to parse base URL.");return H.path=I.normalizePath(H.path),I.buildURLFromParts(H)}var U=I.parseURL(q);if(!U)throw new Error("Error trying to parse relative URL.");if(U.scheme)return V.alwaysNormalize?(U.path=I.normalizePath(U.path),I.buildURLFromParts(U)):q;var M=I.parseURL(X);if(!M)throw new Error("Error trying to parse base URL.");if(!M.netLoc&&M.path&&M.path[0]!=="/"){var ae=E.exec(M.path);M.netLoc=ae[1],M.path=ae[2]}M.netLoc&&!M.path&&(M.path="/");var Y={scheme:M.scheme,netLoc:U.netLoc,path:null,params:U.params,query:U.query,fragment:U.fragment};if(!U.netLoc&&(Y.netLoc=M.netLoc,U.path[0]!=="/"))if(U.path){var J=M.path,z=J.substring(0,J.lastIndexOf("/")+1)+U.path;Y.path=I.normalizePath(z)}else Y.path=M.path,U.params||(Y.params=M.params,U.query||(Y.query=M.query));return Y.path===null&&(Y.path=V.alwaysNormalize?I.normalizePath(U.path):U.path),I.buildURLFromParts(Y)},parseURL:function(X){var q=O.exec(X);return q?{scheme:q[1]||"",netLoc:q[2]||"",path:q[3]||"",params:q[4]||"",query:q[5]||"",fragment:q[6]||""}:null},normalizePath:function(X){for(X=X.split("").reverse().join("").replace(c,"");X.length!==(X=X.replace(K,"")).length;);return X.split("").reverse().join("")},buildURLFromParts:function(X){return X.scheme+X.netLoc+X.path+X.params+X.query+X.fragment}},D.exports=I},function(D,w,S){S.d(w,"a",function(){return O});var O=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(D,w,S){var O=Object.prototype.hasOwnProperty,E="~";function c(){}function K(V,H,U){this.fn=V,this.context=H,this.once=U||!1}function I(V,H,U,M,ae){if(typeof U!="function")throw new TypeError("The listener must be a function");var Y=new K(U,M||V,ae),J=E?E+H:H;return V._events[J]?V._events[J].fn?V._events[J]=[V._events[J],Y]:V._events[J].push(Y):(V._events[J]=Y,V._eventsCount++),V}function X(V,H){--V._eventsCount==0?V._events=new c:delete V._events[H]}function q(){this._events=new c,this._eventsCount=0}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(E=!1)),q.prototype.eventNames=function(){var V,H,U=[];if(this._eventsCount===0)return U;for(H in V=this._events)O.call(V,H)&&U.push(E?H.slice(1):H);return Object.getOwnPropertySymbols?U.concat(Object.getOwnPropertySymbols(V)):U},q.prototype.listeners=function(V){var H=E?E+V:V,U=this._events[H];if(!U)return[];if(U.fn)return[U.fn];for(var M=0,ae=U.length,Y=new Array(ae);M<ae;M++)Y[M]=U[M].fn;return Y},q.prototype.listenerCount=function(V){var H=E?E+V:V,U=this._events[H];return U?U.fn?1:U.length:0},q.prototype.emit=function(V,H,U,M,ae,Y){var J=E?E+V:V;if(!this._events[J])return!1;var z,Q,P=this._events[J],k=arguments.length;if(P.fn){switch(P.once&&this.removeListener(V,P.fn,void 0,!0),k){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,H),!0;case 3:return P.fn.call(P.context,H,U),!0;case 4:return P.fn.call(P.context,H,U,M),!0;case 5:return P.fn.call(P.context,H,U,M,ae),!0;case 6:return P.fn.call(P.context,H,U,M,ae,Y),!0}for(Q=1,z=new Array(k-1);Q<k;Q++)z[Q-1]=arguments[Q];P.fn.apply(P.context,z)}else{var C,Z=P.length;for(Q=0;Q<Z;Q++)switch(P[Q].once&&this.removeListener(V,P[Q].fn,void 0,!0),k){case 1:P[Q].fn.call(P[Q].context);break;case 2:P[Q].fn.call(P[Q].context,H);break;case 3:P[Q].fn.call(P[Q].context,H,U);break;case 4:P[Q].fn.call(P[Q].context,H,U,M);break;default:if(!z)for(C=1,z=new Array(k-1);C<k;C++)z[C-1]=arguments[C];P[Q].fn.apply(P[Q].context,z)}}return!0},q.prototype.on=function(V,H,U){return I(this,V,H,U,!1)},q.prototype.once=function(V,H,U){return I(this,V,H,U,!0)},q.prototype.removeListener=function(V,H,U,M){var ae=E?E+V:V;if(!this._events[ae])return this;if(!H)return X(this,ae),this;var Y=this._events[ae];if(Y.fn)Y.fn!==H||M&&!Y.once||U&&Y.context!==U||X(this,ae);else{for(var J=0,z=[],Q=Y.length;J<Q;J++)(Y[J].fn!==H||M&&!Y[J].once||U&&Y[J].context!==U)&&z.push(Y[J]);z.length?this._events[ae]=z.length===1?z[0]:z:X(this,ae)}return this},q.prototype.removeAllListeners=function(V){var H;return V?(H=E?E+V:V,this._events[H]&&X(this,H)):(this._events=new c,this._eventsCount=0),this},q.prototype.off=q.prototype.removeListener,q.prototype.addListener=q.prototype.on,q.prefixed=E,q.EventEmitter=q,D.exports=q},function(D,w,S){S.d(w,"a",function(){return q});var O=function(){function V(H,U){this.subtle=void 0,this.aesIV=void 0,this.subtle=H,this.aesIV=U}return V.prototype.decrypt=function(H,U){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},U,H)},V}(),E=function(){function V(H,U){this.subtle=void 0,this.key=void 0,this.subtle=H,this.key=U}return V.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},V}(),c=S(8),K=function(){function V(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var H=V.prototype;return H.uint8ArrayToUint32Array_=function(U){for(var M=new DataView(U),ae=new Uint32Array(4),Y=0;Y<4;Y++)ae[Y]=M.getUint32(4*Y);return ae},H.initTable=function(){var U=this.sBox,M=this.invSBox,ae=this.subMix,Y=ae[0],J=ae[1],z=ae[2],Q=ae[3],P=this.invSubMix,k=P[0],C=P[1],Z=P[2],ne=P[3],ue=new Uint32Array(256),fe=0,de=0,ee=0;for(ee=0;ee<256;ee++)ue[ee]=ee<128?ee<<1:ee<<1^283;for(ee=0;ee<256;ee++){var Ee=de^de<<1^de<<2^de<<3^de<<4;Ee=Ee>>>8^255&Ee^99,U[fe]=Ee,M[Ee]=fe;var Le=ue[fe],Se=ue[Le],Ae=ue[Se],ke=257*ue[Ee]^16843008*Ee;Y[fe]=ke<<24|ke>>>8,J[fe]=ke<<16|ke>>>16,z[fe]=ke<<8|ke>>>24,Q[fe]=ke,ke=16843009*Ae^65537*Se^257*Le^16843008*fe,k[Ee]=ke<<24|ke>>>8,C[Ee]=ke<<16|ke>>>16,Z[Ee]=ke<<8|ke>>>24,ne[Ee]=ke,fe?(fe=Le^ue[ue[ue[Ae^Le]]],de^=ue[ue[de]]):fe=de=1}},H.expandKey=function(U){for(var M=this.uint8ArrayToUint32Array_(U),ae=!0,Y=0;Y<M.length&&ae;)ae=M[Y]===this.key[Y],Y++;if(!ae){this.key=M;var J=this.keySize=M.length;if(J!==4&&J!==6&&J!==8)throw new Error("Invalid aes key size="+J);var z,Q,P,k,C=this.ksRows=4*(J+6+1),Z=this.keySchedule=new Uint32Array(C),ne=this.invKeySchedule=new Uint32Array(C),ue=this.sBox,fe=this.rcon,de=this.invSubMix,ee=de[0],Ee=de[1],Le=de[2],Se=de[3];for(z=0;z<C;z++)z<J?P=Z[z]=M[z]:(k=P,z%J==0?(k=ue[(k=k<<8|k>>>24)>>>24]<<24|ue[k>>>16&255]<<16|ue[k>>>8&255]<<8|ue[255&k],k^=fe[z/J|0]<<24):J>6&&z%J==4&&(k=ue[k>>>24]<<24|ue[k>>>16&255]<<16|ue[k>>>8&255]<<8|ue[255&k]),Z[z]=P=(Z[z-J]^k)>>>0);for(Q=0;Q<C;Q++)z=C-Q,k=3&Q?Z[z]:Z[z-4],ne[Q]=Q<4||z<=4?k:ee[ue[k>>>24]]^Ee[ue[k>>>16&255]]^Le[ue[k>>>8&255]]^Se[ue[255&k]],ne[Q]=ne[Q]>>>0}},H.networkToHostOrderSwap=function(U){return U<<24|(65280&U)<<8|(16711680&U)>>8|U>>>24},H.decrypt=function(U,M,ae){for(var Y,J,z,Q,P,k,C,Z,ne,ue,fe,de,ee,Ee,Le=this.keySize+6,Se=this.invKeySchedule,Ae=this.invSBox,ke=this.invSubMix,Ne=ke[0],Ge=ke[1],Fe=ke[2],Ue=ke[3],Ke=this.uint8ArrayToUint32Array_(ae),Ut=Ke[0],kt=Ke[1],xt=Ke[2],ct=Ke[3],st=new Int32Array(U),ot=new Int32Array(st.length),We=this.networkToHostOrderSwap;M<st.length;){for(ne=We(st[M]),ue=We(st[M+1]),fe=We(st[M+2]),de=We(st[M+3]),P=ne^Se[0],k=de^Se[1],C=fe^Se[2],Z=ue^Se[3],ee=4,Ee=1;Ee<Le;Ee++)Y=Ne[P>>>24]^Ge[k>>16&255]^Fe[C>>8&255]^Ue[255&Z]^Se[ee],J=Ne[k>>>24]^Ge[C>>16&255]^Fe[Z>>8&255]^Ue[255&P]^Se[ee+1],z=Ne[C>>>24]^Ge[Z>>16&255]^Fe[P>>8&255]^Ue[255&k]^Se[ee+2],Q=Ne[Z>>>24]^Ge[P>>16&255]^Fe[k>>8&255]^Ue[255&C]^Se[ee+3],P=Y,k=J,C=z,Z=Q,ee+=4;Y=Ae[P>>>24]<<24^Ae[k>>16&255]<<16^Ae[C>>8&255]<<8^Ae[255&Z]^Se[ee],J=Ae[k>>>24]<<24^Ae[C>>16&255]<<16^Ae[Z>>8&255]<<8^Ae[255&P]^Se[ee+1],z=Ae[C>>>24]<<24^Ae[Z>>16&255]<<16^Ae[P>>8&255]<<8^Ae[255&k]^Se[ee+2],Q=Ae[Z>>>24]<<24^Ae[P>>16&255]<<16^Ae[k>>8&255]<<8^Ae[255&C]^Se[ee+3],ot[M]=We(Y^Ut),ot[M+1]=We(Q^kt),ot[M+2]=We(z^xt),ot[M+3]=We(J^ct),Ut=ne,kt=ue,xt=fe,ct=de,M+=4}return ot.buffer},V}(),I=S(1),X=S(6),q=function(){function V(U,M,ae){var Y=(ae===void 0?{}:ae).removePKCS7Padding,J=Y===void 0||Y;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=U,this.config=M,this.removePKCS7Padding=J,J)try{var z=self.crypto;z&&(this.subtle=z.subtle||z.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var H=V.prototype;return H.destroy=function(){this.observer=null},H.isSync=function(){return this.config.enableSoftwareAES},H.flush=function(){var U=this.currentResult;if(U){var M,ae,Y,J=new Uint8Array(U);return this.reset(),this.removePKCS7Padding?(ae=(M=J).byteLength,(Y=ae&&new DataView(M.buffer).getUint8(ae-1))?Object(c.a)(M,0,ae-Y):M):J}this.reset()},H.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},H.decrypt=function(U,M,ae,Y){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(U),M,ae);var J=this.flush();J&&Y(J.buffer)}else this.webCryptoDecrypt(new Uint8Array(U),M,ae).then(Y)},H.softwareDecrypt=function(U,M,ae){var Y=this.currentIV,J=this.currentResult,z=this.remainderData;this.logOnce("JS AES decrypt"),z&&(U=Object(X.a)(z,U),this.remainderData=null);var Q=this.getValidChunk(U);if(!Q.length)return null;Y&&(ae=Y);var P=this.softwareDecrypter;P||(P=this.softwareDecrypter=new K),P.expandKey(M);var k=J;return this.currentResult=P.decrypt(Q.buffer,0,ae),this.currentIV=Object(c.a)(Q,-16).buffer,k||null},H.webCryptoDecrypt=function(U,M,ae){var Y=this,J=this.subtle;return this.key===M&&this.fastAesKey||(this.key=M,this.fastAesKey=new E(J,M)),this.fastAesKey.expandKey().then(function(z){return J?new O(J,ae).decrypt(U.buffer,z):Promise.reject(new Error("web crypto not initialized"))}).catch(function(z){return Y.onWebCryptoError(z,U,M,ae)})},H.onWebCryptoError=function(U,M,ae,Y){return I.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",U),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(M,ae,Y)},H.getValidChunk=function(U){var M=U,ae=U.length-U.length%16;return ae!==U.length&&(M=Object(c.a)(U,0,ae),this.remainderData=Object(c.a)(U,ae)),M},H.logOnce=function(U){this.logEnabled&&(I.b.log("[decrypter.ts]: "+U),this.logEnabled=!1)},V}()},function(D,w,S){S.d(w,"a",function(){return c});var O=S(11);function E(K,I){for(var X=0;X<I.length;X++){var q=I[X];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(K,q.key,q)}}var c=function(){function K(q,V){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=V?Object(O.buildAbsoluteURL)(q,V,{alwaysNormalize:!0}):q}var I,X;return K.fromURL=function(q,V){return new K(q,V)},K.fromURI=function(q){return new K(q)},I=K,(X=[{key:"uri",get:function(){return this._uri}}])&&E(I.prototype,X),K}()},function(D,w,S){S.d(w,"a",function(){return O});var O=function(){function E(){this.chunks=[],this.dataLength=0}var c=E.prototype;return c.push=function(K){this.chunks.push(K),this.dataLength+=K.length},c.flush=function(){var K,I=this.chunks,X=this.dataLength;return I.length?(K=I.length===1?I[0]:function(q,V){for(var H=new Uint8Array(V),U=0,M=0;M<q.length;M++){var ae=q[M];H.set(ae,U),U+=ae.length}return H}(I,X),this.reset(),K):new Uint8Array(0)},c.reset=function(){this.chunks.length=0,this.dataLength=0},E}()},function(D,w,S){function O(I){var X={};function q(H){if(X[H])return X[H].exports;var U=X[H]={i:H,l:!1,exports:{}};return I[H].call(U.exports,U,U.exports,q),U.l=!0,U.exports}q.m=I,q.c=X,q.i=function(H){return H},q.d=function(H,U,M){q.o(H,U)||Object.defineProperty(H,U,{configurable:!1,enumerable:!0,get:M})},q.r=function(H){Object.defineProperty(H,"__esModule",{value:!0})},q.n=function(H){var U=H&&H.__esModule?function(){return H.default}:function(){return H};return q.d(U,"a",U),U},q.o=function(H,U){return Object.prototype.hasOwnProperty.call(H,U)},q.p="/",q.oe=function(H){throw console.error(H),H};var V=q(q.s=ENTRY_MODULE);return V.default||V}function E(I){return(I+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(I,X,q){var V={};V[q]=[];var H=X.toString(),U=H.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!U)return V;for(var M,ae=U[1],Y=new RegExp("(\\\\n|\\W)"+E(ae)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");M=Y.exec(H);)M[3]!=="dll-reference"&&V[q].push(M[3]);for(Y=new RegExp("\\("+E(ae)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");M=Y.exec(H);)I[M[2]]||(V[q].push(M[1]),I[M[2]]=S(M[1]).m),V[M[2]]=V[M[2]]||[],V[M[2]].push(M[4]);for(var J,z=Object.keys(V),Q=0;Q<z.length;Q++)for(var P=0;P<V[z[Q]].length;P++)J=V[z[Q]][P],isNaN(1*J)||(V[z[Q]][P]=1*V[z[Q]][P]);return V}function K(I){return Object.keys(I).reduce(function(X,q){return X||I[q].length>0},!1)}D.exports=function(I,X){X=X||{};var q={main:S.m},V=X.all?{main:Object.keys(q.main)}:function(Y,J){for(var z={main:[J]},Q={main:[]},P={main:{}};K(z);)for(var k=Object.keys(z),C=0;C<k.length;C++){var Z=k[C],ne=z[Z].pop();if(P[Z]=P[Z]||{},!P[Z][ne]&&Y[Z][ne]){P[Z][ne]=!0,Q[Z]=Q[Z]||[],Q[Z].push(ne);for(var ue=c(Y,Y[Z][ne],Z),fe=Object.keys(ue),de=0;de<fe.length;de++)z[fe[de]]=z[fe[de]]||[],z[fe[de]]=z[fe[de]].concat(ue[fe[de]])}}return Q}(q,I),H="";Object.keys(V).filter(function(Y){return Y!=="main"}).forEach(function(Y){for(var J=0;V[Y][J];)J++;V[Y].push(J),q[Y][J]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",H=H+"var "+Y+" = ("+O.toString().replace("ENTRY_MODULE",JSON.stringify(J))+")({"+V[Y].map(function(z){return JSON.stringify(z)+": "+q[Y][z].toString()}).join(",")+`});
`}),H=H+"new (("+O.toString().replace("ENTRY_MODULE",JSON.stringify(I))+")({"+V.main.map(function(Y){return JSON.stringify(Y)+": "+q.main[Y].toString()}).join(",")+"}))(self);";var U=new window.Blob([H],{type:"text/javascript"});if(X.bare)return U;var M=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(U),ae=new window.Worker(M);return ae.objectURL=M,ae}},function(D,w,S){S.r(w),S.d(w,"default",function(){return I});var O=S(9),E=S(0),c=S(1),K=S(13);function I(H){var U=new K.EventEmitter,M=function(ae,Y){H.postMessage({event:ae,data:Y})};U.on(E.a.FRAG_DECRYPTED,M),U.on(E.a.ERROR,M),H.addEventListener("message",function(ae){var Y=ae.data;switch(Y.cmd){case"init":var J=JSON.parse(Y.config);H.transmuxer=new O.c(U,Y.typeSupported,J,Y.vendor,Y.id),Object(c.a)(J.debug),M("init",null);break;case"configure":H.transmuxer.configure(Y.config);break;case"demux":var z=H.transmuxer.push(Y.data,Y.decryptdata,Y.chunkMeta,Y.state);Object(O.d)(z)?z.then(function(k){X(H,k)}):X(H,z);break;case"flush":var Q=Y.chunkMeta,P=H.transmuxer.flush(Q);Object(O.d)(P)?P.then(function(k){V(H,k,Q)}):V(H,P,Q)}})}function X(H,U){if((M=U.remuxResult).audio||M.video||M.text||M.id3||M.initSegment){var M,ae=[],Y=U.remuxResult,J=Y.audio,z=Y.video;J&&q(ae,J),z&&q(ae,z),H.postMessage({event:"transmuxComplete",data:U},ae)}}function q(H,U){U.data1&&H.push(U.data1.buffer),U.data2&&H.push(U.data2.buffer)}function V(H,U,M){U.forEach(function(ae){X(H,ae)}),H.postMessage({event:"flush",data:M})}},function(D,w,S){S.r(w),S.d(w,"default",function(){return Dr});var O=S(11),E=S(3),c=S(0),K=S(2),I=S(1),X=S(6),q=S(5);function V(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var H=function(){function p(r){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=r}var u,e;return p.prototype.reloaded=function(r){if(!r)return this.advanced=!0,void(this.updated=!0);var i=this.lastPartSn-r.lastPartSn,n=this.lastPartIndex-r.lastPartIndex;this.updated=this.endSN!==r.endSN||!!n||!!i,this.advanced=this.endSN>r.endSN||i>0||i===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*r.misses):this.misses=r.misses+1,this.availabilityDelay=r.availabilityDelay},u=p,(e=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(E.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var r=this.driftEndTime-this.driftStartTime;return r>0?1e3*(this.driftEnd-this.driftStart)/r:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var r;return(r=this.fragments)!==null&&r!==void 0&&r.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&V(u.prototype,e),p}(),U=S(15),M=/^(\d+)x(\d+)$/,ae=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Y=function(){function p(e){for(var r in typeof e=="string"&&(e=p.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var u=p.prototype;return u.decimalInteger=function(e){var r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r},u.hexadecimalInteger=function(e){if(this[e]){var r=(this[e]||"0x").slice(2);r=(1&r.length?"0":"")+r;for(var i=new Uint8Array(r.length/2),n=0;n<r.length/2;n++)i[n]=parseInt(r.slice(2*n,2*n+2),16);return i}return null},u.hexadecimalIntegerAsNumber=function(e){var r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r},u.decimalFloatingPoint=function(e){return parseFloat(this[e])},u.optionalFloat=function(e,r){var i=this[e];return i?parseFloat(i):r},u.enumeratedString=function(e){return this[e]},u.bool=function(e){return this[e]==="YES"},u.decimalResolution=function(e){var r=M.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}},p.parseAttrList=function(e){var r,i={};for(ae.lastIndex=0;(r=ae.exec(e))!==null;){var n=r[2];n.indexOf('"')===0&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[r[1]]=n}return i},p}(),J={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function z(p,u){return MediaSource.isTypeSupported((u||"video")+'/mp4;codecs="'+p+'"')}var Q=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,P=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),C=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Z=/\.(mp4|m4s|m4v|m4a)$/i,ne=function(){function p(){}return p.findGroup=function(u,e){for(var r=0;r<u.length;r++){var i=u[r];if(i.id===e)return i}},p.convertAVC1ToAVCOTI=function(u){var e=u.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).substr(-4)}return u},p.resolve=function(u,e){return O.buildAbsoluteURL(e,u,{alwaysNormalize:!0})},p.parseMasterPlaylist=function(u,e){var r,i=[],n={},a=!1;for(Q.lastIndex=0;(r=Q.exec(u))!=null;)if(r[1]){var t=new Y(r[1]),s={attrs:t,bitrate:t.decimalInteger("AVERAGE-BANDWIDTH")||t.decimalInteger("BANDWIDTH"),name:t.NAME,url:p.resolve(r[2],e)},o=t.decimalResolution("RESOLUTION");o&&(s.width=o.width,s.height=o.height),ue((t.CODECS||"").split(/[ ,]+/).filter(function(h){return h}),s),s.videoCodec&&s.videoCodec.indexOf("avc1")!==-1&&(s.videoCodec=p.convertAVC1ToAVCOTI(s.videoCodec)),i.push(s)}else if(r[3]){var d=new Y(r[3]);d["DATA-ID"]&&(a=!0,n[d["DATA-ID"]]=d)}return{levels:i,sessionData:a?n:null}},p.parseMasterPlaylistMedia=function(u,e,r,i){var n;i===void 0&&(i=[]);var a=[],t=0;for(P.lastIndex=0;(n=P.exec(u))!==null;){var s=new Y(n[1]);if(s.TYPE===r){var o={attrs:s,bitrate:0,id:t++,groupId:s["GROUP-ID"],instreamId:s["INSTREAM-ID"],name:s.NAME||s.LANGUAGE||"",type:r,default:s.bool("DEFAULT"),autoselect:s.bool("AUTOSELECT"),forced:s.bool("FORCED"),lang:s.LANGUAGE,url:s.URI?p.resolve(s.URI,e):""};if(i.length){var d=p.findGroup(i,o.groupId)||i[0];fe(o,d,"audioCodec"),fe(o,d,"textCodec")}a.push(o)}}return a},p.parseLevelPlaylist=function(u,e,r,i,n){var a,t,s,o=new H(e),d=o.fragments,h=null,m=0,b=0,A=0,F=0,j=null,B=new q.b(i,e),he=-1,le=!1;for(k.lastIndex=0,o.m3u8=u;(a=k.exec(u))!==null;){le&&(le=!1,(B=new q.b(i,e)).start=A,B.sn=m,B.cc=F,B.level=r,h&&(B.initSegment=h,B.rawProgramDateTime=h.rawProgramDateTime));var se=a[1];if(se){B.duration=parseFloat(se);var oe=(" "+a[2]).slice(1);B.title=oe||null,B.tagList.push(oe?["INF",se,oe]:["INF",se])}else if(a[3])Object(E.a)(B.duration)&&(B.start=A,s&&(B.levelkey=s),B.sn=m,B.level=r,B.cc=F,B.urlId=n,d.push(B),B.relurl=(" "+a[3]).slice(1),de(B,j),j=B,A+=B.duration,m++,b=0,le=!0);else if(a[4]){var pe=(" "+a[4]).slice(1);j?B.setByteRange(pe,j):B.setByteRange(pe)}else if(a[5])B.rawProgramDateTime=(" "+a[5]).slice(1),B.tagList.push(["PROGRAM-DATE-TIME",B.rawProgramDateTime]),he===-1&&(he=d.length);else{if(!(a=a[0].match(C))){I.b.warn("No matches on slow regex match for level playlist!");continue}for(t=1;t<a.length&&a[t]===void 0;t++);var Te=(" "+a[t]).slice(1),ge=(" "+a[t+1]).slice(1),Pe=a[t+2]?(" "+a[t+2]).slice(1):"";switch(Te){case"PLAYLIST-TYPE":o.type=ge.toUpperCase();break;case"MEDIA-SEQUENCE":m=o.startSN=parseInt(ge);break;case"SKIP":var He=new Y(ge),qe=He.decimalInteger("SKIPPED-SEGMENTS");if(Object(E.a)(qe)){o.skippedSegments=qe;for(var Rt=qe;Rt--;)d.unshift(null);m+=qe}var it=He.enumeratedString("RECENTLY-REMOVED-DATERANGES");it&&(o.recentlyRemovedDateranges=it.split("	"));break;case"TARGETDURATION":o.targetduration=parseFloat(ge);break;case"VERSION":o.version=parseInt(ge);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(ge||Pe)&&B.tagList.push(Pe?[ge,Pe]:[ge]);break;case"DIS":F++;case"GAP":B.tagList.push([Te]);break;case"BITRATE":B.tagList.push([Te,ge]);break;case"DISCONTINUITY-SEQ":F=parseInt(ge);break;case"KEY":var nt,ft=new Y(ge),or=ft.enumeratedString("METHOD"),_r=ft.URI,Di=ft.hexadecimalInteger("IV"),Qr=ft.enumeratedString("KEYFORMATVERSIONS"),Jr=ft.enumeratedString("KEYID"),kr=(nt=ft.enumeratedString("KEYFORMAT"))!=null?nt:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(kr)>-1){I.b.warn("Keyformat "+kr+" is not supported from the manifest");continue}if(kr!=="identity")continue;or&&(s=U.a.fromURL(e,_r),_r&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(or)>=0&&(s.method=or,s.keyFormat=kr,Jr&&(s.keyID=Jr),Qr&&(s.keyFormatVersions=Qr),s.iv=Di));break;case"START":var Zr=new Y(ge).decimalFloatingPoint("TIME-OFFSET");Object(E.a)(Zr)&&(o.startTimeOffset=Zr);break;case"MAP":var Kr=new Y(ge);B.relurl=Kr.URI,Kr.BYTERANGE&&B.setByteRange(Kr.BYTERANGE),B.level=r,B.sn="initSegment",s&&(B.levelkey=s),B.initSegment=null,h=B,le=!0;break;case"SERVER-CONTROL":var lr=new Y(ge);o.canBlockReload=lr.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=lr.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&lr.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=lr.optionalFloat("PART-HOLD-BACK",0),o.holdBack=lr.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var _i=new Y(ge);o.partTarget=_i.decimalFloatingPoint("PART-TARGET");break;case"PART":var ur=o.partList;ur||(ur=o.partList=[]);var ki=b>0?ur[ur.length-1]:void 0,xi=b++,ei=new q.c(new Y(ge),B,e,xi,ki);ur.push(ei),B.duration+=ei.duration;break;case"PRELOAD-HINT":var wi=new Y(ge);o.preloadHint=wi;break;case"RENDITION-REPORT":var Ci=new Y(ge);o.renditionReports=o.renditionReports||[],o.renditionReports.push(Ci);break;default:I.b.warn("line parsed but not handled: "+a)}}}j&&!j.relurl?(d.pop(),A-=j.duration,o.partList&&(o.fragmentHint=j)):o.partList&&(de(B,j),B.cc=F,o.fragmentHint=B);var Hr=d.length,xr=d[0],Vr=d[Hr-1];if((A+=o.skippedSegments*o.targetduration)>0&&Hr&&Vr){o.averagetargetduration=A/Hr;var ti=Vr.sn;o.endSN=ti!=="initSegment"?ti:0,xr&&(o.startCC=xr.cc,xr.initSegment||o.fragments.every(function(dr){return dr.relurl&&(hr=dr.relurl,Z.test((fr=(Wt=O.parseURL(hr))===null||Wt===void 0?void 0:Wt.path)!=null?fr:""));var hr,fr,Wt})&&(I.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(B=new q.b(i,e)).relurl=Vr.relurl,B.level=r,B.sn="initSegment",xr.initSegment=B,o.needSidxRanges=!0))}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(A+=o.fragmentHint.duration),o.totalduration=A,o.endCC=F,he>0&&function(dr,hr){for(var fr=dr[hr],Wt=hr;Wt--;){var wr=dr[Wt];if(!wr)return;wr.programDateTime=fr.programDateTime-1e3*wr.duration,fr=wr}}(d,he),o},p}();function ue(p,u){["video","audio","text"].forEach(function(e){var r=p.filter(function(n){return function(a,t){var s=J[t];return!!s&&s[a.slice(0,4)]===!0}(n,e)});if(r.length){var i=r.filter(function(n){return n.lastIndexOf("avc1",0)===0||n.lastIndexOf("mp4a",0)===0});u[e+"Codec"]=i.length>0?i[0]:r[0],p=p.filter(function(n){return r.indexOf(n)===-1})}}),u.unknownCodecs=p}function fe(p,u,e){var r=u[e];r&&(p[e]=r)}function de(p,u){p.rawProgramDateTime?p.programDateTime=Date.parse(p.rawProgramDateTime):u!=null&&u.programDateTime&&(p.programDateTime=u.endProgramDateTime),Object(E.a)(p.programDateTime)||(p.programDateTime=null,p.rawProgramDateTime=null)}var ee=S(4);function Ee(p,u){var e=p.url;return e!==void 0&&e.indexOf("data:")!==0||(e=u.url),e}var Le=function(){function p(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var u=p.prototype;return u.registerListeners=function(){var e=this.hls;e.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(c.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(c.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(c.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},u.unregisterListeners=function(){var e=this.hls;e.off(c.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(c.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(c.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(c.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},u.createInternalLoader=function(e){var r=this.hls.config,i=r.pLoader,n=r.loader,a=new(i||n)(r);return e.loader=a,this.loaders[e.type]=a,a},u.getInternalLoader=function(e){return this.loaders[e.type]},u.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},u.destroyInternalLoaders=function(){for(var e in this.loaders){var r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}},u.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},u.onManifestLoading=function(e,r){var i=r.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:ee.a.MANIFEST,url:i,deliveryDirectives:null})},u.onLevelLoading=function(e,r){var i=r.id,n=r.level,a=r.url,t=r.deliveryDirectives;this.load({id:i,groupId:null,level:n,responseType:"text",type:ee.a.LEVEL,url:a,deliveryDirectives:t})},u.onAudioTrackLoading=function(e,r){var i=r.id,n=r.groupId,a=r.url,t=r.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:ee.a.AUDIO_TRACK,url:a,deliveryDirectives:t})},u.onSubtitleTrackLoading=function(e,r){var i=r.id,n=r.groupId,a=r.url,t=r.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:ee.a.SUBTITLE_TRACK,url:a,deliveryDirectives:t})},u.load=function(e){var r,i,n,a,t,s,o=this.hls.config,d=this.getInternalLoader(e);if(d){var h=d.context;if(h&&h.url===e.url)return void I.b.trace("[playlist-loader]: playlist request ongoing");I.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),d.abort()}switch(e.type){case ee.a.MANIFEST:i=o.manifestLoadingMaxRetry,n=o.manifestLoadingTimeOut,a=o.manifestLoadingRetryDelay,t=o.manifestLoadingMaxRetryTimeout;break;case ee.a.LEVEL:case ee.a.AUDIO_TRACK:case ee.a.SUBTITLE_TRACK:i=0,n=o.levelLoadingTimeOut;break;default:i=o.levelLoadingMaxRetry,n=o.levelLoadingTimeOut,a=o.levelLoadingRetryDelay,t=o.levelLoadingMaxRetryTimeout}if(d=this.createInternalLoader(e),(r=e.deliveryDirectives)!==null&&r!==void 0&&r.part&&(e.type===ee.a.LEVEL&&e.level!==null?s=this.hls.levels[e.level].details:e.type===ee.a.AUDIO_TRACK&&e.id!==null?s=this.hls.audioTracks[e.id].details:e.type===ee.a.SUBTITLE_TRACK&&e.id!==null&&(s=this.hls.subtitleTracks[e.id].details),s)){var m=s.partTarget,b=s.targetduration;m&&b&&(n=Math.min(1e3*Math.max(3*m,.8*b),n))}var A={timeout:n,maxRetry:i,retryDelay:a,maxRetryDelay:t,highWaterMark:0},F={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(e,A,F)},u.loadsuccess=function(e,r,i,n){if(n===void 0&&(n=null),i.isSidxRequest)return this.handleSidxRequest(e,i),void this.handlePlaylistLoaded(e,r,i,n);this.resetInternalLoader(i.type);var a=e.data;a.indexOf("#EXTM3U")===0?(r.parsing.start=performance.now(),a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,r,i,n):this.handleMasterPlaylist(e,r,i,n)):this.handleManifestParsingError(e,i,"no EXTM3U delimiter",n)},u.loaderror=function(e,r,i){i===void 0&&(i=null),this.handleNetworkError(r,i,!1,e)},u.loadtimeout=function(e,r,i){i===void 0&&(i=null),this.handleNetworkError(r,i,!0)},u.handleMasterPlaylist=function(e,r,i,n){var a=this.hls,t=e.data,s=Ee(e,i),o=ne.parseMasterPlaylist(t,s),d=o.levels,h=o.sessionData;if(d.length){var m=d.map(function(B){return{id:B.attrs.AUDIO,audioCodec:B.audioCodec}}),b=d.map(function(B){return{id:B.attrs.SUBTITLES,textCodec:B.textCodec}}),A=ne.parseMasterPlaylistMedia(t,s,"AUDIO",m),F=ne.parseMasterPlaylistMedia(t,s,"SUBTITLES",b),j=ne.parseMasterPlaylistMedia(t,s,"CLOSED-CAPTIONS");A.length&&(A.some(function(B){return!B.url})||!d[0].audioCodec||d[0].attrs.AUDIO||(I.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),A.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Y({}),bitrate:0,url:""}))),a.trigger(c.a.MANIFEST_LOADED,{levels:d,audioTracks:A,subtitles:F,captions:j,url:s,stats:r,networkDetails:n,sessionData:h})}else this.handleManifestParsingError(e,i,"no level found in manifest",n)},u.handleTrackOrLevelPlaylist=function(e,r,i,n){var a=this.hls,t=i.id,s=i.level,o=i.type,d=Ee(e,i),h=Object(E.a)(t)?t:0,m=Object(E.a)(s)?s:h,b=function(he){switch(he.type){case ee.a.AUDIO_TRACK:return ee.b.AUDIO;case ee.a.SUBTITLE_TRACK:return ee.b.SUBTITLE;default:return ee.b.MAIN}}(i),A=ne.parseLevelPlaylist(e.data,d,m,b,h);if(A.fragments.length){if(o===ee.a.MANIFEST){var F={attrs:new Y({}),bitrate:0,details:A,name:"",url:d};a.trigger(c.a.MANIFEST_LOADED,{levels:[F],audioTracks:[],url:d,stats:r,networkDetails:n,sessionData:null})}if(r.parsing.end=performance.now(),A.needSidxRanges){var j,B=(j=A.fragments[0].initSegment)===null||j===void 0?void 0:j.url;this.load({url:B,isSidxRequest:!0,type:o,level:s,levelDetails:A,id:t,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else i.levelDetails=A,this.handlePlaylistLoaded(e,r,i,n)}else a.trigger(c.a.ERROR,{type:K.b.NETWORK_ERROR,details:K.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:typeof i.level=="number"?i.level:void 0})},u.handleSidxRequest=function(e,r){var i=Object(X.g)(new Uint8Array(e.data));if(i){var n=i.references,a=r.levelDetails;n.forEach(function(t,s){var o=t.info,d=a.fragments[s];d.byteRange.length===0&&d.setByteRange(String(1+o.end-o.start)+"@"+String(o.start)),d.initSegment&&d.initSegment.setByteRange(String(i.moovEndOffset)+"@0")})}},u.handleManifestParsingError=function(e,r,i,n){this.hls.trigger(c.a.ERROR,{type:K.b.NETWORK_ERROR,details:K.a.MANIFEST_PARSING_ERROR,fatal:r.type===ee.a.MANIFEST,url:e.url,reason:i,response:e,context:r,networkDetails:n})},u.handleNetworkError=function(e,r,i,n){i===void 0&&(i=!1),I.b.warn("[playlist-loader]: A network "+(i?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var a=K.a.UNKNOWN,t=!1,s=this.getInternalLoader(e);switch(e.type){case ee.a.MANIFEST:a=i?K.a.MANIFEST_LOAD_TIMEOUT:K.a.MANIFEST_LOAD_ERROR,t=!0;break;case ee.a.LEVEL:a=i?K.a.LEVEL_LOAD_TIMEOUT:K.a.LEVEL_LOAD_ERROR,t=!1;break;case ee.a.AUDIO_TRACK:a=i?K.a.AUDIO_TRACK_LOAD_TIMEOUT:K.a.AUDIO_TRACK_LOAD_ERROR,t=!1;break;case ee.a.SUBTITLE_TRACK:a=i?K.a.SUBTITLE_TRACK_LOAD_TIMEOUT:K.a.SUBTITLE_LOAD_ERROR,t=!1}s&&this.resetInternalLoader(e.type);var o={type:K.b.NETWORK_ERROR,details:a,fatal:t,url:e.url,loader:s,context:e,networkDetails:r};n&&(o.response=n),this.hls.trigger(c.a.ERROR,o)},u.handlePlaylistLoaded=function(e,r,i,n){var a=i.type,t=i.level,s=i.id,o=i.groupId,d=i.loader,h=i.levelDetails,m=i.deliveryDirectives;if(h!=null&&h.targetduration){if(d)switch(h.live&&(d.getCacheAge&&(h.ageHeader=d.getCacheAge()||0),d.getCacheAge&&!isNaN(h.ageHeader)||(h.ageHeader=0)),a){case ee.a.MANIFEST:case ee.a.LEVEL:this.hls.trigger(c.a.LEVEL_LOADED,{details:h,level:t||0,id:s||0,stats:r,networkDetails:n,deliveryDirectives:m});break;case ee.a.AUDIO_TRACK:this.hls.trigger(c.a.AUDIO_TRACK_LOADED,{details:h,id:s||0,groupId:o||"",stats:r,networkDetails:n,deliveryDirectives:m});break;case ee.a.SUBTITLE_TRACK:this.hls.trigger(c.a.SUBTITLE_TRACK_LOADED,{details:h,id:s||0,groupId:o||"",stats:r,networkDetails:n,deliveryDirectives:m})}}else this.handleManifestParsingError(e,i,"invalid target duration",n)},p}(),Se=function(){function p(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var u=p.prototype;return u._registerListeners=function(){this.hls.on(c.a.KEY_LOADING,this.onKeyLoading,this)},u._unregisterListeners=function(){this.hls.off(c.a.KEY_LOADING,this.onKeyLoading)},u.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var r=this.loaders[e];r&&r.destroy()}this.loaders={}},u.onKeyLoading=function(e,r){var i=r.frag,n=i.type,a=this.loaders[n];if(i.decryptdata){var t=i.decryptdata.uri;if(t!==this.decrypturl||this.decryptkey===null){var s=this.hls.config;if(a&&(I.b.warn("abort previous key loader for type:"+n),a.abort()),!t)return void I.b.warn("key uri is falsy");var o=s.loader,d=i.loader=this.loaders[n]=new o(s);this.decrypturl=t,this.decryptkey=null;var h={url:t,frag:i,responseType:"arraybuffer"},m={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout,highWaterMark:0},b={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(h,m,b)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(c.a.KEY_LOADED,{frag:i}))}else I.b.warn("Missing decryption data on fragment in onKeyLoading")},u.loadsuccess=function(e,r,i){var n=i.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=null,delete this.loaders[n.type],this.hls.trigger(c.a.KEY_LOADED,{frag:n})):I.b.error("after key load, decryptdata unset")},u.loaderror=function(e,r){var i=r.frag,n=i.loader;n&&n.abort(),delete this.loaders[i.type],this.hls.trigger(c.a.ERROR,{type:K.b.NETWORK_ERROR,details:K.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},u.loadtimeout=function(e,r){var i=r.frag,n=i.loader;n&&n.abort(),delete this.loaders[i.type],this.hls.trigger(c.a.ERROR,{type:K.b.NETWORK_ERROR,details:K.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},p}();function Ae(p,u){var e;try{e=new Event("addtrack")}catch{(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=p,u.dispatchEvent(e)}function ke(p,u,e){var r=p.mode;if(r==="disabled"&&(p.mode="hidden"),p.cues&&p.cues.length>0)for(var i=function(a,t,s){var o=[],d=function(A,F){if(F<A[0].startTime)return 0;var j=A.length-1;if(F>A[j].endTime)return-1;for(var B=0,he=j;B<=he;){var le=Math.floor((he+B)/2);if(F<A[le].startTime)he=le-1;else{if(!(F>A[le].startTime&&B<j))return le;B=le+1}}return A[B].startTime-F<F-A[he].startTime?B:he}(a,t);if(d>-1)for(var h=d,m=a.length;h<m;h++){var b=a[h];if(b.startTime>=t&&b.endTime<=s)o.push(b);else if(b.startTime>s)return o}return o}(p.cues,u,e),n=0;n<i.length;n++)p.removeCue(i[n]);r==="disabled"&&(p.mode=r)}var Ne=S(7),Ge=function(){function p(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var u=p.prototype;return u.destroy=function(){this._unregisterListeners()},u._registerListeners=function(){var e=this.hls;e.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(c.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},u._unregisterListeners=function(){var e=this.hls;e.off(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(c.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},u.onMediaAttached=function(e,r){this.media=r.media},u.onMediaDetaching=function(){this.id3Track&&(function(e){var r=e.mode;if(r==="disabled"&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);r==="disabled"&&(e.mode=r)}(this.id3Track),this.id3Track=null,this.media=null)},u.getID3Track=function(e){if(this.media){for(var r=0;r<e.length;r++){var i=e[r];if(i.kind==="metadata"&&i.label==="id3")return Ae(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},u.onFragParsingMetadata=function(e,r){if(this.media){var i=r.frag,n=r.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,t=0;t<n.length;t++){var s=Ne.c(n[t].data);if(s){var o=n[t].pts,d=t<n.length-1?n[t+1].pts:i.end;d-o<=0&&(d=o+.25);for(var h=0;h<s.length;h++){var m=s[h];if(!Ne.e(m)){var b=new a(o,d,"");b.value=m,this.id3Track.addCue(b)}}}}}},u.onBufferFlushing=function(e,r){var i=r.startOffset,n=r.endOffset,a=r.type;if(!a||a==="audio"){var t=this.id3Track;t&&ke(t,i,n)}},p}();function Fe(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Ue,Ke=function(){function p(i){var n=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return n.timeupdate()},this.hls=i,this.config=i.config,this.registerListeners()}var u,e,r=p.prototype;return r.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},r.registerListeners=function(){this.hls.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(c.a.ERROR,this.onError,this)},r.unregisterListeners=function(){this.hls.off(c.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(c.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(c.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(c.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(c.a.ERROR,this.onError)},r.onMediaAttached=function(i,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},r.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},r.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},r.onLevelUpdated=function(i,n){var a=n.details;this.levelDetails=a,a.advanced&&this.timeupdate(),!a.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},r.onError=function(i,n){n.details===K.a.BUFFER_STALLED_ERROR&&(this.stallCount++,I.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},r.timeupdate=function(){var i=this.media,n=this.levelDetails;if(i&&n){this.currentTime=i.currentTime;var a=this.computeLatency();if(a!==null){this._latency=a;var t=this.config,s=t.lowLatencyMode,o=t.maxLiveSyncPlaybackRate;if(s&&o!==1){var d=this.targetLatency;if(d!==null){var h=a-d,m=h<Math.min(this.maxLatency,d+n.targetduration);if(n.live&&m&&h>.05&&this.forwardBufferLength>1){var b=Math.min(2,Math.max(1,o)),A=Math.round(2/(1+Math.exp(-.75*h-this.edgeStalled))*20)/20;i.playbackRate=Math.min(b,Math.max(1,A))}else i.playbackRate!==1&&i.playbackRate!==0&&(i.playbackRate=1)}}}}},r.estimateLiveEdge=function(){var i=this.levelDetails;return i===null?null:i.edge+i.age},r.computeLatency=function(){var i=this.estimateLiveEdge();return i===null?null:i-this.currentTime},u=p,(e=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var i=this.config,n=this.levelDetails;return i.liveMaxLatencyDuration!==void 0?i.liveMaxLatencyDuration:n?i.liveMaxLatencyDurationCount*n.targetduration:0}},{key:"targetLatency",get:function(){var i=this.levelDetails;if(i===null)return null;var n=i.holdBack,a=i.partHoldBack,t=i.targetduration,s=this.config,o=s.liveSyncDuration,d=s.liveSyncDurationCount,h=s.lowLatencyMode,m=this.hls.userConfig,b=h&&a||n;(m.liveSyncDuration||m.liveSyncDurationCount||b===0)&&(b=o!==void 0?o:d*t);var A=t;return b+Math.min(1*this.stallCount,A)}},{key:"liveSyncPosition",get:function(){var i=this.estimateLiveEdge(),n=this.targetLatency,a=this.levelDetails;if(i===null||n===null||a===null)return null;var t=a.edge,s=i-n-this.edgeStalled,o=t-a.totalduration,d=t-(this.config.lowLatencyMode&&a.partTarget||a.targetduration);return Math.min(Math.max(o,s),d)}},{key:"drift",get:function(){var i=this.levelDetails;return i===null?1:i.drift}},{key:"edgeStalled",get:function(){var i=this.levelDetails;if(i===null)return 0;var n=3*(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.max(i.age-n,0)}},{key:"forwardBufferLength",get:function(){var i=this.media,n=this.levelDetails;if(!i||!n)return 0;var a=i.buffered.length;return a?i.buffered.end(a-1):n.edge-this.currentTime}}])&&Fe(u.prototype,e),p}();function Ut(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}(function(p){p.No="",p.Yes="YES",p.v2="v2"})(Ue||(Ue={}));var kt=function(){function p(u,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=u,this.part=e,this.skip=r}return p.prototype.addDirectives=function(u){var e=new self.URL(u);return this.msn!==void 0&&e.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},p}(),xt=function(){function p(r){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[r.url],this.attrs=r.attrs,this.bitrate=r.bitrate,r.details&&(this.details=r.details),this.id=r.id||0,this.name=r.name,this.width=r.width||0,this.height=r.height||0,this.audioCodec=r.audioCodec,this.videoCodec=r.videoCodec,this.unknownCodecs=r.unknownCodecs,this.codecSet=[r.videoCodec,r.audioCodec].filter(function(i){return i}).join(",").replace(/\.[^.,]+/g,"")}var u,e;return u=p,(e=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(r){var i=r%this.url.length;this._urlId!==i&&(this.details=void 0,this._urlId=i)}}])&&Ut(u.prototype,e),p}();function ct(p,u,e){switch(u){case"audio":p.audioGroupIds||(p.audioGroupIds=[]),p.audioGroupIds.push(e);break;case"text":p.textGroupIds||(p.textGroupIds=[]),p.textGroupIds.push(e)}}function st(p){var u={};p.forEach(function(e){var r=e.groupId||"";e.id=u[r]=u[r]||0,u[r]++})}function ot(p,u){var e=u.startPTS;if(Object(E.a)(e)){var r,i=0;u.sn>p.sn?(i=e-p.start,r=p):(i=p.start-e,r=u),r.duration!==i&&(r.duration=i)}else u.sn>p.sn?p.cc===u.cc&&p.minEndPTS?u.start=p.start+(p.minEndPTS-p.start):u.start=p.start+p.duration:u.start=Math.max(p.start-u.duration,0)}function We(p,u,e,r,i,n){r-e<=0&&(I.b.warn("Fragment should have a positive duration",u),r=e+u.duration,n=i+u.duration);var a=e,t=r,s=u.startPTS,o=u.endPTS;if(Object(E.a)(s)){var d=Math.abs(s-e);Object(E.a)(u.deltaPTS)?u.deltaPTS=Math.max(d,u.deltaPTS):u.deltaPTS=d,a=Math.max(e,s),e=Math.min(e,s),i=Math.min(i,u.startDTS),t=Math.min(r,o),r=Math.max(r,o),n=Math.max(n,u.endDTS)}u.duration=r-e;var h=e-u.start;u.appendedPTS=r,u.start=u.startPTS=e,u.maxStartPTS=a,u.startDTS=i,u.endPTS=r,u.minEndPTS=t,u.endDTS=n;var m,b=u.sn;if(!p||b<p.startSN||b>p.endSN)return 0;var A=b-p.startSN,F=p.fragments;for(F[A]=u,m=A;m>0;m--)ot(F[m],F[m-1]);for(m=A;m<F.length-1;m++)ot(F[m],F[m+1]);return p.fragmentHint&&ot(F[F.length-1],p.fragmentHint),p.PTSKnown=p.alignedSliding=!0,h}function $t(p,u){for(var e=null,r=p.fragments,i=r.length-1;i>=0;i--){var n=r[i].initSegment;if(n){e=n;break}}p.fragmentHint&&delete p.fragmentHint.endPTS;var a,t=0;if(function(b,A,F){for(var j=A.skippedSegments,B=Math.max(b.startSN,A.startSN)-A.startSN,he=(b.fragmentHint?1:0)+(j?A.endSN:Math.min(b.endSN,A.endSN))-A.startSN,le=A.startSN-b.startSN,se=A.fragmentHint?A.fragments.concat(A.fragmentHint):A.fragments,oe=b.fragmentHint?b.fragments.concat(b.fragmentHint):b.fragments,pe=B;pe<=he;pe++){var Te=oe[le+pe],ge=se[pe];j&&!ge&&pe<j&&(ge=A.fragments[pe]=Te),Te&&ge&&F(Te,ge)}}(p,u,function(b,A){b.relurl&&(t=b.cc-A.cc),Object(E.a)(b.startPTS)&&Object(E.a)(b.endPTS)&&(A.start=A.startPTS=b.startPTS,A.startDTS=b.startDTS,A.appendedPTS=b.appendedPTS,A.maxStartPTS=b.maxStartPTS,A.endPTS=b.endPTS,A.endDTS=b.endDTS,A.minEndPTS=b.minEndPTS,A.duration=b.endPTS-b.startPTS,A.duration&&(a=A),u.PTSKnown=u.alignedSliding=!0),A.elementaryStreams=b.elementaryStreams,A.loader=b.loader,A.stats=b.stats,A.urlId=b.urlId,b.initSegment&&(A.initSegment=b.initSegment,e=b.initSegment)}),e&&(u.fragmentHint?u.fragments.concat(u.fragmentHint):u.fragments).forEach(function(b){var A;b.initSegment&&b.initSegment.relurl!==((A=e)===null||A===void 0?void 0:A.relurl)||(b.initSegment=e)}),u.skippedSegments&&(u.deltaUpdateFailed=u.fragments.some(function(b){return!b}),u.deltaUpdateFailed)){I.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var s=u.skippedSegments;s--;)u.fragments.shift();u.startSN=u.fragments[0].sn,u.startCC=u.fragments[0].cc}var o=u.fragments;if(t){I.b.warn("discontinuity sliding from playlist, take drift into account");for(var d=0;d<o.length;d++)o[d].cc+=t}u.skippedSegments&&(u.startCC=u.fragments[0].cc),function(b,A,F){if(b&&A)for(var j=0,B=0,he=b.length;B<=he;B++){var le=b[B],se=A[B+j];le&&se&&le.index===se.index&&le.fragment.sn===se.fragment.sn?F(le,se):j--}}(p.partList,u.partList,function(b,A){A.elementaryStreams=b.elementaryStreams,A.stats=b.stats}),a?We(u,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):Qt(p,u),o.length&&(u.totalduration=u.edge-o[0].start),u.driftStartTime=p.driftStartTime,u.driftStart=p.driftStart;var h=u.advancedDateTime;if(u.advanced&&h){var m=u.edge;u.driftStart||(u.driftStartTime=h,u.driftStart=m),u.driftEndTime=h,u.driftEnd=m}else u.driftEndTime=p.driftEndTime,u.driftEnd=p.driftEnd,u.advancedDateTime=p.advancedDateTime}function Qt(p,u){var e=u.startSN+u.skippedSegments-p.startSN,r=p.fragments;e<0||e>=r.length||function(i,n){if(n){for(var a=i.fragments,t=i.skippedSegments;t<a.length;t++)a[t].start+=n;i.fragmentHint&&(i.fragmentHint.start+=n)}}(u,r[e].start)}var gr=function(){function p(e,r){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=I.b.log.bind(I.b,r+":"),this.warn=I.b.warn.bind(I.b,r+":"),this.hls=e}var u=p.prototype;return u.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},u.onError=function(e,r){r.fatal&&r.type===K.b.NETWORK_ERROR&&this.clearTimer()},u.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},u.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},u.stopLoad=function(){this.canLoad=!1,this.clearTimer()},u.switchParams=function(e,r){var i=r?.renditionReports;if(i)for(var n=0;n<i.length;n++){var a=i[n],t=""+a.URI;if(t===e.substr(-t.length)){var s=parseInt(a["LAST-MSN"]),o=parseInt(a["LAST-PART"]);if(r&&this.hls.config.lowLatencyMode){var d=Math.min(r.age-r.partTarget,r.targetduration);o!==void 0&&d>r.partTarget&&(o+=1)}if(Object(E.a)(s))return new kt(s,Object(E.a)(o)?o:void 0,Ue.No)}}},u.loadPlaylist=function(e){},u.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},u.playlistLoaded=function(e,r,i){var n=this,a=r.details,t=r.stats,s=t.loading.end?Math.max(0,self.performance.now()-t.loading.end):0;if(a.advancedDateTime=Date.now()-s,a.live||i!=null&&i.live){if(a.reloaded(i),i&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),i&&a.fragments.length>0&&$t(i,a),!this.canLoad||!a.live)return;var o,d=void 0,h=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var m=this.hls.config.lowLatencyMode,b=a.lastPartSn,A=a.endSN,F=a.lastPartIndex,j=b===A;F!==-1?(d=j?A+1:b,h=j?m?0:F:F+1):d=A+1;var B=a.age,he=B+a.ageHeader,le=Math.min(he-a.partTarget,1.5*a.targetduration);if(le>0){if(i&&le>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+le+" with playlist age: "+a.age),le=0;else{var se=Math.floor(le/a.targetduration);d+=se,h!==void 0&&(h+=Math.round(le%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+B.toFixed(2)+"s goal: "+le+" skip sn "+se+" to part "+h)}a.tuneInGoal=le}if(o=this.getDeliveryDirectives(a,r.deliveryDirectives,d,h),m||!j)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(a,r.deliveryDirectives,d,h);var oe=function(pe,Te){var ge,Pe=1e3*pe.levelTargetDuration,He=Pe/2,qe=pe.age,Rt=qe>0&&qe<3*Pe,it=Te.loading.end-Te.loading.start,nt=pe.availabilityDelay;if(pe.updated===!1)if(Rt){var ft=333*pe.misses;ge=Math.max(Math.min(He,2*it),ft),pe.availabilityDelay=(pe.availabilityDelay||0)+ge}else ge=He;else Rt?(nt=Math.min(nt||Pe/2,qe),pe.availabilityDelay=nt,ge=nt+Pe-qe):ge=Pe-it;return Math.round(ge)}(a,t);d!==void 0&&a.canBlockReload&&(oe-=a.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(oe)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(o)},oe)}else this.clearTimer()},u.getDeliveryDirectives=function(e,r,i,n){var a=function(t,s){var o=t.canSkipUntil,d=t.canSkipDateRanges,h=t.endSN;return o&&(s!==void 0?s-h:0)<o?d?Ue.v2:Ue.Yes:Ue.No}(e,i);return r!=null&&r.skip&&e.deltaUpdateFailed&&(i=r.msn,n=r.part,a=Ue.No),new kt(i,n,a)},u.retryLoadingOrFail=function(e){var r,i=this,n=this.hls.config,a=this.retryCount<n.levelLoadingMaxRetry;if(a)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&(r=e.context)!==null&&r!==void 0&&r.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var t=Math.min(Math.pow(2,this.retryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return i.loadPlaylist()},t),this.warn("retry playlist loading #"+this.retryCount+" in "+t+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return a},p}();function pr(){return(pr=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}function mr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function Jt(p,u){return(Jt=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var je,yr=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),vt=function(p){var u,e;function r(t){var s;return(s=p.call(this,t,"[level-controller]")||this)._levels=[],s._firstLevel=-1,s._startLevel=void 0,s.currentLevelIndex=-1,s.manualLevelIndex=-1,s.onParsedComplete=void 0,s._registerListeners(),s}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Jt(u,e);var i,n,a=r.prototype;return a._registerListeners=function(){var t=this.hls;t.on(c.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(c.a.FRAG_LOADED,this.onFragLoaded,this),t.on(c.a.ERROR,this.onError,this)},a._unregisterListeners=function(){var t=this.hls;t.off(c.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(c.a.FRAG_LOADED,this.onFragLoaded,this),t.off(c.a.ERROR,this.onError,this)},a.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,p.prototype.destroy.call(this)},a.startLoad=function(){this._levels.forEach(function(t){t.loadError=0}),p.prototype.startLoad.call(this)},a.onManifestLoaded=function(t,s){var o,d,h=[],m=[],b=[],A={},F=!1,j=!1,B=!1;if(s.levels.forEach(function(oe){var pe=oe.attrs;F=F||!(!oe.width||!oe.height),j=j||!!oe.videoCodec,B=B||!!oe.audioCodec,yr&&oe.audioCodec&&oe.audioCodec.indexOf("mp4a.40.34")!==-1&&(oe.audioCodec=void 0);var Te=oe.bitrate+"-"+oe.attrs.RESOLUTION+"-"+oe.attrs.CODECS;(d=A[Te])?d.url.push(oe.url):(d=new xt(oe),A[Te]=d,h.push(d)),pe&&(pe.AUDIO&&ct(d,"audio",pe.AUDIO),pe.SUBTITLES&&ct(d,"text",pe.SUBTITLES))}),(F||j)&&B&&(h=h.filter(function(oe){var pe=oe.videoCodec,Te=oe.width,ge=oe.height;return!!pe||!(!Te||!ge)})),h=h.filter(function(oe){var pe=oe.audioCodec,Te=oe.videoCodec;return(!pe||z(pe,"audio"))&&(!Te||z(Te,"video"))}),s.audioTracks&&st(m=s.audioTracks.filter(function(oe){return!oe.audioCodec||z(oe.audioCodec,"audio")})),s.subtitles&&st(b=s.subtitles),h.length>0){o=h[0].bitrate,h.sort(function(oe,pe){return oe.bitrate-pe.bitrate}),this._levels=h;for(var he=0;he<h.length;he++)if(h[he].bitrate===o){this._firstLevel=he,this.log("manifest loaded, "+h.length+" level(s) found, first bitrate: "+o);break}var le=B&&!j,se={levels:h,audioTracks:m,subtitleTracks:b,firstLevel:this._firstLevel,stats:s.stats,audio:B,video:j,altAudio:!le&&m.some(function(oe){return!!oe.url})};this.hls.trigger(c.a.MANIFEST_PARSED,se),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})},a.onError=function(t,s){if(p.prototype.onError.call(this,t,s),!s.fatal){var o=s.context,d=this._levels[this.currentLevelIndex];if(o&&(o.type===ee.a.AUDIO_TRACK&&d.audioGroupIds&&o.groupId===d.audioGroupIds[d.urlId]||o.type===ee.a.SUBTITLE_TRACK&&d.textGroupIds&&o.groupId===d.textGroupIds[d.urlId]))this.redundantFailover(this.currentLevelIndex);else{var h,m=!1,b=!0;switch(s.details){case K.a.FRAG_LOAD_ERROR:case K.a.FRAG_LOAD_TIMEOUT:case K.a.KEY_LOAD_ERROR:case K.a.KEY_LOAD_TIMEOUT:if(s.frag){var A=this._levels[s.frag.level];A?(A.fragmentError++,A.fragmentError>this.hls.config.fragLoadingMaxRetry&&(h=s.frag.level)):h=s.frag.level}break;case K.a.LEVEL_LOAD_ERROR:case K.a.LEVEL_LOAD_TIMEOUT:o&&(o.deliveryDirectives&&(b=!1),h=o.level),m=!0;break;case K.a.REMUX_ALLOC_ERROR:h=s.level,m=!0}h!==void 0&&this.recoverLevel(s,h,m,b)}}},a.recoverLevel=function(t,s,o,d){var h=t.details,m=this._levels[s];if(m.loadError++,o){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(d){var b=m.url.length;if(b>1&&m.loadError<b)t.levelRetry=!0,this.redundantFailover(s);else if(this.manualLevelIndex===-1){var A=s===0?this._levels.length-1:s-1;this.currentLevelIndex!==A&&this._levels[A].loadError===0&&(this.warn(h+": switch to "+A),t.levelRetry=!0,this.hls.nextAutoLevel=A)}}},a.redundantFailover=function(t){var s=this._levels[t],o=s.url.length;if(o>1){var d=(s.urlId+1)%o;this.warn("Switching to redundant URL-id "+d),this._levels.forEach(function(h){h.urlId=d}),this.level=t}},a.onFragLoaded=function(t,s){var o=s.frag;if(o!==void 0&&o.type===ee.b.MAIN){var d=this._levels[o.level];d!==void 0&&(d.fragmentError=0,d.loadError=0)}},a.onLevelLoaded=function(t,s){var o,d,h=s.level,m=s.details,b=this._levels[h];if(!b)return this.warn("Invalid level index "+h),void((d=s.deliveryDirectives)!==null&&d!==void 0&&d.skip&&(m.deltaUpdateFailed=!0));h===this.currentLevelIndex?(b.fragmentError===0&&(b.loadError=0,this.retryCount=0),this.playlistLoaded(h,s,b.details)):(o=s.deliveryDirectives)!==null&&o!==void 0&&o.skip&&(m.deltaUpdateFailed=!0)},a.onAudioTrackSwitched=function(t,s){var o=this.hls.levels[this.currentLevelIndex];if(o&&o.audioGroupIds){for(var d=-1,h=this.hls.audioTracks[s.id].groupId,m=0;m<o.audioGroupIds.length;m++)if(o.audioGroupIds[m]===h){d=m;break}d!==o.urlId&&(o.urlId=d,this.startLoad())}},a.loadPlaylist=function(t){var s=this.currentLevelIndex,o=this._levels[s];if(this.canLoad&&o&&o.url.length>0){var d=o.urlId,h=o.url[d];if(t)try{h=t.addDirectives(h)}catch(m){this.warn("Could not construct new URL with HLS Delivery Directives: "+m)}this.log("Attempt loading level index "+s+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+d+" "+h),this.clearTimer(),this.hls.trigger(c.a.LEVEL_LOADING,{url:h,level:s,id:d,deliveryDirectives:t||null})}},a.removeLevel=function(t,s){var o=function(h,m){return m!==s},d=this._levels.filter(function(h,m){return m!==t||h.url.length>1&&s!==void 0&&(h.url=h.url.filter(o),h.audioGroupIds&&(h.audioGroupIds=h.audioGroupIds.filter(o)),h.textGroupIds&&(h.textGroupIds=h.textGroupIds.filter(o)),h.urlId=0,!0)}).map(function(h,m){var b=h.details;return b!=null&&b.fragments&&b.fragments.forEach(function(A){A.level=m}),h});this._levels=d,this.hls.trigger(c.a.LEVELS_UPDATED,{levels:d})},i=r,(n=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var s,o=this._levels;if(o.length!==0&&(this.currentLevelIndex!==t||(s=o[t])===null||s===void 0||!s.details)){if(t<0||t>=o.length){var d=t<0;if(this.hls.trigger(c.a.ERROR,{type:K.b.OTHER_ERROR,details:K.a.LEVEL_SWITCH_ERROR,level:t,fatal:d,reason:"invalid level idx"}),d)return;t=Math.min(t,o.length-1)}this.clearTimer();var h=this.currentLevelIndex,m=o[h],b=o[t];this.log("switching to level "+t+" from "+h),this.currentLevelIndex=t;var A=pr({},b,{level:t,maxBitrate:b.maxBitrate,uri:b.uri,urlId:b.urlId});delete A._urlId,this.hls.trigger(c.a.LEVEL_SWITCHING,A);var F=b.details;if(!F||F.live){var j=this.switchParams(b.uri,m?.details);this.loadPlaylist(j)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var t=this.hls.config.startLevel;return t!==void 0?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}])&&mr(i.prototype,n),r}(gr);(function(p){p.NOT_LOADED="NOT_LOADED",p.BACKTRACKED="BACKTRACKED",p.APPENDING="APPENDING",p.PARTIAL="PARTIAL",p.OK="OK"})(je||(je={}));var Je=function(){function p(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var u=p.prototype;return u._registerListeners=function(){var e=this.hls;e.on(c.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(c.a.FRAG_LOADED,this.onFragLoaded,this)},u._unregisterListeners=function(){var e=this.hls;e.off(c.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(c.a.FRAG_LOADED,this.onFragLoaded,this)},u.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},u.getAppendedFrag=function(e,r){if(r===ee.b.MAIN){var i=this.activeFragment,n=this.activeParts;if(!i)return null;if(n)for(var a=n.length;a--;){var t=n[a],s=t?t.end:i.appendedPTS;if(t.start<=e&&s!==void 0&&e<=s)return a>9&&(this.activeParts=n.slice(a-9)),t}else if(i.start<=e&&i.appendedPTS!==void 0&&e<=i.appendedPTS)return i}return this.getBufferedFrag(e,r)},u.getBufferedFrag=function(e,r){for(var i=this.fragments,n=Object.keys(i),a=n.length;a--;){var t=i[n[a]];if(t?.body.type===r&&t.buffered){var s=t.body;if(s.start<=e&&e<=s.end)return s}}return null},u.detectEvictedFragments=function(e,r,i){var n=this;Object.keys(this.fragments).forEach(function(a){var t=n.fragments[a];if(t)if(t.buffered){var s=t.range[e];s&&s.time.some(function(o){var d=!n.isTimeBuffered(o.startPTS,o.endPTS,r);return d&&n.removeFragment(t.body),d})}else t.body.type===i&&n.removeFragment(t.body)})},u.detectPartialFragments=function(e){var r=this,i=this.timeRanges,n=e.frag,a=e.part;if(i&&n.sn!=="initSegment"){var t=gt(n),s=this.fragments[t];s&&(Object.keys(i).forEach(function(o){var d=n.elementaryStreams[o];if(d){var h=i[o],m=a!==null||d.partial===!0;s.range[o]=r.getBufferedTimes(n,a,m,h)}}),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},u.fragBuffered=function(e){var r=gt(e),i=this.fragments[r];i&&(i.backtrack=i.loaded=null,i.buffered=!0)},u.getBufferedTimes=function(e,r,i,n){for(var a={time:[],partial:i},t=r?r.start:e.start,s=r?r.end:e.end,o=e.minEndPTS||s,d=e.maxStartPTS||t,h=0;h<n.length;h++){var m=n.start(h)-this.bufferPadding,b=n.end(h)+this.bufferPadding;if(d>=m&&o<=b){a.time.push({startPTS:Math.max(t,n.start(h)),endPTS:Math.min(s,n.end(h))});break}if(t<b&&s>m)a.partial=!0,a.time.push({startPTS:Math.max(t,n.start(h)),endPTS:Math.min(s,n.end(h))});else if(s<=m)break}return a},u.getPartialFragment=function(e){var r,i,n,a=null,t=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach(function(d){var h=o[d];h&&bt(h)&&(i=h.body.start-s,n=h.body.end+s,e>=i&&e<=n&&(r=Math.min(e-i,n-e),t<=r&&(a=h.body,t=r)))}),a},u.getState=function(e){var r=gt(e),i=this.fragments[r];return i?i.buffered?bt(i)?je.PARTIAL:je.OK:i.backtrack?je.BACKTRACKED:je.APPENDING:je.NOT_LOADED},u.backtrack=function(e,r){var i=gt(e),n=this.fragments[i];if(!n||n.backtrack)return null;var a=n.backtrack=r||n.loaded;return n.loaded=null,a},u.getBacktrackData=function(e){var r=gt(e),i=this.fragments[r];if(i){var n,a=i.backtrack;if(a!=null&&(n=a.payload)!==null&&n!==void 0&&n.byteLength)return a;this.removeFragment(e)}return null},u.isTimeBuffered=function(e,r,i){for(var n,a,t=0;t<i.length;t++){if(n=i.start(t)-this.bufferPadding,a=i.end(t)+this.bufferPadding,e>=n&&r<=a)return!0;if(r<=n)return!1}return!1},u.onFragLoaded=function(e,r){var i=r.frag,n=r.part;if(i.sn!=="initSegment"&&!i.bitrateTest&&!n){var a=gt(i);this.fragments[a]={body:i,loaded:r,backtrack:null,buffered:!1,range:Object.create(null)}}},u.onBufferAppended=function(e,r){var i=this,n=r.frag,a=r.part,t=r.timeRanges;if(n.type===ee.b.MAIN)if(this.activeFragment=n,a){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(a)}else this.activeParts=null;this.timeRanges=t,Object.keys(t).forEach(function(o){var d=t[o];if(i.detectEvictedFragments(o,d),!a)for(var h=0;h<d.length;h++)n.appendedPTS=Math.max(d.end(h),n.appendedPTS||0)})},u.onFragBuffered=function(e,r){this.detectPartialFragments(r)},u.hasFragment=function(e){var r=gt(e);return!!this.fragments[r]},u.removeFragmentsInRange=function(e,r,i){var n=this;Object.keys(this.fragments).forEach(function(a){var t=n.fragments[a];if(t&&t.buffered){var s=t.body;s.type===i&&s.start<r&&s.end>e&&n.removeFragment(s)}})},u.removeFragment=function(e){var r=gt(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[r]},u.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},p}();function bt(p){var u,e;return p.buffered&&(((u=p.range.video)===null||u===void 0?void 0:u.partial)||((e=p.range.audio)===null||e===void 0?void 0:e.partial))}function gt(p){return p.type+"_"+p.level+"_"+p.urlId+"_"+p.sn}var Mr=function(){function p(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var u=p.prototype;return u.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},u.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},u.onHandlerDestroyed=function(){},u.hasInterval=function(){return!!this._tickInterval},u.hasNextTick=function(){return!!this._tickTimer},u.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},u.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},u.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},u.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},u.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},u.doTick=function(){},p}(),Et={length:0,start:function(){return 0},end:function(){return 0}},Me=function(){function p(){}return p.isBuffered=function(u,e){try{if(u){for(var r=p.getBuffered(u),i=0;i<r.length;i++)if(e>=r.start(i)&&e<=r.end(i))return!0}}catch{}return!1},p.bufferInfo=function(u,e,r){try{if(u){var i,n=p.getBuffered(u),a=[];for(i=0;i<n.length;i++)a.push({start:n.start(i),end:n.end(i)});return this.bufferedInfo(a,e,r)}}catch{}return{len:0,start:e,end:e,nextStart:void 0}},p.bufferedInfo=function(u,e,r){e=Math.max(0,e),u.sort(function(F,j){var B=F.start-j.start;return B||j.end-F.end});var i=[];if(r)for(var n=0;n<u.length;n++){var a=i.length;if(a){var t=i[a-1].end;u[n].start-t<r?u[n].end>t&&(i[a-1].end=u[n].end):i.push(u[n])}else i.push(u[n])}else i=u;for(var s,o=0,d=e,h=e,m=0;m<i.length;m++){var b=i[m].start,A=i[m].end;if(e+r>=b&&e<A)d=b,o=(h=A)-e;else if(e+r<b){s=b;break}}return{len:o,start:d||0,end:h||0,nextStart:s}},p.getBuffered=function(u){try{return u.buffered}catch(e){return I.b.log("failed to get media.buffered",e),Et}},p}(),Tt=function(p,u,e,r,i,n){r===void 0&&(r=0),i===void 0&&(i=-1),n===void 0&&(n=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=p,this.sn=u,this.id=e,this.size=r,this.part=i,this.partial=n};function wt(p,u){if(p){var e=p.start+u;p.start=p.startPTS=e,p.endPTS=e+p.duration}}function Zt(p,u){for(var e=u.fragments,r=0,i=e.length;r<i;r++)wt(e[r],p);u.fragmentHint&&wt(u.fragmentHint,p),u.alignedSliding=!0}function er(p,u,e){u&&(function(r,i,n){if(function(t,s,o){return!(!s.details||!(o.endCC>o.startCC||t&&t.cc<o.startCC))}(r,n,i)){var a=function(t,s){var o=t.fragments,d=s.fragments;if(d.length&&o.length){var h=function(m,b){for(var A=null,F=0,j=m.length;F<j;F++){var B=m[F];if(B&&B.cc===b){A=B;break}}return A}(o,d[0].cc);if(h&&(!h||h.startPTS))return h;I.b.log("No frag in previous level to align on")}else I.b.log("No fragments to align")}(n.details,i);a&&Object(E.a)(a.start)&&(I.b.log("Adjusting PTS using last level due to CC increase within current level "+i.url),Zt(a.start,i))}}(p,e,u),!e.alignedSliding&&u.details&&function(r,i){if(!(!i.fragments.length||!r.hasProgramDateTime||!i.hasProgramDateTime)){var n=i.fragments[0].programDateTime,a=r.fragments[0].programDateTime,t=(a-n)/1e3+i.fragments[0].start;t&&Object(E.a)(t)&&(I.b.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+t.toFixed(3)+" "+r.url+" "),Zt(t,r))}}(e,u.details),e.alignedSliding||!u.details||e.skippedSegments||Qt(u.details,e))}var Ze={search:function(p,u){for(var e=0,r=p.length-1,i=null,n=null;e<=r;){var a=u(n=p[i=(e+r)/2|0]);if(a>0)e=i+1;else{if(!(a<0))return n;r=i-1}}return null}};function tr(p,u,e){p===void 0&&(p=0),u===void 0&&(u=0);var r=Math.min(u,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-r<=p?1:e.start-r>p&&e.start?-1:0}function Nr(p,u,e){var r=1e3*Math.min(u,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-r>p}function Gt(p){var u=typeof Map=="function"?new Map:void 0;return(Gt=function(e){if(e===null||(r=e,Function.toString.call(r).indexOf("[native code]")===-1))return e;var r;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(e))return u.get(e);u.set(e,i)}function i(){return br(e,arguments,lt(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ct(i,e)})(p)}function br(p,u,e){return(br=Br()?Reflect.construct:function(r,i,n){var a=[null];a.push.apply(a,i);var t=new(Function.bind.apply(r,a));return n&&Ct(t,n.prototype),t}).apply(null,arguments)}function Br(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ct(p,u){return(Ct=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}function lt(p){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(p)}var rr=Math.pow(2,17),Ur=function(){function p(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var u=p.prototype;return u.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},u.abort=function(){this.loader&&this.loader.abort()},u.load=function(e,r){var i=this,n=e.url;if(!n)return Promise.reject(new ut({type:K.b.NETWORK_ERROR,details:K.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(n?"part list":"url")));this.abort();var a=this.config,t=a.fLoader,s=a.loader;return new Promise(function(o,d){i.loader&&i.loader.destroy();var h=i.loader=e.loader=t?new t(a):new s(a),m=Ot(e),b={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:rr};e.stats=h.stats,h.load(m,b,{onSuccess:function(A,F,j,B){i.resetLoader(e,h),o({frag:e,part:null,payload:A.data,networkDetails:B})},onError:function(A,F,j){i.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:A,networkDetails:j}))},onAbort:function(A,F,j){i.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:j}))},onTimeout:function(A,F,j){i.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:j}))},onProgress:function(A,F,j,B){r&&r({frag:e,part:null,payload:j,networkDetails:B})}})})},u.loadPart=function(e,r,i){var n=this;this.abort();var a=this.config,t=a.fLoader,s=a.loader;return new Promise(function(o,d){n.loader&&n.loader.destroy();var h=n.loader=e.loader=t?new t(a):new s(a),m=Ot(e,r),b={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:rr};r.stats=h.stats,h.load(m,b,{onSuccess:function(A,F,j,B){n.resetLoader(e,h),n.updateStatsFromPart(e,r);var he={frag:e,part:r,payload:A.data,networkDetails:B};i(he),o(he)},onError:function(A,F,j){n.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:A,networkDetails:j}))},onAbort:function(A,F,j){e.stats.aborted=r.stats.aborted,n.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,networkDetails:j}))},onTimeout:function(A,F,j){n.resetLoader(e,h),d(new ut({type:K.b.NETWORK_ERROR,details:K.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,networkDetails:j}))}})})},u.updateStatsFromPart=function(e,r){var i=e.stats,n=r.stats,a=n.total;if(i.loaded+=n.loaded,a){var t=Math.round(e.duration/r.duration),s=Math.min(Math.round(i.loaded/a),t),o=(t-s)*Math.round(i.loaded/s);i.total=i.loaded+o}else i.total=Math.max(i.loaded,i.total);var d=i.loading,h=n.loading;d.start?d.first+=h.first-h.start:(d.start=h.start,d.first=h.first),d.end=h.end},u.resetLoader=function(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()},p}();function Ot(p,u){u===void 0&&(u=null);var e=u||p,r={frag:p,part:u,responseType:"arraybuffer",url:e.url,headers:{},rangeStart:0,rangeEnd:0},i=e.byteRangeStartOffset,n=e.byteRangeEndOffset;return Object(E.a)(i)&&Object(E.a)(n)&&(r.rangeStart=i,r.rangeEnd=n),r}var ut=function(p){var u,e;function r(i){for(var n,a=arguments.length,t=new Array(a>1?a-1:0),s=1;s<a;s++)t[s-1]=arguments[s];return(n=p.call.apply(p,[this].concat(t))||this).data=void 0,n.data=i,n}return e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Ct(u,e),r}(Gt(Error)),Gr=S(14),Er={toString:function(p){for(var u="",e=p.length,r=0;r<e;r++)u+="["+p.start(r).toFixed(3)+","+p.end(r).toFixed(3)+"]";return u}};function Tr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function Sr(p,u){return(Sr=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var It="STOPPED",f="IDLE",v="KEY_LOADING",l="FRAG_LOADING",g="FRAG_LOADING_WAITING_RETRY",y="PARSING",L="PARSED",T="BACKTRACKING",x="ENDED",N="ERROR",W="WAITING_LEVEL",G=function(p){var u,e;function r(t,s,o){var d;return(d=p.call(this)||this).hls=void 0,d.fragPrevious=null,d.fragCurrent=null,d.fragmentTracker=void 0,d.transmuxer=null,d._state=It,d.media=void 0,d.mediaBuffer=void 0,d.config=void 0,d.bitrateTest=!1,d.lastCurrentTime=0,d.nextLoadPosition=0,d.startPosition=0,d.loadedmetadata=!1,d.fragLoadError=0,d.retryDate=0,d.levels=null,d.fragmentLoader=void 0,d.levelLastLoaded=null,d.startFragRequested=!1,d.decrypter=void 0,d.initPTS=[],d.onvseeking=null,d.onvended=null,d.logPrefix="",d.log=void 0,d.warn=void 0,d.logPrefix=o,d.log=I.b.log.bind(I.b,o+":"),d.warn=I.b.warn.bind(I.b,o+":"),d.hls=t,d.fragmentLoader=new Ur(t.config),d.fragmentTracker=s,d.config=t.config,d.decrypter=new Gr.a(t,t.config),t.on(c.a.KEY_LOADED,d.onKeyLoaded,function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(d)),d}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Sr(u,e);var i,n,a=r.prototype;return a.doTick=function(){this.onTickEnd()},a.onTickEnd=function(){},a.startLoad=function(t){},a.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=It},a._streamEnded=function(t,s){var o=this.fragCurrent,d=this.fragmentTracker;if(!s.live&&o&&o.sn>=s.endSN&&!t.nextStart){var h=s.partList;if(h!=null&&h.length){var m=h[h.length-1];return Me.isBuffered(this.media,m.start+m.duration/2)}var b=d.getState(o);return b===je.PARTIAL||b===je.OK}return!1},a.onMediaAttached=function(t,s){var o=this.media=this.mediaBuffer=s.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),o.addEventListener("seeking",this.onvseeking),o.addEventListener("ended",this.onvended);var d=this.config;this.levels&&d.autoStartLoad&&this.state===It&&this.startLoad(d.startPosition)},a.onMediaDetaching=function(){var t=this.media;t!=null&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},a.onMediaSeeking=function(){var t=this.config,s=this.fragCurrent,o=this.media,d=this.mediaBuffer,h=this.state,m=o?o.currentTime:0,b=Me.bufferInfo(d||o,m,t.maxBufferHole);if(this.log("media seeking to "+(Object(E.a)(m)?m.toFixed(3):m)+", state: "+h),h===x)this.resetLoadingState();else if(s&&!b.len){var A=t.maxFragLookUpTolerance,F=s.start-A,j=m>s.start+s.duration+A;(m<F||j)&&(j&&s.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.resetLoadingState())}o&&(this.lastCurrentTime=m),this.loadedmetadata||b.len||(this.nextLoadPosition=this.startPosition=m),this.tickImmediate()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onKeyLoaded=function(t,s){if(this.state===v&&s.frag===this.fragCurrent&&this.levels){this.state=f;var o=this.levels[s.frag.level].details;o&&this.loadFragment(s.frag,o,s.frag.start)}},a.onHandlerDestroying=function(){this.stopLoad(),p.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=It,this.hls.off(c.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,p.prototype.onHandlerDestroyed.call(this)},a.loadKey=function(t,s){this.log("Loading key for "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+t.level),this.state=v,this.fragCurrent=t,this.hls.trigger(c.a.KEY_LOADING,{frag:t})},a.loadFragment=function(t,s,o){this._loadFragForPlayback(t,s,o)},a._loadFragForPlayback=function(t,s,o){var d=this;this._doFragLoad(t,s,o,function(h){if(d.fragContextChanged(t))return d.warn("Fragment "+t.sn+(h.part?" p: "+h.part.index:"")+" of level "+t.level+" was dropped during download."),void d.fragmentTracker.removeFragment(t);t.stats.chunkCount++,d._handleFragmentLoadProgress(h)}).then(function(h){if(h){d.fragLoadError=0;var m=d.state;if(!d.fragContextChanged(t))return"payload"in h&&(d.log("Loaded fragment "+t.sn+" of level "+t.level),d.hls.trigger(c.a.FRAG_LOADED,h),d.state===T)?(d.fragmentTracker.backtrack(t,h),void d.resetFragmentLoading(t)):void d._handleFragmentLoadComplete(h);(m===l||m===T||!d.fragCurrent&&m===y)&&(d.fragmentTracker.removeFragment(t),d.state=f)}}).catch(function(h){d.warn(h),d.resetFragmentLoading(t)})},a.flushMainBuffer=function(t,s,o){if(o===void 0&&(o=null),t-s){var d={startOffset:t,endOffset:s,type:o};this.fragLoadError=0,this.hls.trigger(c.a.BUFFER_FLUSHING,d)}},a._loadInitSegment=function(t){var s=this;this._doFragLoad(t).then(function(o){if(!o||s.fragContextChanged(t)||!s.levels)throw new Error("init load aborted");return o}).then(function(o){var d=s.hls,h=o.payload,m=t.decryptdata;if(h&&h.byteLength>0&&m&&m.key&&m.iv&&m.method==="AES-128"){var b=self.performance.now();return s.decrypter.webCryptoDecrypt(new Uint8Array(h),m.key.buffer,m.iv.buffer).then(function(A){var F=self.performance.now();return d.trigger(c.a.FRAG_DECRYPTED,{frag:t,payload:A,stats:{tstart:b,tdecrypt:F}}),o.payload=A,o})}return o}).then(function(o){var d=s.fragCurrent,h=s.hls,m=s.levels;if(!m)throw new Error("init load aborted, missing levels");m[t.level].details;var b=t.stats;s.state=f,s.fragLoadError=0,t.data=new Uint8Array(o.payload),b.parsing.start=b.buffering.start=self.performance.now(),b.parsing.end=b.buffering.end=self.performance.now(),o.frag===d&&h.trigger(c.a.FRAG_BUFFERED,{stats:b,frag:d,part:null,id:t.type}),s.tick()}).catch(function(o){s.warn(o),s.resetFragmentLoading(t)})},a.fragContextChanged=function(t){var s=this.fragCurrent;return!t||!s||t.level!==s.level||t.sn!==s.sn||t.urlId!==s.urlId},a.fragBufferedComplete=function(t,s){var o=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(s?" part: "+s.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+t.level+" "+Er.toString(Me.getBuffered(o))),this.state=f,this.tick()},a._handleFragmentLoadComplete=function(t){var s=this.transmuxer;if(s){var o=t.frag,d=t.part,h=t.partsLoaded,m=!h||h.length===0||h.some(function(A){return!A}),b=new Tt(o.level,o.sn,o.stats.chunkCount+1,0,d?d.index:-1,!m);s.flush(b)}},a._handleFragmentLoadProgress=function(t){},a._doFragLoad=function(t,s,o,d){var h=this;if(o===void 0&&(o=null),!this.levels)throw new Error("frag load aborted, missing levels");if(o=Math.max(t.start,o||0),this.config.lowLatencyMode&&s){var m=s.partList;if(m&&d){o>t.end&&s.fragmentHint&&(t=s.fragmentHint);var b=this.getNextPart(m,t,o);if(b>-1){var A=m[b];return this.log("Loading part sn: "+t.sn+" p: "+A.index+" cc: "+t.cc+" of playlist ["+s.startSN+"-"+s.endSN+"] parts [0-"+b+"-"+(m.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(o.toFixed(3))),this.nextLoadPosition=A.start+A.duration,this.state=l,this.hls.trigger(c.a.FRAG_LOADING,{frag:t,part:m[b],targetBufferTime:o}),this.doFragPartsLoad(t,m,b,d).catch(function(F){return h.handleFragLoadError(F)})}if(!t.url||this.loadedEndOfParts(m,o))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(s?"of ["+s.startSN+"-"+s.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(o.toFixed(3))),Object(E.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=l,this.hls.trigger(c.a.FRAG_LOADING,{frag:t,targetBufferTime:o}),this.fragmentLoader.load(t,d).catch(function(F){return h.handleFragLoadError(F)})},a.doFragPartsLoad=function(t,s,o,d){var h=this;return new Promise(function(m,b){var A=[];(function F(j){var B=s[j];h.fragmentLoader.loadPart(t,B,d).then(function(he){A[B.index]=he;var le=he.part;h.hls.trigger(c.a.FRAG_LOADED,he);var se=s[j+1];if(!se||se.fragment!==t)return m({frag:t,part:le,partsLoaded:A});F(j+1)}).catch(b)})(o)})},a.handleFragLoadError=function(t){var s=t.data;return s&&s.details===K.a.INTERNAL_ABORTED?this.handleFragLoadAborted(s.frag,s.part):this.hls.trigger(c.a.ERROR,s),null},a._handleTransmuxerFlush=function(t){var s=this.getCurrentContext(t);if(s&&this.state===y){var o=s.frag,d=s.part,h=s.level,m=self.performance.now();o.stats.parsing.end=m,d&&(d.stats.parsing.end=m),this.updateLevelTiming(o,d,h,t.partial)}else this.fragCurrent||(this.state=f)},a.getCurrentContext=function(t){var s=this.levels,o=t.level,d=t.sn,h=t.part;if(!s||!s[o])return this.warn("Levels object was unset while buffering fragment "+d+" of level "+o+". The current chunk will not be buffered."),null;var m=s[o],b=h>-1?function(F,j,B){if(!F||!F.details)return null;var he=F.details.partList;if(he)for(var le=he.length;le--;){var se=he[le];if(se.index===B&&se.fragment.sn===j)return se}return null}(m,d,h):null,A=b?b.fragment:function(F,j,B){if(!F||!F.details)return null;var he=F.details,le=he.fragments[j-he.startSN];return le||((le=he.fragmentHint)&&le.sn===j?le:j<he.startSN&&B&&B.sn===j?B:null)}(m,d,this.fragCurrent);return A?{frag:A,part:b,level:m}:null},a.bufferFragmentData=function(t,s,o,d){if(t&&this.state===y){var h=t.data1,m=t.data2,b=h;if(h&&m&&(b=Object(X.a)(h,m)),b&&b.length){var A={type:t.type,frag:s,part:o,chunkMeta:d,parent:s.type,data:b};this.hls.trigger(c.a.BUFFER_APPENDING,A),t.dropped&&t.independent&&!o&&this.flushBufferGap(s)}}},a.flushBufferGap=function(t){var s=this.media;if(s)if(Me.isBuffered(s,s.currentTime)){var o=s.currentTime,d=Me.bufferInfo(s,o,0),h=t.duration,m=Math.min(2*this.config.maxFragLookUpTolerance,.25*h),b=Math.max(Math.min(t.start-m,d.end-m),o+m);t.start-b>m&&this.flushMainBuffer(b,t.start)}else this.flushMainBuffer(0,t.start)},a.getFwdBufferInfo=function(t,s){var o=this.config,d=this.getLoadPosition();if(!Object(E.a)(d))return null;var h=Me.bufferInfo(t,d,o.maxBufferHole);if(h.len===0&&h.nextStart!==void 0){var m=this.fragmentTracker.getBufferedFrag(d,s);if(m&&h.nextStart<m.end)return Me.bufferInfo(t,d,Math.max(h.nextStart,o.maxBufferHole))}return h},a.getMaxBufferLength=function(t){var s,o=this.config;return s=t?Math.max(8*o.maxBufferSize/t,o.maxBufferLength):o.maxBufferLength,Math.min(s,o.maxMaxBufferLength)},a.reduceMaxBufferLength=function(t){var s=this.config,o=t||s.maxBufferLength;return s.maxMaxBufferLength>=o&&(s.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+s.maxMaxBufferLength+"s"),!0)},a.getNextFragment=function(t,s){var o,d,h=s.fragments,m=h.length;if(!m)return null;var b,A=this.config,F=h[0].start;if(s.live){var j=A.initialLiveManifestSize;if(m<j)return this.warn("Not enough fragments to start playback (have: "+m+", need: "+j+")"),null;s.PTSKnown||this.startFragRequested||this.startPosition!==-1||(b=this.getInitialLiveFragment(s,h),this.startPosition=b?this.hls.liveSyncPosition||b.start:t)}else t<=F&&(b=h[0]);if(!b){var B=A.lowLatencyMode?s.partEnd:s.fragmentEnd;b=this.getFragmentAtPosition(t,B,s)}return(o=b)===null||o===void 0||!o.initSegment||(d=b)!==null&&d!==void 0&&d.initSegment.data||this.bitrateTest||(b=b.initSegment),b},a.getNextPart=function(t,s,o){for(var d=-1,h=!1,m=!0,b=0,A=t.length;b<A;b++){var F=t[b];if(m=m&&!F.independent,d>-1&&o<F.start)break;var j=F.loaded;!j&&(h||F.independent||m)&&F.fragment===s&&(d=b),h=j}return d},a.loadedEndOfParts=function(t,s){var o=t[t.length-1];return o&&s>o.start&&o.loaded},a.getInitialLiveFragment=function(t,s){var o=this.fragPrevious,d=null;if(o){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),d=function(A,F,j){if(F===null||!Array.isArray(A)||!A.length||!Object(E.a)(F)||F<(A[0].programDateTime||0)||F>=(A[A.length-1].endProgramDateTime||0))return null;j=j||0;for(var B=0;B<A.length;++B){var he=A[B];if(Nr(F,j,he))return he}return null}(s,o.endProgramDateTime,this.config.maxFragLookUpTolerance)),!d){var h=o.sn+1;if(h>=t.startSN&&h<=t.endSN){var m=s[h-t.startSN];o.cc===m.cc&&(d=m,this.log("Live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=function(A,F){return Ze.search(A,function(j){return j.cc<F?1:j.cc>F?-1:0})}(s,o.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+d.sn)}}else{var b=this.hls.liveSyncPosition;b!==null&&(d=this.getFragmentAtPosition(b,this.bitrateTest?t.fragmentEnd:t.edge,t))}return d},a.getFragmentAtPosition=function(t,s,o){var d,h=this.config,m=this.fragPrevious,b=o.fragments,A=o.endSN,F=o.fragmentHint,j=h.maxFragLookUpTolerance,B=!!(h.lowLatencyMode&&o.partList&&F);if(B&&F&&!this.bitrateTest&&(b=b.concat(F),A=F.sn),t<s?d=function(pe,Te,ge,Pe){ge===void 0&&(ge=0),Pe===void 0&&(Pe=0);var He=null;if(pe?He=Te[pe.sn-Te[0].sn+1]||null:ge===0&&Te[0].start===0&&(He=Te[0]),He&&tr(ge,Pe,He)===0)return He;var qe=Ze.search(Te,tr.bind(null,ge,Pe));return qe||He}(m,b,t,t>s-j?0:j):d=b[b.length-1],d){var he=d.sn-o.startSN,le=m&&d.level===m.level,se=b[he+1];if(this.fragmentTracker.getState(d)===je.BACKTRACKED){d=null;for(var oe=he;b[oe]&&this.fragmentTracker.getState(b[oe])===je.BACKTRACKED;)d=m?b[oe--]:b[--oe];d||(d=se)}else m&&d.sn===m.sn&&!B&&le&&(d.sn<A&&this.fragmentTracker.getState(se)!==je.OK?(this.log("SN "+d.sn+" just loaded, load next one: "+se.sn),d=se):d=null)}return d},a.synchronizeToLiveEdge=function(t){var s=this.config,o=this.media;if(o){var d=this.hls.liveSyncPosition,h=o.currentTime,m=t.fragments[0].start,b=t.edge,A=h>=m-s.maxFragLookUpTolerance&&h<=b;if(d!==null&&o.duration>d&&(h<d||!A)){var F=s.liveMaxLatencyDuration!==void 0?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;(!A&&o.readyState<4||h<b-F)&&(this.loadedmetadata||(this.nextLoadPosition=d),o.readyState&&(this.warn("Playback: "+h.toFixed(3)+" is located too far from the end of live sliding playlist: "+b+", reset currentTime to : "+d.toFixed(3)),o.currentTime=d))}}},a.alignPlaylists=function(t,s){var o=this.levels,d=this.levelLastLoaded,h=this.fragPrevious,m=d!==null?o[d]:null,b=t.fragments.length;if(!b)return this.warn("No fragments in live playlist"),0;var A=t.fragments[0].start,F=!s,j=t.alignedSliding&&Object(E.a)(A);if(F||!j&&!A){er(h,m,t);var B=t.fragments[0].start;return this.log("Live playlist sliding: "+B.toFixed(2)+" start-sn: "+(s?s.startSN:"na")+"->"+t.startSN+" prev-sn: "+(h?h.sn:"na")+" fragments: "+b),B}return A},a.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},a.setStartPosition=function(t,s){var o=this.startPosition;if(o<s&&(o=-1),o===-1||this.lastCurrentTime===-1){var d=t.startTimeOffset;Object(E.a)(d)?(o=s+d,d<0&&(o+=t.totalduration),o=Math.min(Math.max(s,o),s+t.totalduration),this.log("Start time offset "+d+" found in playlist, adjust startPosition to "+o),this.startPosition=o):t.live?o=this.hls.liveSyncPosition||s:this.startPosition=o=0,this.lastCurrentTime=o}this.nextLoadPosition=o},a.getLoadPosition=function(){var t=this.media,s=0;return this.loadedmetadata&&t?s=t.currentTime:this.nextLoadPosition&&(s=this.nextLoadPosition),s},a.handleFragLoadAborted=function(t,s){this.transmuxer&&t.sn!=="initSegment"&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(s?" part"+s.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},a.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=f)},a.onFragmentOrKeyLoadError=function(t,s){if(!s.fatal){var o=s.frag;if(o&&o.type===t){this.fragCurrent;var d=this.config;if(this.fragLoadError+1<=d.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(o.level))return;var h=Math.min(Math.pow(2,this.fragLoadError)*d.fragLoadingRetryDelay,d.fragLoadingMaxRetryTimeout);this.warn("Fragment "+o.sn+" of "+t+" "+o.level+" failed to load, retrying in "+h+"ms"),this.retryDate=self.performance.now()+h,this.fragLoadError++,this.state=g}else s.levelRetry?(t===ee.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=f):(I.b.error(s.details+" reaches max retry, redispatch as fatal ..."),s.fatal=!0,this.hls.stopLoad(),this.state=N)}}},a.afterBufferFlushed=function(t,s,o){if(t){var d=Me.getBuffered(t);this.fragmentTracker.detectEvictedFragments(s,d,o),this.state===x&&this.resetLoadingState()}},a.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=f},a.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var s=this.levels?this.levels[t].details:null;if(s!=null&&s.live)return this.startPosition=-1,this.setStartPosition(s,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},a.updateLevelTiming=function(t,s,o,d){var h=this,m=o.details;Object.keys(t.elementaryStreams).reduce(function(b,A){var F=t.elementaryStreams[A];if(F){var j=F.endPTS-F.startPTS;if(j<=0)return h.warn("Could not parse fragment "+t.sn+" "+A+" duration reliably ("+j+") resetting transmuxer to fallback to playlist timing"),h.resetTransmuxer(),b||!1;var B=d?0:We(m,t,F.startPTS,F.endPTS,F.startDTS,F.endDTS);return h.hls.trigger(c.a.LEVEL_PTS_UPDATED,{details:m,level:o,drift:B,type:A,frag:t,start:F.startPTS,end:F.endPTS}),!0}return b},!1)?(this.state=L,this.hls.trigger(c.a.FRAG_PARSED,{frag:t,part:s})):this.resetLoadingState()},a.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},i=r,(n=[{key:"state",get:function(){return this._state},set:function(t){var s=this._state;s!==t&&(this._state=t,this.log(s+"->"+t))}}])&&Tr(i.prototype,n),r}(Mr);function $(){return self.MediaSource||self.WebKitMediaSource}function te(){return self.SourceBuffer||self.WebKitSourceBuffer}var re=S(17),ie=S(9),ve=S(13),me=$()||{isTypeSupported:function(){return!1}},ce=function(){function p(e,r,i,n){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=r,this.onTransmuxComplete=i,this.onFlush=n;var t=e.config,s=function(m,b){(b=b||{}).frag=a.frag,b.id=a.id,e.trigger(m,b)};this.observer=new ve.EventEmitter,this.observer.on(c.a.FRAG_DECRYPTED,s),this.observer.on(c.a.ERROR,s);var o={mp4:me.isTypeSupported("video/mp4"),mpeg:me.isTypeSupported("audio/mpeg"),mp3:me.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(t.enableWorker&&typeof Worker<"u"){var h;I.b.log("demuxing in webworker");try{h=this.worker=re(18),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(m){e.trigger(c.a.ERROR,{type:K.b.OTHER_ERROR,details:K.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(m.message+"  ("+m.filename+":"+m.lineno+")")})},h.postMessage({cmd:"init",typeSupported:o,vendor:d,id:r,config:JSON.stringify(t)})}catch(m){I.b.warn("Error in worker:",m),I.b.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new ie.c(this.observer,o,t,d,r),this.worker=null}}else this.transmuxer=new ie.c(this.observer,o,t,d,r)}var u=p.prototype;return u.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}var i=this.observer;i&&i.removeAllListeners(),this.observer=null},u.push=function(e,r,i,n,a,t,s,o,d,h){var m,b,A=this;d.transmuxing.start=self.performance.now();var F=this.transmuxer,j=this.worker,B=t?t.start:a.start,he=a.decryptdata,le=this.frag,se=!(le&&a.cc===le.cc),oe=!(le&&d.level===le.level),pe=le?d.sn-le.sn:-1,Te=this.part?d.part-this.part.index:1,ge=!oe&&(pe===1||pe===0&&Te===1),Pe=self.performance.now();(oe||pe||a.stats.parsing.start===0)&&(a.stats.parsing.start=Pe),!t||!Te&&ge||(t.stats.parsing.start=Pe);var He=!(le&&((m=a.initSegment)===null||m===void 0?void 0:m.url)===((b=le.initSegment)===null||b===void 0?void 0:b.url)),qe=new ie.b(se,ge,o,oe,B,He);if(!ge||se||He){I.b.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+d.sn+" p: "+d.part+" level: "+d.level+" id: "+d.id+`
        discontinuity: `+se+`
        trackSwitch: `+oe+`
        contiguous: `+ge+`
        accurateTimeOffset: `+o+`
        timeOffset: `+B+`
        initSegmentChange: `+He);var Rt=new ie.a(i,n,r,s,h);this.configureTransmuxer(Rt)}if(this.frag=a,this.part=t,j)j.postMessage({cmd:"demux",data:e,decryptdata:he,chunkMeta:d,state:qe},e instanceof ArrayBuffer?[e]:[]);else if(F){var it=F.push(e,he,d,qe);Object(ie.d)(it)?it.then(function(nt){A.handleTransmuxComplete(nt)}):this.handleTransmuxComplete(it)}},u.flush=function(e){var r=this;e.transmuxing.start=self.performance.now();var i=this.transmuxer,n=this.worker;if(n)n.postMessage({cmd:"flush",chunkMeta:e});else if(i){var a=i.flush(e);Object(ie.d)(a)?a.then(function(t){r.handleFlushResult(t,e)}):this.handleFlushResult(a,e)}},u.handleFlushResult=function(e,r){var i=this;e.forEach(function(n){i.handleTransmuxComplete(n)}),this.onFlush(r)},u.onWorkerMessage=function(e){var r=e.data,i=this.hls;switch(r.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(r.data);break;case"flush":this.onFlush(r.data);break;default:r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,i.trigger(r.event,r.data)}},u.configureTransmuxer=function(e){var r=this.worker,i=this.transmuxer;r?r.postMessage({cmd:"configure",config:e}):i&&i.configure(e)},u.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},p}(),Re=function(){function p(e,r,i,n){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=r,this.fragmentTracker=i,this.hls=n}var u=p.prototype;return u.destroy=function(){this.hls=this.fragmentTracker=this.media=null},u.poll=function(e){var r=this.config,i=this.media,n=this.stalled,a=i.currentTime,t=i.seeking,s=this.seeking&&!t,o=!this.seeking&&t;if(this.seeking=t,a===e){if((o||s)&&(this.stalled=null),!i.paused&&!i.ended&&i.playbackRate!==0&&Me.getBuffered(i).length){var d=Me.bufferInfo(i,a,0),h=d.len>0,m=d.nextStart||0;if(h||m){if(t){var b=d.len>2,A=!m||m-a>2&&!this.fragmentTracker.getPartialFragment(a);if(b||A)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var F,j=Math.max(m,d.start||0)-a,B=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,he=!(B==null||(F=B.details)===null||F===void 0)&&F.live?2*B.details.targetduration:2;if(j>0&&j<=he)return void this._trySkipBufferHole(null)}var le=self.performance.now();if(n!==null){var se=le-n;!t&&se>=250&&this._reportStall(d.len);var oe=Me.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(oe,se)}else this.stalled=le}}}else if(this.moved=!0,n!==null){if(this.stallReported){var pe=self.performance.now()-n;I.b.warn("playback not stuck anymore @"+a+", after "+Math.round(pe)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},u._tryFixBufferStall=function(e,r){var i=this.config,n=this.fragmentTracker,a=this.media.currentTime,t=n.getPartialFragment(a);t&&this._trySkipBufferHole(t)||e.len>i.maxBufferHole&&r>1e3*i.highBufferWatchdogPeriod&&(I.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},u._reportStall=function(e){var r=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,I.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer (buffer="+e+")"),r.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},u._trySkipBufferHole=function(e){for(var r=this.config,i=this.hls,n=this.media,a=n.currentTime,t=0,s=Me.getBuffered(n),o=0;o<s.length;o++){var d=s.start(o);if(a+r.maxBufferHole>=t&&a<d){var h=Math.max(d+.05,n.currentTime+.1);return I.b.warn("skipping hole, adjusting currentTime from "+a+" to "+h),this.moved=!0,this.stalled=null,n.currentTime=h,e&&i.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+h,frag:e}),h}t=s.end(o)}return 0},u._tryNudgeBuffer=function(){var e=this.config,r=this.hls,i=this.media,n=i.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var t=n+a*e.nudgeOffset;I.b.warn("Nudging 'currentTime' from "+n+" to "+t),i.currentTime=t,r.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else I.b.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),r.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_STALLED_ERROR,fatal:!0})},p}();function De(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function xe(p,u){return(xe=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var _e=function(p){var u,e;function r(t,s){var o;return(o=p.call(this,t,s,"[stream-controller]")||this).audioCodecSwap=!1,o.gapController=null,o.level=-1,o._forceStartLoad=!1,o.altAudio=!1,o.audioOnly=!1,o.fragPlaying=null,o.onvplaying=null,o.onvseeked=null,o.fragLastKbps=0,o.stalled=!1,o.couldBacktrack=!1,o.audioCodecSwitch=!1,o.videoBuffer=null,o._registerListeners(),o}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,xe(u,e);var i,n,a=r.prototype;return a._registerListeners=function(){var t=this.hls;t.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(c.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(c.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(c.a.ERROR,this.onError,this),t.on(c.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(c.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(c.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(c.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this)},a._unregisterListeners=function(){var t=this.hls;t.off(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(c.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(c.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(c.a.ERROR,this.onError,this),t.off(c.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(c.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(c.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(c.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this)},a.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},a.startLoad=function(t){if(this.levels){var s=this.lastCurrentTime,o=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var d=o.startLevel;d===-1&&(o.config.testBandwidth?(d=0,this.bitrateTest=!0):d=o.nextAutoLevel),this.level=o.nextLoadLevel=d,this.loadedmetadata=!1}s>0&&t===-1&&(this.log("Override startPosition with lastCurrentTime @"+s.toFixed(3)),t=s),this.state=f,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=It},a.stopLoad=function(){this._forceStartLoad=!1,p.prototype.stopLoad.call(this)},a.doTick=function(){switch(this.state){case f:this.doTickIdle();break;case W:var t,s=this.levels,o=this.level,d=s==null||(t=s[o])===null||t===void 0?void 0:t.details;if(d&&(!d.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(d))break;this.state=f;break}break;case g:var h,m=self.performance.now(),b=this.retryDate;(!b||m>=b||(h=this.media)!==null&&h!==void 0&&h.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=f)}this.onTickEnd()},a.onTickEnd=function(){p.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},a.doTickIdle=function(){var t,s,o=this.hls,d=this.levelLastLoaded,h=this.levels,m=this.media,b=o.config,A=o.nextLoadLevel;if(d!==null&&(m||!this.startFragRequested&&b.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&h&&h[A]){var F=h[A];this.level=o.nextLoadLevel=A;var j=F.details;if(!j||this.state===W||j.live&&this.levelLastLoaded!==A)this.state=W;else{var B=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:m,ee.b.MAIN);if(B!==null&&!(B.len>=this.getMaxBufferLength(F.maxBitrate))){if(this._streamEnded(B,j)){var he={};return this.altAudio&&(he.type="video"),this.hls.trigger(c.a.BUFFER_EOS,he),void(this.state=x)}var le=B.end,se=this.getNextFragment(le,j);if(this.couldBacktrack&&!this.fragPrevious&&se&&se.sn!=="initSegment"){var oe=se.sn-j.startSN;oe>1&&(se=j.fragments[oe-1],this.fragmentTracker.removeFragment(se))}if(se&&this.fragmentTracker.getState(se)===je.OK&&this.nextLoadPosition>le){var pe=this.audioOnly&&!this.altAudio?q.a.AUDIO:q.a.VIDEO;this.afterBufferFlushed(m,pe,ee.b.MAIN),se=this.getNextFragment(this.nextLoadPosition,j)}se&&(!se.initSegment||se.initSegment.data||this.bitrateTest||(se=se.initSegment),((t=se.decryptdata)===null||t===void 0?void 0:t.keyFormat)!=="identity"||(s=se.decryptdata)!==null&&s!==void 0&&s.key?this.loadFragment(se,j,le):this.loadKey(se,j))}}}},a.loadFragment=function(t,s,o){var d,h=this.fragmentTracker.getState(t);if(this.fragCurrent=t,h===je.BACKTRACKED){var m=this.fragmentTracker.getBacktrackData(t);if(m)return this._handleFragmentLoadProgress(m),void this._handleFragmentLoadComplete(m);h=je.NOT_LOADED}h===je.NOT_LOADED||h===je.PARTIAL?t.sn==="initSegment"?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,t,s,o)):h===je.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):((d=this.media)===null||d===void 0?void 0:d.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},a.getAppendedFrag=function(t){var s=this.fragmentTracker.getAppendedFrag(t,ee.b.MAIN);return s&&"fragment"in s?s.fragment:s},a.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ee.b.MAIN)},a.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},a.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},a.nextLevelSwitch=function(){var t=this.levels,s=this.media;if(s!=null&&s.readyState){var o,d=this.getAppendedFrag(s.currentTime);if(d&&d.start>1&&this.flushMainBuffer(0,d.start-1),!s.paused&&t){var h=t[this.hls.nextLoadLevel],m=this.fragLastKbps;o=m&&this.fragCurrent?this.fragCurrent.duration*h.maxBitrate/(1e3*m)+1:0}else o=0;var b=this.getBufferedFrag(s.currentTime+o);if(b){var A=this.followingBufferedFrag(b);if(A){this.abortCurrentFrag();var F=A.maxStartPTS?A.maxStartPTS:A.start,j=A.duration,B=Math.max(b.end,F+Math.min(Math.max(j-this.config.maxFragLookUpTolerance,.5*j),.75*j));this.flushMainBuffer(B,Number.POSITIVE_INFINITY)}}}},a.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,t!=null&&t.loader&&t.loader.abort(),this.state===v&&(this.state=f),this.nextLoadPosition=this.getLoadPosition()},a.flushMainBuffer=function(t,s){p.prototype.flushMainBuffer.call(this,t,s,this.altAudio?"video":null)},a.onMediaAttached=function(t,s){p.prototype.onMediaAttached.call(this,t,s);var o=s.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),o.addEventListener("playing",this.onvplaying),o.addEventListener("seeked",this.onvseeked),this.gapController=new Re(this.config,o,this.fragmentTracker,this.hls)},a.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),p.prototype.onMediaDetaching.call(this)},a.onMediaPlaying=function(){this.tick()},a.onMediaSeeked=function(){var t=this.media,s=t?t.currentTime:null;Object(E.a)(s)&&this.log("Media seeked to "+s.toFixed(3)),this.tick()},a.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(c.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},a.onManifestParsed=function(t,s){var o,d,h,m=!1,b=!1;s.levels.forEach(function(A){(o=A.audioCodec)&&(o.indexOf("mp4a.40.2")!==-1&&(m=!0),o.indexOf("mp4a.40.5")!==-1&&(b=!0))}),this.audioCodecSwitch=m&&b&&typeof((h=te())==null||(d=h.prototype)===null||d===void 0?void 0:d.changeType)!="function",this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=s.levels,this.startFragRequested=!1},a.onLevelLoading=function(t,s){var o=this.levels;if(o&&this.state===f){var d=o[s.level];(!d.details||d.details.live&&this.levelLastLoaded!==s.level||this.waitForCdnTuneIn(d.details))&&(this.state=W)}},a.onLevelLoaded=function(t,s){var o,d=this.levels,h=s.level,m=s.details,b=m.totalduration;if(d){this.log("Level "+h+" loaded ["+m.startSN+","+m.endSN+"], cc ["+m.startCC+", "+m.endCC+"] duration:"+b);var A=this.fragCurrent;!A||this.state!==l&&this.state!==g||A.level!==s.level&&A.loader&&(this.state=f,A.loader.abort());var F=d[h],j=0;if(m.live||(o=F.details)!==null&&o!==void 0&&o.live){if(m.fragments[0]||(m.deltaUpdateFailed=!0),m.deltaUpdateFailed)return;j=this.alignPlaylists(m,F.details)}if(F.details=m,this.levelLastLoaded=h,this.hls.trigger(c.a.LEVEL_UPDATED,{details:m,level:h}),this.state===W){if(this.waitForCdnTuneIn(m))return;this.state=f}this.startFragRequested?m.live&&this.synchronizeToLiveEdge(m):this.setStartPosition(m,j),this.tick()}else this.warn("Levels were reset while loading level "+h)},a._handleFragmentLoadProgress=function(t){var s,o=t.frag,d=t.part,h=t.payload,m=this.levels;if(m){var b=m[o.level],A=b.details;if(A){var F=b.videoCodec,j=A.PTSKnown||!A.live,B=(s=o.initSegment)===null||s===void 0?void 0:s.data,he=this._getAudioCodec(b),le=this.transmuxer=this.transmuxer||new ce(this.hls,ee.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),se=d?d.index:-1,oe=se!==-1,pe=new Tt(o.level,o.sn,o.stats.chunkCount,h.byteLength,se,oe),Te=this.initPTS[o.cc];le.push(h,B,he,F,o,d,A.totalduration,j,pe,Te)}else this.warn("Dropping fragment "+o.sn+" of level "+o.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+o.sn+" of level "+o.level+" will not be buffered")},a.onAudioTrackSwitching=function(t,s){var o=this.altAudio,d=!!s.url,h=s.id;if(!d){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var m=this.fragCurrent;m!=null&&m.loader&&(this.log("Switching to main audio track, cancel main fragment load"),m.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var b=this.hls;o&&b.trigger(c.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),b.trigger(c.a.AUDIO_TRACK_SWITCHED,{id:h})}},a.onAudioTrackSwitched=function(t,s){var o=s.id,d=!!this.hls.audioTracks[o].url;if(d){var h=this.videoBuffer;h&&this.mediaBuffer!==h&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=h)}this.altAudio=d,this.tick()},a.onBufferCreated=function(t,s){var o,d,h=s.tracks,m=!1;for(var b in h){var A=h[b];if(A.id==="main"){if(d=b,o=A,b==="video"){var F=h[b];F&&(this.videoBuffer=F.buffer)}}else m=!0}m&&o?(this.log("Alternate track found, use "+d+".buffered to schedule main fragment loading"),this.mediaBuffer=o.buffer):this.mediaBuffer=this.media},a.onFragBuffered=function(t,s){var o=s.frag,d=s.part;if(!o||o.type===ee.b.MAIN){if(this.fragContextChanged(o))return this.warn("Fragment "+o.sn+(d?" p: "+d.index:"")+" of level "+o.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===L&&(this.state=f));var h=d?d.stats:o.stats;this.fragLastKbps=Math.round(8*h.total/(h.buffering.end-h.loading.first)),o.sn!=="initSegment"&&(this.fragPrevious=o),this.fragBufferedComplete(o,d)}},a.onError=function(t,s){switch(s.details){case K.a.FRAG_LOAD_ERROR:case K.a.FRAG_LOAD_TIMEOUT:case K.a.KEY_LOAD_ERROR:case K.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ee.b.MAIN,s);break;case K.a.LEVEL_LOAD_ERROR:case K.a.LEVEL_LOAD_TIMEOUT:this.state!==N&&(s.fatal?(this.warn(""+s.details),this.state=N):s.levelRetry||this.state!==W||(this.state=f));break;case K.a.BUFFER_FULL_ERROR:if(s.parent==="main"&&(this.state===y||this.state===L)){var o=!0,d=this.getFwdBufferInfo(this.media,ee.b.MAIN);d&&d.len>.5&&(o=!this.reduceMaxBufferLength(d.len)),o&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},a.checkBuffer=function(){var t=this.media,s=this.gapController;if(t&&s&&t.readyState){var o=Me.getBuffered(t);!this.loadedmetadata&&o.length?(this.loadedmetadata=!0,this.seekToStartPos()):s.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},a.onFragLoadEmergencyAborted=function(){this.state=f,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},a.onBufferFlushed=function(t,s){var o=s.type;if(o!==q.a.AUDIO||this.audioOnly&&!this.altAudio){var d=(o===q.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(d,o,ee.b.MAIN)}},a.onLevelsUpdated=function(t,s){this.levels=s.levels},a.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},a.seekToStartPos=function(){var t=this.media,s=t.currentTime,o=this.startPosition;if(o>=0&&s<o){if(t.seeking)return void I.b.log("could not seek to "+o+", already seeking at "+s);var d=Me.getBuffered(t),h=(d.length?d.start(0):0)-o;h>0&&(h<this.config.maxBufferHole||h<this.config.maxFragLookUpTolerance)&&(I.b.log("adjusting start position by "+h+" to match buffer start"),o+=h,this.startPosition=o),this.log("seek to target start position "+o+" from current time "+s),t.currentTime=o}},a._getAudioCodec=function(t){var s=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&s&&(this.log("Swapping audio codec"),s=s.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),s},a._loadBitrateTestFrag=function(t){var s=this;this._doFragLoad(t).then(function(o){var d=s.hls;if(o&&!d.nextLoadLevel&&!s.fragContextChanged(t)){s.fragLoadError=0,s.state=f,s.startFragRequested=!1,s.bitrateTest=!1;var h=t.stats;h.parsing.start=h.parsing.end=h.buffering.start=h.buffering.end=self.performance.now(),d.trigger(c.a.FRAG_LOADED,o)}})},a._handleTransmuxComplete=function(t){var s,o="main",d=this.hls,h=t.remuxResult,m=t.chunkMeta,b=this.getCurrentContext(m);if(!b)return this.warn("The loading context changed while buffering fragment "+m.sn+" of level "+m.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(m.level);var A=b.frag,F=b.part,j=b.level,B=h.video,he=h.text,le=h.id3,se=h.initSegment,oe=this.altAudio?void 0:h.audio;if(!this.fragContextChanged(A)){if(this.state=y,se){se.tracks&&(this._bufferInitSegment(j,se.tracks,A,m),d.trigger(c.a.FRAG_PARSING_INIT_SEGMENT,{frag:A,id:o,tracks:se.tracks}));var pe=se.initPTS,Te=se.timescale;Object(E.a)(pe)&&(this.initPTS[A.cc]=pe,d.trigger(c.a.INIT_PTS_FOUND,{frag:A,id:o,initPTS:pe,timescale:Te}))}if(B&&h.independent!==!1){if(j.details){var ge=B.startPTS,Pe=B.endPTS,He=B.startDTS,qe=B.endDTS;if(F)F.elementaryStreams[B.type]={startPTS:ge,endPTS:Pe,startDTS:He,endDTS:qe};else if(B.firstKeyFrame&&B.independent&&(this.couldBacktrack=!0),B.dropped&&B.independent){if(this.getLoadPosition()+this.config.maxBufferHole<ge)return void this.backtrack(A);A.setElementaryStreamInfo(B.type,A.start,Pe,A.start,qe,!0)}A.setElementaryStreamInfo(B.type,ge,Pe,He,qe),this.bufferFragmentData(B,A,F,m)}}else if(h.independent===!1)return void this.backtrack(A);if(oe){var Rt=oe.startPTS,it=oe.endPTS,nt=oe.startDTS,ft=oe.endDTS;F&&(F.elementaryStreams[q.a.AUDIO]={startPTS:Rt,endPTS:it,startDTS:nt,endDTS:ft}),A.setElementaryStreamInfo(q.a.AUDIO,Rt,it,nt,ft),this.bufferFragmentData(oe,A,F,m)}if(le!=null&&(s=le.samples)!==null&&s!==void 0&&s.length){var or={frag:A,id:o,samples:le.samples};d.trigger(c.a.FRAG_PARSING_METADATA,or)}if(he){var _r={frag:A,id:o,samples:he.samples};d.trigger(c.a.FRAG_PARSING_USERDATA,_r)}}},a._bufferInitSegment=function(t,s,o,d){var h=this;if(this.state===y){this.audioOnly=!!s.audio&&!s.video,this.altAudio&&!this.audioOnly&&delete s.audio;var m=s.audio,b=s.video,A=s.audiovideo;if(m){var F=t.audioCodec,j=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(F&&(F=F.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),m.metadata.channelCount!==1&&j.indexOf("firefox")===-1&&(F="mp4a.40.5")),j.indexOf("android")!==-1&&m.container!=="audio/mpeg"&&(F="mp4a.40.2",this.log("Android: force audio codec to "+F)),t.audioCodec&&t.audioCodec!==F&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+F+'"'),m.levelCodec=F,m.id="main",this.log("Init audio buffer, container:"+m.container+", codecs[selected/level/parsed]=["+(F||"")+"/"+(t.audioCodec||"")+"/"+m.codec+"]")}b&&(b.levelCodec=t.videoCodec,b.id="main",this.log("Init video buffer, container:"+b.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+b.codec+"]")),A&&this.log("Init audiovideo buffer, container:"+A.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+A.codec+"]"),this.hls.trigger(c.a.BUFFER_CODECS,s),Object.keys(s).forEach(function(B){var he=s[B].initSegment;he!=null&&he.byteLength&&h.hls.trigger(c.a.BUFFER_APPENDING,{type:B,data:he,frag:o,part:null,chunkMeta:d,parent:o.type})}),this.tick()}},a.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var s=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,s?this.resetFragmentLoading(t):this.state=T},a.checkFragmentChanged=function(){var t=this.media,s=null;if(t&&t.readyState>1&&t.seeking===!1){var o=t.currentTime;if(Me.isBuffered(t,o)?s=this.getAppendedFrag(o):Me.isBuffered(t,o+.1)&&(s=this.getAppendedFrag(o+.1)),s){var d=this.fragPlaying,h=s.level;d&&s.sn===d.sn&&d.level===h&&s.urlId===d.urlId||(this.hls.trigger(c.a.FRAG_CHANGED,{frag:s}),d&&d.level===h||this.hls.trigger(c.a.LEVEL_SWITCHED,{level:h}),this.fragPlaying=s)}}},i=r,(n=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var s=this.getAppendedFrag(t.currentTime);if(s)return s.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var s=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(s)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&De(i.prototype,n),r}(G),ye=function(){function p(e,r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=i}var u=p.prototype;return u.sample=function(e,r){var i=Math.pow(this.alpha_,e);this.estimate_=r*(1-i)+i*this.estimate_,this.totalWeight_+=e},u.getTotalWeight=function(){return this.totalWeight_},u.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},p}(),be=function(){function p(e,r,i){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ye(e),this.fast_=new ye(r)}var u=p.prototype;return u.update=function(e,r){var i=this.slow_,n=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new ye(e,i.getEstimate(),i.getTotalWeight())),this.fast_.halfLife!==r&&(this.fast_=new ye(r,n.getEstimate(),n.getTotalWeight()))},u.sample=function(e,r){var i=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*r/i;this.fast_.sample(i,n),this.slow_.sample(i,n)},u.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},u.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},u.destroy=function(){},p}();function we(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Ce=function(){function p(i){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=i;var n=i.config;this.bwEstimator=new be(n.abrEwmaSlowVoD,n.abrEwmaFastVoD,n.abrEwmaDefaultEstimate),this.registerListeners()}var u,e,r=p.prototype;return r.registerListeners=function(){var i=this.hls;i.on(c.a.FRAG_LOADING,this.onFragLoading,this),i.on(c.a.FRAG_LOADED,this.onFragLoaded,this),i.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this),i.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),i.on(c.a.ERROR,this.onError,this)},r.unregisterListeners=function(){var i=this.hls;i.off(c.a.FRAG_LOADING,this.onFragLoading,this),i.off(c.a.FRAG_LOADED,this.onFragLoaded,this),i.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this),i.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),i.off(c.a.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},r.onFragLoading=function(i,n){var a,t=n.frag;t.type===ee.b.MAIN&&(this.timer||(this.fragCurrent=t,this.partCurrent=(a=n.part)!=null?a:null,this.timer=self.setInterval(this.onCheck,100)))},r.onLevelLoaded=function(i,n){var a=this.hls.config;n.details.live?this.bwEstimator.update(a.abrEwmaSlowLive,a.abrEwmaFastLive):this.bwEstimator.update(a.abrEwmaSlowVoD,a.abrEwmaFastVoD)},r._abandonRulesCheck=function(){var i=this.fragCurrent,n=this.partCurrent,a=this.hls,t=a.autoLevelEnabled,s=a.config,o=a.media;if(i&&o){var d=n?n.stats:i.stats,h=n?n.duration:i.duration;if(d.aborted)return I.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(t&&!o.paused&&o.playbackRate&&o.readyState){var m=performance.now()-d.loading.start,b=Math.abs(o.playbackRate);if(!(m<=500*h/b)){var A=a.levels,F=a.minAutoLevel,j=A[i.level],B=d.total||Math.max(d.loaded,Math.round(h*j.maxBitrate/8)),he=Math.max(1,d.bwEstimate?d.bwEstimate/8:1e3*d.loaded/m),le=(B-d.loaded)/he,se=o.currentTime,oe=(Me.bufferInfo(o,se,s.maxBufferHole).end-se)/b;if(!(oe>=2*h/b||le<=oe)){var pe,Te=Number.POSITIVE_INFINITY;for(pe=i.level-1;pe>F&&!((Te=h*A[pe].maxBitrate/(6.4*he))<oe);pe--);if(!(Te>=le)){var ge=this.bwEstimator.getEstimate();I.b.warn("Fragment "+i.sn+(n?" part "+n.index:"")+" of level "+i.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+pe+`
      Current BW estimate: `+(Object(E.a)(ge)?(ge/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+le.toFixed(3)+` s
      Estimated load time for the next fragment: `+Te.toFixed(3)+` s
      Time to underbuffer: `+oe.toFixed(3)+" s"),a.nextLoadLevel=pe,this.bwEstimator.sample(m,d.loaded),this.clearTimer(),i.loader&&(this.fragCurrent=this.partCurrent=null,i.loader.abort()),a.trigger(c.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:n,stats:d})}}}}}},r.onFragLoaded=function(i,n){var a=n.frag,t=n.part;if(a.type===ee.b.MAIN&&Object(E.a)(a.sn)){var s=t?t.stats:a.stats,o=t?t.duration:a.duration;if(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var d=this.hls.levels[a.level],h=(d.loaded?d.loaded.bytes:0)+s.loaded,m=(d.loaded?d.loaded.duration:0)+o;d.loaded={bytes:h,duration:m},d.realBitrate=Math.round(8*h/m)}if(a.bitrateTest){var b={stats:s,frag:a,part:t,id:a.type};this.onFragBuffered(c.a.FRAG_BUFFERED,b),a.bitrateTest=!1}}},r.onFragBuffered=function(i,n){var a=n.frag,t=n.part,s=t?t.stats:a.stats;if(!s.aborted&&a.type===ee.b.MAIN&&a.sn!=="initSegment"){var o=s.parsing.end-s.loading.start;this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}},r.onError=function(i,n){switch(n.details){case K.a.FRAG_LOAD_ERROR:case K.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},r.getNextABRAutoLevel=function(){var i=this.fragCurrent,n=this.partCurrent,a=this.hls,t=a.maxAutoLevel,s=a.config,o=a.minAutoLevel,d=a.media,h=n?n.duration:i?i.duration:0,m=d?d.currentTime:0,b=d&&d.playbackRate!==0?Math.abs(d.playbackRate):1,A=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,F=(Me.bufferInfo(d,m,s.maxBufferHole).end-m)/b,j=this.findBestLevel(A,o,t,F,s.abrBandWidthFactor,s.abrBandWidthUpFactor);if(j>=0)return j;I.b.trace((F?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var B=h?Math.min(h,s.maxStarvationDelay):s.maxStarvationDelay,he=s.abrBandWidthFactor,le=s.abrBandWidthUpFactor;if(!F){var se=this.bitrateTestDelay;se&&(B=(h?Math.min(h,s.maxLoadingDelay):s.maxLoadingDelay)-se,I.b.trace("bitrate test took "+Math.round(1e3*se)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*B)+" ms"),he=le=1)}return j=this.findBestLevel(A,o,t,F+B,he,le),Math.max(j,0)},r.findBestLevel=function(i,n,a,t,s,o){for(var d,h=this.fragCurrent,m=this.partCurrent,b=this.lastLoadedFragLevel,A=this.hls.levels,F=A[b],j=!(F==null||(d=F.details)===null||d===void 0||!d.live),B=F?.codecSet,he=m?m.duration:h?h.duration:0,le=a;le>=n;le--){var se=A[le];if(se&&(!B||se.codecSet===B)){var oe=se.details,pe=(m?oe?.partTarget:oe?.averagetargetduration)||he,Te=void 0;Te=le<=b?s*i:o*i;var ge=A[le].maxBitrate,Pe=ge*pe/Te;if(I.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+le+"/"+Math.round(Te)+"/"+ge+"/"+pe+"/"+t+"/"+Pe),Te>ge&&(!Pe||j&&!this.bitrateTestDelay||Pe<t))return le}}return-1},u=p,(e=[{key:"nextAutoLevel",get:function(){var i=this._nextAutoLevel,n=this.bwEstimator;if(!(i===-1||n&&n.canEstimate()))return i;var a=this.getNextABRAutoLevel();return i!==-1&&(a=Math.min(i,a)),a},set:function(i){this._nextAutoLevel=i}}])&&we(u.prototype,e),p}(),Ie=S(10),Ye=S.n(Ie),et=function(){function p(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var u=p.prototype;return u.append=function(e,r){var i=this.queues[r];i.push(e),i.length===1&&this.buffers[r]&&this.executeNext(r)},u.insertAbort=function(e,r){this.queues[r].unshift(e),this.executeNext(r)},u.appendBlocker=function(e){var r,i=new Promise(function(a){r=a}),n={execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),i},u.executeNext=function(e){var r=this.buffers,i=this.queues,n=r[e],a=i[e];if(a.length){var t=a[0];try{t.execute()}catch(s){I.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),t.onError(s),n&&n.updating||(a.shift(),this.executeNext(e))}}},u.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},u.current=function(e){return this.queues[e][0]},p}(),ze=$(),Be=/([ha]vc.)(?:\.[^.,]+)+/,Xe=function(){function p(e){var r=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var i=r.hls,n=r.media,a=r.mediaSource;I.b.log("[buffer-controller]: Media source opened"),n&&(r.updateMediaElementDuration(),i.trigger(c.a.MEDIA_ATTACHED,{media:n})),a&&a.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},this._onMediaSourceClose=function(){I.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){I.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var u=p.prototype;return u.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},u.destroy=function(){this.unregisterListeners(),this.details=null},u.registerListeners=function(){var e=this.hls;e.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(c.a.BUFFER_RESET,this.onBufferReset,this),e.on(c.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(c.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(c.a.BUFFER_EOS,this.onBufferEos,this),e.on(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(c.a.FRAG_PARSED,this.onFragParsed,this),e.on(c.a.FRAG_CHANGED,this.onFragChanged,this)},u.unregisterListeners=function(){var e=this.hls;e.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(c.a.BUFFER_RESET,this.onBufferReset,this),e.off(c.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(c.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(c.a.BUFFER_EOS,this.onBufferEos,this),e.off(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(c.a.FRAG_PARSED,this.onFragParsed,this),e.off(c.a.FRAG_CHANGED,this.onFragChanged,this)},u._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new et(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},u.onManifestParsed=function(e,r){var i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.details=null,I.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},u.onMediaAttaching=function(e,r){var i=this.media=r.media;if(i&&ze){var n=this.mediaSource=new ze;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(n),this._objectUrl=i.src}},u.onMediaDetaching=function(){var e=this.media,r=this.mediaSource,i=this._objectUrl;if(r){if(I.b.log("[buffer-controller]: media source detaching"),r.readyState==="open")try{r.endOfStream()}catch(n){I.b.warn("[buffer-controller]: onMediaDetaching: "+n.message+" while calling endOfStream")}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):I.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(c.a.MEDIA_DETACHED,void 0)},u.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(r){var i=e.sourceBuffer[r];try{i&&(e.removeBufferListeners(r),e.mediaSource&&e.mediaSource.removeSourceBuffer(i),e.sourceBuffer[r]=void 0)}catch(n){I.b.warn("[buffer-controller]: Failed to reset the "+r+" buffer",n)}}),this._initSourceBuffer()},u.onBufferCodecs=function(e,r){var i=this,n=this.getSourceBufferTypes().length;Object.keys(r).forEach(function(a){if(n){var t=i.tracks[a];if(t&&typeof t.buffer.changeType=="function"){var s=r[a],o=s.codec,d=s.levelCodec,h=s.container;if((t.levelCodec||t.codec).replace(Be,"$1")!==(d||o).replace(Be,"$1")){var m=h+";codecs="+(d||o);i.appendChangeType(a,m)}}}else i.pendingTracks[a]=r[a]}),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},u.appendChangeType=function(e,r){var i=this,n=this.operationQueue,a={execute:function(){var t=i.sourceBuffer[e];t&&(I.b.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+r),t.changeType(r)),n.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){I.b.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};n.append(a,e)},u.onBufferAppending=function(e,r){var i=this,n=this.hls,a=this.operationQueue,t=this.tracks,s=r.data,o=r.type,d=r.frag,h=r.part,m=r.chunkMeta,b=m.buffering[o],A=self.performance.now();b.start=A;var F=d.stats.buffering,j=h?h.stats.buffering:null;F.start===0&&(F.start=A),j&&j.start===0&&(j.start=A);var B=t.audio,he=o==="audio"&&m.id===1&&B?.container==="audio/mpeg",le={execute:function(){if(b.executeStart=self.performance.now(),he){var se=i.sourceBuffer[o];if(se){var oe=d.start-se.timestampOffset;Math.abs(oe)>=.1&&(I.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+oe+") sn: "+d.sn+")"),se.timestampOffset=d.start)}}i.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var se=self.performance.now();b.executeEnd=b.end=se,F.first===0&&(F.first=se),j&&j.first===0&&(j.first=se);var oe=i.sourceBuffer,pe={};for(var Te in oe)pe[Te]=Me.getBuffered(oe[Te]);i.appendError=0,i.hls.trigger(c.a.BUFFER_APPENDED,{type:o,frag:d,part:h,chunkMeta:m,parent:d.type,timeRanges:pe})},onError:function(se){I.b.error("[buffer-controller]: Error encountered while trying to append to the "+o+" SourceBuffer",se);var oe={type:K.b.MEDIA_ERROR,parent:d.type,details:K.a.BUFFER_APPEND_ERROR,err:se,fatal:!1};se.code===DOMException.QUOTA_EXCEEDED_ERR?oe.details=K.a.BUFFER_FULL_ERROR:(i.appendError++,oe.details=K.a.BUFFER_APPEND_ERROR,i.appendError>n.config.appendErrorMaxRetry&&(I.b.error("[buffer-controller]: Failed "+n.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),oe.fatal=!0)),n.trigger(c.a.ERROR,oe)}};a.append(le,o)},u.onBufferFlushing=function(e,r){var i=this,n=this.operationQueue,a=function(t){return{execute:i.removeExecutor.bind(i,t,r.startOffset,r.endOffset),onStart:function(){},onComplete:function(){i.hls.trigger(c.a.BUFFER_FLUSHED,{type:t})},onError:function(s){I.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",s)}}};r.type?n.append(a(r.type),r.type):this.getSourceBufferTypes().forEach(function(t){n.append(a(t),t)})},u.onFragParsed=function(e,r){var i=this,n=r.frag,a=r.part,t=[],s=a?a.elementaryStreams:n.elementaryStreams;s[q.a.AUDIOVIDEO]?t.push("audiovideo"):(s[q.a.AUDIO]&&t.push("audio"),s[q.a.VIDEO]&&t.push("video")),t.length===0&&I.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var o=self.performance.now();n.stats.buffering.end=o,a&&(a.stats.buffering.end=o);var d=a?a.stats:n.stats;i.hls.trigger(c.a.FRAG_BUFFERED,{frag:n,part:a,stats:d,id:n.type})},t)},u.onFragChanged=function(e,r){this.flushBackBuffer()},u.onBufferEos=function(e,r){var i=this;this.getSourceBufferTypes().reduce(function(n,a){var t=i.sourceBuffer[a];return r.type&&r.type!==a||t&&!t.ended&&(t.ended=!0,I.b.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),n&&!(t&&!t.ended)},!0)&&this.blockBuffers(function(){var n=i.mediaSource;n&&n.readyState==="open"&&n.endOfStream()})},u.onLevelUpdated=function(e,r){var i=r.details;i.fragments.length&&(this.details=i,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},u.flushBackBuffer=function(){var e=this.hls,r=this.details,i=this.media,n=this.sourceBuffer;if(i&&r!==null){var a=this.getSourceBufferTypes();if(a.length){var t=r.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(E.a)(t)&&!(t<0)){var s=i.currentTime,o=r.levelTargetDuration,d=Math.max(t,o),h=Math.floor(s/o)*o-d;a.forEach(function(m){var b=n[m];if(b){var A=Me.getBuffered(b);A.length>0&&h>A.start(0)&&(e.trigger(c.a.BACK_BUFFER_REACHED,{bufferEnd:h}),r.live&&e.trigger(c.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:h}),e.trigger(c.a.BUFFER_FLUSHING,{startOffset:0,endOffset:h,type:m}))}})}}}},u.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var e=this.details,r=this.hls,i=this.media,n=this.mediaSource,a=e.fragments[0].start+e.totalduration,t=i.duration,s=Object(E.a)(n.duration)?n.duration:0;e.live&&r.config.liveDurationInfinity?(I.b.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(a>s&&a>t||!Object(E.a)(t))&&(I.b.log("[buffer-controller]: Updating Media Source duration to "+a.toFixed(3)),n.duration=a)}},u.updateSeekableRange=function(e){var r=this.mediaSource,i=e.fragments;if(i.length&&e.live&&r!=null&&r.setLiveSeekableRange){var n=Math.max(0,i[0].start),a=Math.max(n,n+e.totalduration);r.setLiveSeekableRange(n,a)}},u.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,r=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;if(n&&!e||n===2){this.createSourceBuffers(i),this.pendingTracks={};var a=this.getSourceBufferTypes();if(a.length===0)return void this.hls.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach(function(t){r.executeNext(t)})}},u.createSourceBuffers=function(e){var r=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var n=0;for(var a in e)if(!r[a]){var t=e[a];if(!t)throw Error("source buffer exists for track "+a+", however track does not");var s=t.levelCodec||t.codec,o=t.container+";codecs="+s;I.b.log("[buffer-controller]: creating sourceBuffer("+o+")");try{var d=r[a]=i.addSourceBuffer(o),h=a;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[a]={buffer:d,codec:s,container:t.container,levelCodec:t.levelCodec,id:t.id},n++}catch(m){I.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+m.message),this.hls.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:m,mimeType:o})}}n&&this.hls.trigger(c.a.BUFFER_CREATED,{tracks:this.tracks})},u._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},u._onSBUpdateEnd=function(e){var r=this.operationQueue;r.current(e).onComplete(),r.shiftAndExecuteNext(e)},u._onSBUpdateError=function(e,r){I.b.error("[buffer-controller]: "+e+" SourceBuffer error",r),this.hls.trigger(c.a.ERROR,{type:K.b.MEDIA_ERROR,details:K.a.BUFFER_APPENDING_ERROR,fatal:!1});var i=this.operationQueue.current(e);i&&i.onError(r)},u.removeExecutor=function(e,r,i){var n=this.media,a=this.mediaSource,t=this.operationQueue,s=this.sourceBuffer[e];if(!n||!a||!s)return I.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void t.shiftAndExecuteNext(e);var o=Object(E.a)(n.duration)?n.duration:1/0,d=Object(E.a)(a.duration)?a.duration:1/0,h=Math.max(0,r),m=Math.min(i,o,d);m>h?(I.b.log("[buffer-controller]: Removing ["+h+","+m+"] from the "+e+" SourceBuffer"),s.remove(h,m)):t.shiftAndExecuteNext(e)},u.appendExecutor=function(e,r){var i=this.operationQueue,n=this.sourceBuffer[r];if(!n)return I.b.warn("[buffer-controller]: Attempting to append to the "+r+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(r);n.ended=!1,n.appendBuffer(e)},u.blockBuffers=function(e,r){var i=this;if(r===void 0&&(r=this.getSourceBufferTypes()),!r.length)return I.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var n=this.operationQueue,a=r.map(function(t){return n.appendBlocker(t)});Promise.all(a).then(function(){e(),r.forEach(function(t){var s=i.sourceBuffer[t];s&&s.updating||n.shiftAndExecuteNext(t)})})},u.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},u.addBufferListener=function(e,r,i){var n=this.sourceBuffer[e];if(n){var a=i.bind(this,e);this.listeners[e].push({event:r,listener:a}),n.addEventListener(r,a)}},u.removeBufferListeners=function(e){var r=this.sourceBuffer[e];r&&this.listeners[e].forEach(function(i){r.removeEventListener(i.event,i.listener)})},p}();function Oe(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var $e=function(){function p(n){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=n,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var u,e,r,i=p.prototype;return i.setStreamController=function(n){this.streamController=n},i.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},i.registerListeners=function(){var n=this.hls;n.on(c.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),n.on(c.a.BUFFER_CODECS,this.onBufferCodecs,this),n.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this)},i.unregisterListener=function(){var n=this.hls;n.off(c.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),n.off(c.a.BUFFER_CODECS,this.onBufferCodecs,this),n.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this)},i.onFpsDropLevelCapping=function(n,a){p.isLevelAllowed(a.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(a.droppedLevel)},i.onMediaAttaching=function(n,a){this.media=a.media instanceof HTMLVideoElement?a.media:null},i.onManifestParsed=function(n,a){var t=this.hls;this.restrictedLevels=[],this.firstLevel=a.firstLevel,t.config.capLevelToPlayerSize&&a.video&&this.startCapping()},i.onBufferCodecs=function(n,a){this.hls.config.capLevelToPlayerSize&&a.video&&this.startCapping()},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var n=this.hls.levels;if(n.length){var a=this.hls;a.autoLevelCapping=this.getMaxLevel(n.length-1),a.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=a.autoLevelCapping}}},i.getMaxLevel=function(n){var a=this,t=this.hls.levels;if(!t.length)return-1;var s=t.filter(function(o,d){return p.isLevelAllowed(d,a.restrictedLevels)&&d<=n});return this.clientRect=null,p.getMaxLevelByMediaSize(s,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},i.getDimensions=function(){if(this.clientRect)return this.clientRect;var n=this.media,a={width:0,height:0};if(n){var t=n.getBoundingClientRect();a.width=t.width,a.height=t.height,a.width||a.height||(a.width=t.right-t.left||n.width||0,a.height=t.bottom-t.top||n.height||0)}return this.clientRect=a,a},p.isLevelAllowed=function(n,a){return a===void 0&&(a=[]),a.indexOf(n)===-1},p.getMaxLevelByMediaSize=function(n,a,t){if(!n||!n.length)return-1;for(var s,o,d=n.length-1,h=0;h<n.length;h+=1){var m=n[h];if((m.width>=a||m.height>=t)&&(s=m,!(o=n[h+1])||s.width!==o.width||s.height!==o.height)){d=h;break}}return d},u=p,r=[{key:"contentScaleFactor",get:function(){var n=1;try{n=self.devicePixelRatio}catch{}return n}}],(e=[{key:"mediaWidth",get:function(){return this.getDimensions().width*p.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*p.contentScaleFactor}}])&&Oe(u.prototype,e),r&&Oe(u,r),p}(),Pt=function(){function p(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var u=p.prototype;return u.setStreamController=function(e){this.streamController=e},u.registerListeners=function(){this.hls.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},u.unregisterListeners=function(){this.hls.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching)},u.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},u.onMediaAttaching=function(e,r){var i=this.hls.config;if(i.capLevelOnFPSDrop){var n=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=n,n&&typeof n.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},u.checkFPS=function(e,r,i){var n=performance.now();if(r){if(this.lastTime){var a=n-this.lastTime,t=i-this.lastDroppedFrames,s=r-this.lastDecodedFrames,o=1e3*t/a,d=this.hls;if(d.trigger(c.a.FPS_DROP,{currentDropped:t,currentDecoded:s,totalDroppedFrames:i}),o>0&&t>d.config.fpsDroppedMonitoringThreshold*s){var h=d.currentLevel;I.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=h)&&(h-=1,d.trigger(c.a.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=r}},u.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},p}(),dt=S(12),Ft=/^age:\s*[\d.]+\s*$/m,ht=function(){function p(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new dt.a,this.retryDelay=0}var u=p.prototype;return u.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},u.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))},u.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!==null&&e!==void 0&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},u.load=function(e,r,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=i,this.retryDelay=r.retryDelay,this.loadInternal()},u.loadInternal=function(){var e=this.config,r=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0;var a=this.xhrSetup;try{if(a)try{a(i,r.url)}catch{i.open("GET",r.url,!0),a(i,r.url)}i.readyState||i.open("GET",r.url,!0);var t=this.context.headers;if(t)for(var s in t)i.setRequestHeader(s,t[s])}catch(o){return void this.callbacks.onError({code:i.status,text:o.message},r,i)}r.rangeEnd&&i.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=r.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),i.send()}},u.readystatechange=function(){var e=this.context,r=this.loader,i=this.stats;if(e&&r){var n=r.readyState,a=this.config;if(!i.aborted&&n>=2)if(self.clearTimeout(this.requestTimeout),i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start)),n===4){r.onreadystatechange=null,r.onprogress=null;var t=r.status;if(t>=200&&t<300){var s,o;if(i.loading.end=Math.max(self.performance.now(),i.loading.first),o=e.responseType==="arraybuffer"?(s=r.response).byteLength:(s=r.responseText).length,i.loaded=i.total=o,!this.callbacks)return;var d=this.callbacks.onProgress;if(d&&d(i,e,s,r),!this.callbacks)return;var h={url:r.responseURL,data:s};this.callbacks.onSuccess(h,i,e,r)}else i.retry>=a.maxRetry||t>=400&&t<499?(I.b.error(t+" while loading "+e.url),this.callbacks.onError({code:t,text:r.statusText},e,r)):(I.b.warn(t+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},u.loadtimeout=function(){I.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},u.loadprogress=function(e){var r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)},u.getCacheAge=function(){var e=null;if(this.loader&&Ft.test(this.loader.getAllResponseHeaders())){var r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e},p}(),St=S(16);function pt(p){var u=typeof Map=="function"?new Map:void 0;return(pt=function(e){if(e===null||(r=e,Function.toString.call(r).indexOf("[native code]")===-1))return e;var r;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(e))return u.get(e);u.set(e,i)}function i(){return tt(e,arguments,Mt(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Lt(i,e)})(p)}function tt(p,u,e){return(tt=rt()?Reflect.construct:function(r,i,n){var a=[null];a.push.apply(a,i);var t=new(Function.bind.apply(r,a));return n&&Lt(t,n.prototype),t}).apply(null,arguments)}function rt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lt(p,u){return(Lt=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}function Mt(p){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(p)}function At(){return(At=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}var jt=function(){function p(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Kt,this.controller=new self.AbortController,this.stats=new dt.a}var u=p.prototype;return u.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},u.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},u.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!==null&&e!==void 0&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},u.load=function(e,r,i){var n=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var t=function(h,m){var b={method:"GET",mode:"cors",credentials:"same-origin",signal:m,headers:new self.Headers(At({},h.headers))};return h.rangeEnd&&b.headers.set("Range","bytes="+h.rangeStart+"-"+String(h.rangeEnd-1)),b}(e,this.controller.signal),s=i.onProgress,o=e.responseType==="arraybuffer",d=o?"byteLength":"length";this.context=e,this.config=r,this.callbacks=i,this.request=this.fetchSetup(e,t),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){n.abortInternal(),i.onTimeout(a,e,n.response)},r.timeout),self.fetch(this.request).then(function(h){if(n.response=n.loader=h,!h.ok){var m=h.status,b=h.statusText;throw new ir(b||"fetch, bad network response",m,h)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(h.headers.get("Content-Length")||"0"),s&&Object(E.a)(r.highWaterMark)?n.loadProgressively(h,a,e,r.highWaterMark,s):o?h.arrayBuffer():h.text()}).then(function(h){var m=n.response;self.clearTimeout(n.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=h[d];var b={url:m.url,data:h};s&&!Object(E.a)(r.highWaterMark)&&s(a,e,h,m),i.onSuccess(b,a,e,m)}).catch(function(h){if(self.clearTimeout(n.requestTimeout),!a.aborted){var m=h.code||0;i.onError({code:m,text:h.message},e,h.details)}})},u.getCacheAge=function(){var e=null;if(this.response){var r=this.response.headers.get("age");e=r?parseFloat(r):null}return e},u.loadProgressively=function(e,r,i,n,a){n===void 0&&(n=0);var t=new St.a,s=e.body.getReader();return function o(){return s.read().then(function(d){if(d.done)return t.dataLength&&a(r,i,t.flush(),e),Promise.resolve(new ArrayBuffer(0));var h=d.value,m=h.length;return r.loaded+=m,m<n||t.dataLength?(t.push(h),t.dataLength>=n&&a(r,i,t.flush(),e)):a(r,i,h,e),o()}).catch(function(){return Promise.reject()})}()},p}();function Kt(p,u){return new self.Request(p.url,u)}var mt,ir=function(p){var u,e;function r(i,n,a){var t;return(t=p.call(this,i)||this).code=void 0,t.details=void 0,t.code=n,t.details=a,t}return e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Lt(u,e),r}(pt(Error)),nr=jt;(function(p){p.WIDEVINE="com.widevine.alpha",p.PLAYREADY="com.microsoft.playready"})(mt||(mt={}));var Ht=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Lr(){return(Lr=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}function Vt(p,u){var e=Object.keys(p);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(p);u&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(p,i).enumerable})),e.push.apply(e,r)}return e}function Ar(p){for(var u=1;u<arguments.length;u++){var e=arguments[u]!=null?arguments[u]:{};u%2?Vt(Object(e),!0).forEach(function(r){Rr(p,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(e)):Vt(Object(e)).forEach(function(r){Object.defineProperty(p,r,Object.getOwnPropertyDescriptor(e,r))})}return p}function Rr(p,u,e){return u in p?Object.defineProperty(p,u,{value:e,enumerable:!0,configurable:!0,writable:!0}):p[u]=e,p}var jr=Ar(Ar({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ht,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Ce,bufferController:Xe,capLevelController:$e,fpsController:Pt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ht,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:Ye.a,enableCEA708Captions:!1,enableWebVTT:!1,enableIMSC1:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0,cmcdController:void 0});function ar(p){var u=p.loader;u!==nr&&u!==ht?(I.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),p.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(p.loader=nr,p.progressive=!0,p.enableSoftwareAES=!0,I.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}function sr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Dr=function(){function p(n){n===void 0&&(n={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ve.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var a=this.config=function(Te,ge){if((ge.liveSyncDurationCount||ge.liveMaxLatencyDurationCount)&&(ge.liveSyncDuration||ge.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(ge.liveMaxLatencyDurationCount!==void 0&&(ge.liveSyncDurationCount===void 0||ge.liveMaxLatencyDurationCount<=ge.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(ge.liveMaxLatencyDuration!==void 0&&(ge.liveSyncDuration===void 0||ge.liveMaxLatencyDuration<=ge.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Lr({},Te,ge)}(p.DefaultConfig,n);this.userConfig=n,Object(I.a)(a.debug),this._autoLevelCapping=-1,a.progressive&&ar(a);var t=a.abrController,s=a.bufferController,o=a.capLevelController,d=a.fpsController,h=this.abrController=new t(this),m=this.bufferController=new s(this),b=this.capLevelController=new o(this),A=new d(this),F=new Le(this),j=new Se(this),B=new Ge(this),he=this.levelController=new vt(this),le=new Je(this),se=this.streamController=new _e(this,le);b.setStreamController(se),A.setStreamController(se);var oe=[he,se];this.networkControllers=oe;var pe=[F,j,h,m,b,A,B,le];this.audioTrackController=this.createController(a.audioTrackController,null,oe),this.createController(a.audioStreamController,le,oe),this.subtitleTrackController=this.createController(a.subtitleTrackController,null,oe),this.createController(a.subtitleStreamController,le,oe),this.createController(a.timelineController,null,pe),this.emeController=this.createController(a.emeController,null,pe),this.cmcdController=this.createController(a.cmcdController,null,pe),this.latencyController=this.createController(Ke,null,pe),this.coreComponents=pe}p.isSupported=function(){return function(){var n=$();if(!n)return!1;var a=te(),t=n&&typeof n.isTypeSupported=="function"&&n.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!a||a.prototype&&typeof a.prototype.appendBuffer=="function"&&typeof a.prototype.remove=="function";return!!t&&!!s}()};var u,e,r,i=p.prototype;return i.createController=function(n,a,t){if(n){var s=a?new n(this,a):new n(this);return t&&t.push(s),s}return null},i.on=function(n,a,t){t===void 0&&(t=this),this._emitter.on(n,a,t)},i.once=function(n,a,t){t===void 0&&(t=this),this._emitter.once(n,a,t)},i.removeAllListeners=function(n){this._emitter.removeAllListeners(n)},i.off=function(n,a,t,s){t===void 0&&(t=this),this._emitter.off(n,a,t,s)},i.listeners=function(n){return this._emitter.listeners(n)},i.emit=function(n,a,t){return this._emitter.emit(n,a,t)},i.trigger=function(n,a){if(this.config.debug)return this.emit(n,n,a);try{return this.emit(n,n,a)}catch(t){I.b.error("An internal error happened while handling event "+n+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(c.a.ERROR,{type:K.b.OTHER_ERROR,details:K.a.INTERNAL_EXCEPTION,fatal:!1,event:n,error:t})}return!1},i.listenerCount=function(n){return this._emitter.listenerCount(n)},i.destroy=function(){I.b.log("destroy"),this.trigger(c.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(n){return n.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(n){return n.destroy()}),this.coreComponents.length=0},i.attachMedia=function(n){I.b.log("attachMedia"),this._media=n,this.trigger(c.a.MEDIA_ATTACHING,{media:n})},i.detachMedia=function(){I.b.log("detachMedia"),this.trigger(c.a.MEDIA_DETACHING,void 0),this._media=null},i.loadSource=function(n){this.stopLoad();var a=this.media,t=this.url,s=this.url=O.buildAbsoluteURL(self.location.href,n,{alwaysNormalize:!0});I.b.log("loadSource:"+s),a&&t&&t!==s&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(a)),this.trigger(c.a.MANIFEST_LOADING,{url:n})},i.startLoad=function(n){n===void 0&&(n=-1),I.b.log("startLoad("+n+")"),this.networkControllers.forEach(function(a){a.startLoad(n)})},i.stopLoad=function(){I.b.log("stopLoad"),this.networkControllers.forEach(function(n){n.stopLoad()})},i.swapAudioCodec=function(){I.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){I.b.log("recoverMediaError");var n=this._media;this.detachMedia(),n&&this.attachMedia(n)},i.removeLevel=function(n,a){a===void 0&&(a=0),this.levelController.removeLevel(n,a)},u=p,r=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return c.a}},{key:"ErrorTypes",get:function(){return K.b}},{key:"ErrorDetails",get:function(){return K.a}},{key:"DefaultConfig",get:function(){return p.defaultConfig?p.defaultConfig:jr},set:function(n){p.defaultConfig=n}}],(e=[{key:"levels",get:function(){var n=this.levelController.levels;return n||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(n){I.b.log("set currentLevel:"+n),this.loadLevel=n,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(n){I.b.log("set nextLevel:"+n),this.levelController.manualLevel=n,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(n){I.b.log("set loadLevel:"+n),this.levelController.manualLevel=n}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(n){this.levelController.nextLoadLevel=n}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(n){I.b.log("set firstLevel:"+n),this.levelController.firstLevel=n}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(n){I.b.log("set startLevel:"+n),n!==-1&&(n=Math.max(n,this.minAutoLevel)),this.levelController.startLevel=n}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(n){var a=!!n;a!==this.config.capLevelToPlayerSize&&(a?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=a)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(n){this._autoLevelCapping!==n&&(I.b.log("set autoLevelCapping:"+n),this._autoLevelCapping=n)}},{key:"bandwidthEstimate",get:function(){var n=this.abrController.bwEstimator;return n?n.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var n=this.levels,a=this.config.minAutoBitrate;if(!n)return 0;for(var t=n.length,s=0;s<t;s++)if(n[s].maxBitrate>a)return s;return 0}},{key:"maxAutoLevel",get:function(){var n=this.levels,a=this.autoLevelCapping;return a===-1&&n&&n.length?n.length-1:a}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(n){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,n)}},{key:"audioTracks",get:function(){var n=this.audioTrackController;return n?n.audioTracks:[]}},{key:"audioTrack",get:function(){var n=this.audioTrackController;return n?n.audioTrack:-1},set:function(n){var a=this.audioTrackController;a&&(a.audioTrack=n)}},{key:"subtitleTracks",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTrack:-1},set:function(n){var a=this.subtitleTrackController;a&&(a.subtitleTrack=n)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var n=this.subtitleTrackController;return!!n&&n.subtitleDisplay},set:function(n){var a=this.subtitleTrackController;a&&(a.subtitleDisplay=n)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(n){this.config.lowLatencyMode=n}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&sr(u.prototype,e),r&&sr(u,r),p}();Dr.defaultConfig=void 0}]).default})})(Si);var Cr=an(Si.exports);const sn=Ei("<div></div>"),on=Ei(`<div class="
      fixed inset-x-0 inset-y-0 overflow-hidden
      flex justify-center z-50
    "></div>`),di=document.getElementById("video"),[ln,hi]=ci(!1),[un,dn]=ci(!0),hn=()=>[_t(ii,{get when(){return ln()},get children(){return _t(fn,{})}}),_t(ii,{get when(){return un()},get children(){return _t(cn,{})}})],fn=()=>_t(Ai,{get children(){return _t(Li,{children:"reconnecting"})}}),cn=()=>_t(Ai,{onClick:()=>{dn(!1),di.muted=!1,di.volume=1},get children(){return _t(Li,{children:"click to unmute"})}}),Li=R=>(()=>{const _=sn.cloneNode(!0);return Ti(_,R,!1,!1),Bt(()=>_.className=`
      ${R.color?R.color:"text-white"}
      justify-center text-3xl my-auto max-w-xs
      alert bg-gray-900 select-none
    `),_})(),Ai=R=>(()=>{const _=on.cloneNode(!0);return Ti(_,R,!1,!1),_})();let yt;const vn=document.getElementById("video"),Ri=()=>{const R=new URLSearchParams(window.location.search);if(R.get("url")==null)throw"error: no url parameter set";const _=R.get("url");yt=new Cr({defaultAudioCodec:"mp4a.40.2",autoStartLoad:!1,liveDurationInfinity:!0}),yt.attachMedia(vn),yt.on(Cr.Events.ERROR,async(D,w)=>{w.details==="manifestLoadError"||w.details==="levelLoadError"?(await gn(1e3),yt.loadSource(_)):(hi(!0),yt.destroy())}),yt.on(Cr.Events.MANIFEST_LOADED,async(D,w)=>{hi(!1);const S=Number(w.networkDetails.response.match(/stream-[0-9]+.ts/)[0].match(/[0-9]+/)[0]),O=await pn(S);O!==0?yt.startLoad(O):yt.startLoad()}),yt.on(Cr.Events.DESTROYING,()=>Ri()),yt.loadSource(_)},gn=R=>new Promise(_=>setTimeout(_,R)),pn=R=>fetch("/sync",{}).then(_=>_.text()).then(_=>isNaN(_)?0:Number(_)).then(_=>_!==0?Math.round(_-15-R/1e3):0);Ri();Yi(hn,document.getElementById("screen"));</script><style>*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:after,:before{--tw-content:""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}:root,[data-theme]{background-color:hsla(var(--b1) / var(--tw-bg-opacity,1));color:hsla(var(--bc) / var(--tw-text-opacity,1))}html{-webkit-tap-highlight-color:transparent}:root{--p:259 94% 51%;--pf:259 94% 41%;--sf:314 100% 38%;--af:174 60% 41%;--nf:219 14% 22%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:314 100% 47%;--sc:0 0% 100%;--a:174 60% 51%;--ac:175 44% 15%;--n:219 14% 28%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:180 2% 90%;--bc:215 28% 17%}@media (prefers-color-scheme:dark){:root{--p:262 80% 50%;--pf:262 80% 40%;--sf:316 70% 40%;--af:175 70% 33%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:316 70% 50%;--sc:0 0% 100%;--a:175 70% 41%;--ac:0 0% 100%;--n:218 18% 12%;--nf:223 17% 8%;--nc:220 13% 69%;--b1:220 18% 20%;--b2:220 17% 17%;--b3:219 18% 15%;--bc:220 13% 69%}}[data-theme=light]{--p:259 94% 51%;--pf:259 94% 41%;--sf:314 100% 38%;--af:174 60% 41%;--nf:219 14% 22%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:314 100% 47%;--sc:0 0% 100%;--a:174 60% 51%;--ac:175 44% 15%;--n:219 14% 28%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:180 2% 90%;--bc:215 28% 17%}[data-theme=dark]{--p:262 80% 50%;--pf:262 80% 40%;--sf:316 70% 40%;--af:175 70% 33%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:316 70% 50%;--sc:0 0% 100%;--a:175 70% 41%;--ac:0 0% 100%;--n:218 18% 12%;--nf:223 17% 8%;--nc:220 13% 69%;--b1:220 18% 20%;--b2:220 17% 17%;--b3:219 18% 15%;--bc:220 13% 69%}[data-theme=cupcake]{--p:183 47% 59%;--pf:183 47% 47%;--sf:338 71% 62%;--af:39 84% 46%;--nf:280 46% 11%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:183 100% 12%;--sc:338 100% 16%;--ac:39 100% 12%;--nc:280 83% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--s:338 71% 78%;--a:39 84% 58%;--n:280 46% 14%;--b1:24 33% 97%;--b2:27 22% 92%;--b3:22 14% 89%;--bc:280 46% 14%;--rounded-btn:1.9rem;--tab-border:2px;--tab-radius:.5rem}[data-theme=bumblebee]{--p:41 74% 53%;--pf:41 74% 42%;--sf:50 94% 46%;--af:240 33% 11%;--nf:240 33% 11%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 0% 20%;--ac:240 60% 83%;--nc:240 60% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:240 33% 14%;--s:50 94% 58%;--sc:240 33% 14%;--a:240 33% 14%;--n:240 33% 14%;--b1:0 0% 100%}[data-theme=emerald]{--p:141 50% 60%;--pf:141 50% 48%;--sf:219 96% 48%;--af:10 81% 45%;--nf:219 20% 20%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:151 28% 19%;--s:219 96% 60%;--sc:210 20% 98%;--a:10 81% 56%;--ac:210 20% 98%;--n:219 20% 25%;--nc:210 20% 98%;--b1:0 0% 100%;--bc:219 20% 25%;--animation-btn:0;--animation-input:0;--btn-focus-scale:1}[data-theme=corporate]{--p:229 96% 64%;--pf:229 96% 51%;--sf:215 26% 47%;--af:154 49% 48%;--nf:233 27% 10%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:229 100% 93%;--sc:215 100% 12%;--ac:154 100% 12%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:215 26% 59%;--a:154 49% 60%;--n:233 27% 13%;--nc:210 38% 95%;--b1:0 0% 100%;--bc:233 27% 13%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem;--animation-btn:0;--animation-input:0;--btn-focus-scale:1}[data-theme=synthwave]{--p:321 70% 69%;--pf:321 70% 55%;--sf:197 87% 52%;--af:48 89% 46%;--nf:253 61% 15%;--b2:254 59% 23%;--b3:254 59% 21%;--pc:321 100% 14%;--sc:197 100% 13%;--ac:48 100% 11%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:197 87% 65%;--a:48 89% 57%;--n:253 61% 19%;--nc:260 60% 98%;--b1:254 59% 26%;--bc:260 60% 98%;--in:199 87% 64%;--inc:257 63% 17%;--su:168 74% 68%;--suc:257 63% 17%;--wa:48 89% 57%;--wac:257 63% 17%;--er:352 74% 57%;--erc:260 60% 98%}[data-theme=retro]{--p:3 74% 76%;--pf:3 74% 61%;--sf:145 27% 58%;--af:49 67% 61%;--nf:42 17% 34%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:345 5% 15%;--s:145 27% 72%;--sc:345 5% 15%;--a:49 67% 76%;--ac:345 5% 15%;--n:42 17% 42%;--nc:45 47% 80%;--b1:45 47% 80%;--b2:45 37% 72%;--b3:42 36% 65%;--bc:345 5% 15%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%;--rounded-box:.4rem;--rounded-btn:.4rem;--rounded-badge:.4rem}[data-theme=cyberpunk]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;--pf:345 100% 58%;--sf:195 80% 56%;--af:276 74% 57%;--nf:57 100% 10%;--b2:56 100% 45%;--b3:56 100% 41%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:56 100% 10%;--pc:345 100% 15%;--sc:195 100% 14%;--ac:276 100% 14%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--p:345 100% 73%;--s:195 80% 70%;--a:276 74% 71%;--n:57 100% 13%;--nc:56 100% 50%;--b1:56 100% 50%;--rounded-box:0;--rounded-btn:0;--rounded-badge:0;--tab-radius:0}[data-theme=valentine]{--p:353 74% 67%;--pf:353 74% 54%;--sf:254 86% 61%;--af:181 56% 56%;--nf:336 43% 38%;--b2:318 46% 80%;--b3:318 46% 72%;--pc:353 100% 13%;--sc:254 100% 15%;--ac:181 100% 14%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:254 86% 77%;--a:181 56% 70%;--n:336 43% 48%;--nc:318 46% 89%;--b1:318 46% 89%;--bc:344 38% 28%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%;--rounded-btn:1.9rem}[data-theme=halloween]{--p:32 89% 52%;--pf:32 89% 42%;--sf:271 46% 34%;--af:91 100% 26%;--nf:180 4% 9%;--b2:0 0% 12%;--b3:0 0% 10%;--bc:0 0% 83%;--sc:271 100% 88%;--ac:91 100% 7%;--nc:180 5% 82%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:180 7% 8%;--s:271 46% 42%;--a:91 100% 33%;--n:180 4% 11%;--b1:0 0% 13%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%}[data-theme=garden]{--p:139 16% 43%;--pf:139 16% 34%;--sf:97 37% 75%;--af:0 68% 75%;--nf:0 4% 28%;--b2:0 4% 82%;--b3:0 4% 74%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:139 100% 89%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:97 37% 93%;--sc:96 32% 15%;--a:0 68% 94%;--ac:0 22% 16%;--n:0 4% 35%;--nc:0 4% 91%;--b1:0 4% 91%;--bc:0 3% 6%}[data-theme=forest]{--p:141 72% 42%;--pf:141 72% 34%;--sf:141 75% 38%;--af:35 69% 42%;--nf:0 10% 5%;--b2:0 12% 7%;--b3:0 12% 7%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 12% 82%;--pc:141 100% 8%;--sc:141 100% 10%;--ac:35 100% 10%;--nc:0 7% 81%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:141 75% 48%;--a:35 69% 52%;--n:0 10% 6%;--b1:0 12% 8%;--rounded-btn:1.9rem}[data-theme=aqua]{--p:182 93% 49%;--pf:182 93% 40%;--sf:274 31% 45%;--af:47 100% 64%;--nf:205 54% 40%;--b2:219 53% 39%;--b3:219 53% 35%;--bc:219 100% 89%;--sc:274 100% 91%;--ac:47 100% 16%;--nc:205 100% 90%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:181 100% 17%;--s:274 31% 57%;--a:47 100% 80%;--n:205 54% 50%;--b1:219 53% 43%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%}[data-theme=lofi]{--p:0 0% 5%;--pf:0 0% 4%;--sf:0 2% 8%;--af:0 0% 12%;--nf:0 0% 0%;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--pc:0 0% 100%;--s:0 2% 10%;--sc:0 0% 100%;--a:0 0% 15%;--ac:0 0% 100%;--n:0 0% 0%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:0 2% 90%;--bc:0 0% 0%;--in:212 100% 48%;--inc:0 0% 100%;--su:137 72% 46%;--suc:0 0% 100%;--wa:5 100% 66%;--wac:0 0% 100%;--er:325 78% 49%;--erc:0 0% 100%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem;--animation-btn:0;--animation-input:0;--btn-focus-scale:1;--tab-radius:0}[data-theme=pastel]{--p:284 22% 80%;--pf:284 22% 64%;--sf:352 70% 70%;--af:158 55% 65%;--nf:199 44% 49%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 0% 20%;--pc:284 59% 16%;--sc:352 100% 18%;--ac:158 100% 16%;--nc:199 100% 12%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:352 70% 88%;--a:158 55% 81%;--n:199 44% 61%;--b1:0 0% 100%;--b2:210 20% 98%;--b3:216 12% 84%;--rounded-btn:1.9rem}[data-theme=fantasy]{--p:296 83% 25%;--pf:296 83% 20%;--sf:200 100% 30%;--af:31 94% 41%;--nf:215 28% 13%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:296 100% 85%;--sc:200 100% 87%;--ac:31 100% 10%;--nc:215 62% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:200 100% 37%;--a:31 94% 51%;--n:215 28% 17%;--b1:0 0% 100%;--bc:215 28% 17%}[data-theme=wireframe]{font-family:Chalkboard,comic sans ms,sanssecondaryerif;--pf:0 0% 58%;--sf:0 0% 58%;--af:0 0% 58%;--nf:0 0% 74%;--bc:0 0% 20%;--pc:0 0% 14%;--sc:0 0% 14%;--ac:0 0% 14%;--nc:0 0% 18%;--inc:240 100% 90%;--suc:120 100% 85%;--wac:60 100% 10%;--erc:0 100% 90%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--p:0 0% 72%;--s:0 0% 72%;--a:0 0% 72%;--n:0 0% 92%;--b1:0 0% 100%;--b2:0 0% 93%;--b3:0 0% 87%;--in:240 100% 50%;--su:120 100% 25%;--wa:60 30% 50%;--er:0 100% 50%;--rounded-box:.2rem;--rounded-btn:.2rem;--rounded-badge:.2rem;--tab-radius:.2rem}[data-theme=black]{--p:0 2% 20%;--pf:0 2% 16%;--sf:0 2% 16%;--af:0 2% 16%;--bc:0 0% 80%;--pc:0 5% 84%;--sc:0 5% 84%;--ac:0 5% 84%;--nc:0 3% 83%;--inc:240 100% 90%;--suc:120 100% 85%;--wac:60 100% 10%;--erc:0 100% 90%;--border-btn:1px;--tab-border:1px;--s:0 2% 20%;--a:0 2% 20%;--b1:0 0% 0%;--b2:0 0% 5%;--b3:0 2% 10%;--n:0 1% 15%;--nf:0 2% 20%;--in:240 100% 50%;--su:120 100% 25%;--wa:60 100% 50%;--er:0 100% 50%;--rounded-box:0;--rounded-btn:0;--rounded-badge:0;--animation-btn:0;--animation-input:0;--btn-text-case:lowercase;--btn-focus-scale:1;--tab-radius:0}[data-theme=luxury]{--p:0 0% 100%;--pf:0 0% 80%;--sf:218 54% 14%;--af:319 22% 21%;--nf:270 4% 7%;--pc:0 0% 20%;--sc:218 100% 84%;--ac:319 85% 85%;--inc:202 100% 14%;--suc:89 100% 10%;--wac:54 100% 13%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:218 54% 18%;--a:319 22% 26%;--n:270 4% 9%;--nc:37 67% 58%;--b1:240 10% 4%;--b2:270 4% 9%;--b3:270 2% 18%;--bc:37 67% 58%;--in:202 100% 70%;--su:89 62% 52%;--wa:54 69% 64%;--er:0 100% 72%}[data-theme=dracula]{--p:326 100% 74%;--pf:326 100% 59%;--sf:265 89% 62%;--af:31 100% 57%;--nf:230 15% 24%;--b2:231 15% 17%;--b3:231 15% 15%;--pc:326 100% 15%;--sc:265 100% 16%;--ac:31 100% 14%;--nc:230 71% 86%;--inc:191 100% 15%;--suc:135 100% 13%;--wac:65 100% 15%;--erc:0 100% 93%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:265 89% 78%;--a:31 100% 71%;--n:230 15% 30%;--b1:231 15% 18%;--bc:60 30% 96%;--in:191 97% 77%;--su:135 94% 65%;--wa:65 92% 76%;--er:0 100% 67%}[data-theme=cmyk]{--p:203 83% 60%;--pf:203 83% 48%;--sf:335 78% 48%;--af:56 100% 48%;--nf:0 0% 8%;--b2:0 0% 90%;--b3:0 0% 81%;--bc:0 0% 20%;--pc:203 100% 12%;--sc:335 100% 92%;--ac:56 100% 12%;--nc:0 0% 82%;--inc:192 100% 10%;--suc:291 100% 88%;--wac:25 100% 11%;--erc:4 100% 91%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:335 78% 60%;--a:56 100% 60%;--n:0 0% 10%;--b1:0 0% 100%;--in:192 48% 52%;--su:291 48% 38%;--wa:25 85% 57%;--er:4 81% 56%}[data-theme=autumn]{--p:344 96% 28%;--pf:344 96% 22%;--sf:0 63% 47%;--af:27 56% 50%;--nf:22 17% 35%;--b2:0 0% 85%;--b3:0 0% 77%;--bc:0 0% 19%;--pc:344 100% 86%;--sc:0 100% 92%;--ac:27 100% 13%;--nc:22 100% 89%;--inc:187 100% 10%;--suc:165 100% 9%;--wac:30 100% 10%;--erc:354 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:0 63% 58%;--a:27 56% 63%;--n:22 17% 44%;--b1:0 0% 95%;--in:187 48% 50%;--su:165 34% 43%;--wa:30 84% 50%;--er:354 79% 49%}[data-theme=business]{--p:210 64% 31%;--pf:210 64% 24%;--sf:200 13% 44%;--af:13 80% 48%;--nf:213 14% 13%;--b2:0 0% 11%;--b3:0 0% 10%;--bc:0 0% 83%;--pc:210 100% 86%;--sc:200 100% 11%;--ac:13 100% 12%;--nc:213 28% 83%;--inc:199 100% 88%;--suc:144 100% 11%;--wac:39 100% 12%;--erc:6 100% 89%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:200 13% 55%;--a:13 80% 60%;--n:213 14% 16%;--b1:0 0% 13%;--in:199 100% 42%;--su:144 31% 56%;--wa:39 64% 60%;--er:6 56% 43%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem}[data-theme=acid]{--p:303 100% 50%;--pf:303 100% 40%;--sf:27 100% 40%;--af:72 98% 40%;--nf:238 43% 14%;--b2:0 0% 88%;--b3:0 0% 79%;--bc:0 0% 20%;--pc:303 100% 90%;--sc:27 100% 10%;--ac:72 100% 10%;--nc:238 99% 83%;--inc:210 100% 12%;--suc:149 100% 12%;--wac:53 100% 11%;--erc:1 100% 89%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:27 100% 50%;--a:72 98% 50%;--n:238 43% 17%;--b1:0 0% 98%;--in:210 92% 58%;--su:149 50% 58%;--wa:53 93% 57%;--er:1 100% 45%;--rounded-box:1.25rem;--rounded-btn:1rem;--rounded-badge:1rem}[data-theme=lemonade]{--p:89 96% 31%;--pf:89 96% 24%;--sf:60 81% 44%;--af:63 80% 71%;--nf:238 43% 14%;--b2:0 0% 90%;--b3:0 0% 81%;--bc:0 0% 20%;--pc:89 100% 86%;--sc:60 100% 11%;--ac:63 100% 18%;--nc:238 99% 83%;--inc:192 79% 17%;--suc:74 100% 16%;--wac:50 100% 15%;--erc:1 100% 17%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:60 81% 55%;--a:63 80% 88%;--n:238 43% 17%;--b1:0 0% 100%;--in:192 39% 85%;--su:74 76% 79%;--wa:50 87% 75%;--er:1 70% 83%}[data-theme=night]{--p:198 93% 60%;--pf:198 93% 48%;--sf:234 89% 59%;--af:329 86% 56%;--b2:222 47% 10%;--b3:222 47% 9%;--bc:222 66% 82%;--pc:198 100% 12%;--sc:234 100% 15%;--ac:329 100% 14%;--nc:217 76% 83%;--inc:198 100% 10%;--suc:172 100% 10%;--wac:41 100% 13%;--erc:351 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:234 89% 74%;--a:329 86% 70%;--n:217 33% 17%;--nf:217 30% 22%;--b1:222 47% 11%;--in:198 90% 48%;--su:172 66% 50%;--wa:41 88% 64%;--er:351 95% 71%}[data-theme=coffee]{--p:30 67% 58%;--pf:30 67% 46%;--sf:182 25% 16%;--af:194 74% 20%;--nf:300 20% 5%;--b2:306 19% 10%;--b3:306 19% 9%;--pc:30 100% 12%;--sc:182 67% 84%;--ac:194 100% 85%;--nc:300 14% 81%;--inc:171 100% 13%;--suc:93 100% 12%;--wac:43 100% 14%;--erc:10 100% 15%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:182 25% 20%;--a:194 74% 25%;--n:300 20% 6%;--b1:306 19% 11%;--bc:37 8% 42%;--in:171 37% 67%;--su:93 25% 62%;--wa:43 100% 69%;--er:10 95% 75%}[data-theme=winter]{--p:212 100% 51%;--pf:212 100% 41%;--sf:247 47% 35%;--af:310 49% 42%;--nf:217 92% 8%;--pc:212 100% 90%;--sc:247 100% 89%;--ac:310 100% 90%;--nc:217 100% 82%;--inc:192 100% 16%;--suc:182 100% 13%;--wac:32 100% 17%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:247 47% 43%;--a:310 49% 52%;--n:217 92% 10%;--b1:0 0% 100%;--b2:217 100% 97%;--b3:219 44% 92%;--bc:214 30% 32%;--in:192 93% 78%;--su:182 47% 66%;--wa:32 62% 84%;--er:0 63% 72%}*,:after,:before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / .5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.alert{display:flex;width:100%;flex-direction:column;align-items:center;justify-content:space-between;gap:1rem;--tw-bg-opacity:1;background-color:hsl(var(--b2,var(--b1)) / var(--tw-bg-opacity));padding:1rem;border-radius:var(--rounded-box,1rem)}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}@media (min-width:768px){.alert{flex-direction:row}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}}.alert>:where(*){display:flex;align-items:center;gap:.5rem}@-webkit-keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.link{cursor:pointer;-webkit-text-decoration-line:underline;text-decoration-line:underline}.btn-outline .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--nf,var(--n)) / var(--tw-border-opacity));background-color:transparent}.btn-outline:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--b2,var(--b1)) / var(--tw-border-opacity));--tw-text-opacity:1;color:hsl(var(--nc) / var(--tw-text-opacity))}.btn-outline.btn-primary:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--pc) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--pf,var(--p)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--pc) / var(--tw-text-opacity))}.btn-outline.btn-secondary:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--sc) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--sf,var(--s)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--sc) / var(--tw-text-opacity))}.btn-outline.btn-accent:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--ac) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--af,var(--a)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--ac) / var(--tw-text-opacity))}@-webkit-keyframes button-pop{0%{transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@keyframes button-pop{0%{transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@-webkit-keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}@keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}.link:focus{outline:2px solid transparent;outline-offset:2px}.link:focus-visible{outline:2px solid currentColor;outline-offset:2px}@-webkit-keyframes progress-loading{50%{left:107%}}@keyframes progress-loading{50%{left:107%}}@-webkit-keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset}50%{box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset}to{box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset}}@keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset}50%{box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset}to{box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset}}@-webkit-keyframes rating-pop{0%{transform:translateY(-.125em)}40%{transform:translateY(-.125em)}to{transform:translateY(0)}}@keyframes rating-pop{0%{transform:translateY(-.125em)}40%{transform:translateY(-.125em)}to{transform:translateY(0)}}.fixed{position:fixed}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.z-50{z-index:50}.my-auto{margin-top:auto;margin-bottom:auto}.flex{display:flex}.h-screen{height:100vh}.w-full{width:100%}.max-w-xs{max-width:20rem}.select-none{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.subpixel-antialiased{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}.outline{outline-style:solid}a:active,a:focus,a:hover,button:active,button:focus,button:hover,input:active,input:focus,input:hover{outline:0}body{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}video{z-index:0;height:100vh;width:100%;--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}video::-webkit-media-controls{display:none}</style></head><body><noscript>you need to enable javascript to run this app</noscript><div id=screen><video id=video preload=auto autoplay=true muted=true /></div></body></html>